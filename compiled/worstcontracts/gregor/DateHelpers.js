"use strict";
exports.__esModule = true;
var c151a835ceacdb11090d1960ae92771fe;
if (typeof c151a835ceacdb11090d1960ae92771fe === "undefined")
    c151a835ceacdb11090d1960ae92771fe = $ir_contract_for("number");
$ir_obj_def_const(this, "c151a835ceacdb11090d1960ae92771fec", c151a835ceacdb11090d1960ae92771fe, true);
function c9deb2b0cfd31e008a148d99a841154baf() {
    "Array";
    if (typeof c9deb2b0cfd31e008a148d99a841154ba !== "undefined")
        return c9deb2b0cfd31e008a148d99a841154ba;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "length", co);
    c = $ir_contract_oblige_array(c, co);
    c9deb2b0cfd31e008a148d99a841154ba = c;
    $ir_contract_oblige_member(c, "length", c151a835ceacdb11090d1960ae92771fe);
    c = $ir_contract_oblige_array(c, c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var c9deb2b0cfd31e008a148d99a841154ba;
if (typeof c9deb2b0cfd31e008a148d99a841154ba === "undefined")
    c9deb2b0cfd31e008a148d99a841154ba = c9deb2b0cfd31e008a148d99a841154baf();
$ir_obj_def_const(this, "c9deb2b0cfd31e008a148d99a841154bac", c9deb2b0cfd31e008a148d99a841154ba, true);
function cba231f20fb6fc388eee39c06308fe87ef() {
    "BigInt";
    if (typeof cba231f20fb6fc388eee39c06308fe87e !== "undefined")
        return cba231f20fb6fc388eee39c06308fe87e;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "value", co);
    c = $ir_contract_oblige_member(c, "arrayValue", co);
    c = $ir_contract_oblige_member(c, "sign", co);
    c = $ir_contract_oblige_member(c, "howDecimal", co);
    cba231f20fb6fc388eee39c06308fe87e = c;
    $ir_contract_oblige_member(c, "value", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "arrayValue", c9deb2b0cfd31e008a148d99a841154baf());
    $ir_contract_oblige_member(c, "sign", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "howDecimal", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var cba231f20fb6fc388eee39c06308fe87e;
if (typeof cba231f20fb6fc388eee39c06308fe87e === "undefined")
    cba231f20fb6fc388eee39c06308fe87e = cba231f20fb6fc388eee39c06308fe87ef();
$ir_obj_def_const(this, "cba231f20fb6fc388eee39c06308fe87ec", cba231f20fb6fc388eee39c06308fe87e, true);
function cb428ee35dde1daf8172dc14bf3090eabf() {
    "ExactRational";
    if (typeof cb428ee35dde1daf8172dc14bf3090eab !== "undefined")
        return cb428ee35dde1daf8172dc14bf3090eab;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "num", co);
    c = $ir_contract_oblige_member(c, "denom", co);
    cb428ee35dde1daf8172dc14bf3090eab = c;
    $ir_contract_oblige_member(c, "num", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "denom", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var cb428ee35dde1daf8172dc14bf3090eab;
if (typeof cb428ee35dde1daf8172dc14bf3090eab === "undefined")
    cb428ee35dde1daf8172dc14bf3090eab = cb428ee35dde1daf8172dc14bf3090eabf();
$ir_obj_def_const(this, "cb428ee35dde1daf8172dc14bf3090eabc", cb428ee35dde1daf8172dc14bf3090eab, true);
function c9c3d4cbbdeb15660563c128f0c7311a1f() {
    "Consts";
    if (typeof c9c3d4cbbdeb15660563c128f0c7311a1 !== "undefined")
        return c9c3d4cbbdeb15660563c128f0c7311a1;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "NS_SECOND", co);
    c = $ir_contract_oblige_member(c, "NS_MILLI", co);
    c = $ir_contract_oblige_member(c, "NS_MICRO", co);
    c = $ir_contract_oblige_member(c, "NS_MINUTE", co);
    c = $ir_contract_oblige_member(c, "NS_HOUR", co);
    c = $ir_contract_oblige_member(c, "NS_DAY", co);
    c = $ir_contract_oblige_member(c, "MILLI_DAY", co);
    c = $ir_contract_oblige_member(c, "DAYS_NS", co);
    c9c3d4cbbdeb15660563c128f0c7311a1 = c;
    $ir_contract_oblige_member(c, "NS_SECOND", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_MILLI", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_MICRO", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_MINUTE", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_HOUR", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_DAY", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "MILLI_DAY", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "DAYS_NS", cb428ee35dde1daf8172dc14bf3090eabf());
    return c;
}
var c9c3d4cbbdeb15660563c128f0c7311a1;
if (typeof c9c3d4cbbdeb15660563c128f0c7311a1 === "undefined")
    c9c3d4cbbdeb15660563c128f0c7311a1 = c9c3d4cbbdeb15660563c128f0c7311a1f();
$ir_obj_def_const(this, "c9c3d4cbbdeb15660563c128f0c7311a1c", c9c3d4cbbdeb15660563c128f0c7311a1, true);
function ce47d9450624f1d498b2010288b025110f() {
    "HMSN";
    if (typeof ce47d9450624f1d498b2010288b025110 !== "undefined")
        return ce47d9450624f1d498b2010288b025110;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "h", co);
    c = $ir_contract_oblige_member(c, "m", co);
    c = $ir_contract_oblige_member(c, "s", co);
    c = $ir_contract_oblige_member(c, "n", co);
    ce47d9450624f1d498b2010288b025110 = c;
    $ir_contract_oblige_member(c, "h", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "m", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "s", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "n", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var ce47d9450624f1d498b2010288b025110;
if (typeof ce47d9450624f1d498b2010288b025110 === "undefined")
    ce47d9450624f1d498b2010288b025110 = ce47d9450624f1d498b2010288b025110f();
$ir_obj_def_const(this, "ce47d9450624f1d498b2010288b025110c", ce47d9450624f1d498b2010288b025110, true);
function c9d621ec1593b6269e269fe4abfa7644af() {
    "YMD";
    if (typeof c9d621ec1593b6269e269fe4abfa7644a !== "undefined")
        return c9d621ec1593b6269e269fe4abfa7644a;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "y", co);
    c = $ir_contract_oblige_member(c, "d", co);
    c9d621ec1593b6269e269fe4abfa7644a = c;
    $ir_contract_oblige_member(c, "y", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "d", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var c9d621ec1593b6269e269fe4abfa7644a;
if (typeof c9d621ec1593b6269e269fe4abfa7644a === "undefined")
    c9d621ec1593b6269e269fe4abfa7644a = c9d621ec1593b6269e269fe4abfa7644af();
$ir_obj_def_const(this, "c9d621ec1593b6269e269fe4abfa7644ac", c9d621ec1593b6269e269fe4abfa7644a, true);
function c88c4fc9dc6ad49b94a0acac0da2a67adf() {
    "Date";
    if (typeof c88c4fc9dc6ad49b94a0acac0da2a67ad !== "undefined")
        return c88c4fc9dc6ad49b94a0acac0da2a67ad;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "ymd", co);
    c = $ir_contract_oblige_member(c, "jdn", co);
    c88c4fc9dc6ad49b94a0acac0da2a67ad = c;
    $ir_contract_oblige_member(c, "ymd", c9d621ec1593b6269e269fe4abfa7644af());
    $ir_contract_oblige_member(c, "jdn", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var c88c4fc9dc6ad49b94a0acac0da2a67ad;
if (typeof c88c4fc9dc6ad49b94a0acac0da2a67ad === "undefined")
    c88c4fc9dc6ad49b94a0acac0da2a67ad = c88c4fc9dc6ad49b94a0acac0da2a67adf();
$ir_obj_def_const(this, "c88c4fc9dc6ad49b94a0acac0da2a67adc", c88c4fc9dc6ad49b94a0acac0da2a67ad, true);
// this is equivalent to date.rkt
// i'm fully aware that these should be member functions in the Date class,
// but in the interest of keeping this as close to the racket original as possible
// i figured i'd do it this way
var CoreClasses_1 = require("./CoreClasses");
var YMD_1 = require("./YMD");
var DateHelpers;
(function (DateHelpers) {
    function date_hash_proc(x, fn) {
        $rt_addContract(x, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(8,40)");
        return fn(x.jdn);
    }
    DateHelpers.date_hash_proc = date_hash_proc;
    // this is temporary, and probably needs to take an output channel
    // to better match the racket and to actually make sense
    // but it's unused in the tests so it's fine for now
    function date_write_proc(d) {
        $rt_addContract(d, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(14,41)");
        console.log("<date " + date_to_iso8601(d) + ">");
    }
    DateHelpers.date_write_proc = date_write_proc;
    function isDate(d) {
        return (d instanceof CoreClasses_1.CoreClasses.Date);
    }
    DateHelpers.isDate = isDate;
    function date(y, m, d) {
        if (m === void 0) { m = CoreClasses_1.CoreClasses.Month.jan; }
        if (d === void 0) { d = 1; }
        $rt_check(y, "number");
        $rt_check(d, "number");
        var ymd = new CoreClasses_1.CoreClasses.YMD(y, m, d);
        return new CoreClasses_1.CoreClasses.Date(ymd, YMD_1.YMD.ymd_to_jdn(ymd).ieEval());
    }
    DateHelpers.date = date;
    function date_to_ymd(d) {
        $rt_addContract(d, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(24,37)");
        return d.ymd;
    }
    DateHelpers.date_to_ymd = date_to_ymd;
    function date_to_jdn(d) {
        $rt_addContract(d, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(27,37)");
        return d.jdn;
    }
    DateHelpers.date_to_jdn = date_to_jdn;
    function ymd_to_date(ymd) {
        return date(ymd.y, ymd.m, ymd.d);
    }
    DateHelpers.ymd_to_date = ymd_to_date;
    function jdn_to_date(jdn) {
        return new CoreClasses_1.CoreClasses.Date(YMD_1.YMD.jdn_to_ymd(new CoreClasses_1.CoreClasses.ExactRational(jdn, 1)), jdn);
    }
    DateHelpers.jdn_to_date = jdn_to_date;
    function date_to_iso_week(d) {
        $rt_addContract(d, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(36,42)");
        return date_to_iso_week_wyear(d).x;
    }
    DateHelpers.date_to_iso_week = date_to_iso_week;
    function date_to_iso_wyear(d) {
        $rt_addContract(d, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(39,43)");
        return date_to_iso_week_wyear(d).x;
    }
    DateHelpers.date_to_iso_wyear = date_to_iso_wyear;
    function date_to_iso_week_wyear(d) {
        $rt_addContract(d, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(42,48)");
        var ymd = date_to_ymd(d);
        var yday = YMD_1.YMD.ymd_yday(ymd);
        var iso_yday = YMD_1.YMD.jdn_to_iso_wday(date_to_jdn(d));
        var y = ymd.y;
        var w = Math.floor((yday + (-iso_yday) + 10) / 7.0);
        if (w == 0) {
            var y_1 = y - 1;
            return new CoreClasses_1.CoreClasses.Pair(YMD_1.YMD.iso_weeks_in_year(y_1), y_1);
        }
        else if ((w == 53) && (w > YMD_1.YMD.iso_weeks_in_year(y))) {
            return new CoreClasses_1.CoreClasses.Pair(1, y);
        }
        else {
            return new CoreClasses_1.CoreClasses.Pair(w, y);
        }
    }
    DateHelpers.date_to_iso_week_wyear = date_to_iso_week_wyear;
    function f(n, len) {
        $rt_check(len, "number");
        var instr = n + "";
        var curLen = instr.length;
        for (var i = 0; i < (len - curLen); i++) {
            instr = "0" + instr;
        }
        return instr;
    }
    function date_to_iso8601(d) {
        $rt_addContract(d, c88c4fc9dc6ad49b94a0acac0da2a67adc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/compiled/worstcontracts/gregor/DateHelpers.ts(67,41)");
        var yd = d.ymd.y;
        var md = $rt_check(d.ymd.m, "number");
        var dd = d.ymd.d;
        return (f(yd, 4) + "-" + f(md, 2) + "-" + f(dd, 2));
    }
    DateHelpers.date_to_iso8601 = date_to_iso8601;
})(DateHelpers = exports.DateHelpers || (exports.DateHelpers = {}));
