"use strict";
exports.__esModule = true;
function c2a02e0ed7f0f2f04419c984bc1c284ccf() {
    "Pair";
    if (typeof c2a02e0ed7f0f2f04419c984bc1c284cc !== "undefined")
        return c2a02e0ed7f0f2f04419c984bc1c284cc;
    var co = $ir_contract_for("object");
    var c = co;
    c2a02e0ed7f0f2f04419c984bc1c284cc = c;
    return c;
}
var c2a02e0ed7f0f2f04419c984bc1c284cc;
if (typeof c2a02e0ed7f0f2f04419c984bc1c284cc === "undefined")
    c2a02e0ed7f0f2f04419c984bc1c284cc = c2a02e0ed7f0f2f04419c984bc1c284ccf();
$ir_obj_def_const(this, "c2a02e0ed7f0f2f04419c984bc1c284ccc", c2a02e0ed7f0f2f04419c984bc1c284cc, true);
var c151a835ceacdb11090d1960ae92771fe;
if (typeof c151a835ceacdb11090d1960ae92771fe === "undefined")
    c151a835ceacdb11090d1960ae92771fe = $ir_contract_for("number");
$ir_obj_def_const(this, "c151a835ceacdb11090d1960ae92771fec", c151a835ceacdb11090d1960ae92771fe, true);
function cfe75780498f6d2024991c376e8db95fef() {
    "Posn";
    if (typeof cfe75780498f6d2024991c376e8db95fe !== "undefined")
        return cfe75780498f6d2024991c376e8db95fe;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "x", co);
    c = $ir_contract_oblige_member(c, "y", co);
    cfe75780498f6d2024991c376e8db95fe = c;
    $ir_contract_oblige_member(c, "x", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "y", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var cfe75780498f6d2024991c376e8db95fe;
if (typeof cfe75780498f6d2024991c376e8db95fe === "undefined")
    cfe75780498f6d2024991c376e8db95fe = cfe75780498f6d2024991c376e8db95fef();
$ir_obj_def_const(this, "cfe75780498f6d2024991c376e8db95fec", cfe75780498f6d2024991c376e8db95fe, true);
function cdecff1a443444ae523cf510374116a49f() {
    "Array";
    if (typeof cdecff1a443444ae523cf510374116a49 !== "undefined")
        return cdecff1a443444ae523cf510374116a49;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "length", co);
    c = $ir_contract_oblige_array(c, co);
    cdecff1a443444ae523cf510374116a49 = c;
    $ir_contract_oblige_member(c, "length", c151a835ceacdb11090d1960ae92771fe);
    c = $ir_contract_oblige_array(c, cfe75780498f6d2024991c376e8db95fef());
    return c;
}
var cdecff1a443444ae523cf510374116a49;
if (typeof cdecff1a443444ae523cf510374116a49 === "undefined")
    cdecff1a443444ae523cf510374116a49 = cdecff1a443444ae523cf510374116a49f();
$ir_obj_def_const(this, "cdecff1a443444ae523cf510374116a49c", cdecff1a443444ae523cf510374116a49, true);
function cc7b4361aa7e2265cf59854ad58640267f() {
    "Pair";
    if (typeof cc7b4361aa7e2265cf59854ad58640267 !== "undefined")
        return cc7b4361aa7e2265cf59854ad58640267;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "x", co);
    c = $ir_contract_oblige_member(c, "y", co);
    cc7b4361aa7e2265cf59854ad58640267 = c;
    $ir_contract_oblige_member(c, "x", cfe75780498f6d2024991c376e8db95fef());
    $ir_contract_oblige_member(c, "y", cdecff1a443444ae523cf510374116a49f());
    return c;
}
var cc7b4361aa7e2265cf59854ad58640267;
if (typeof cc7b4361aa7e2265cf59854ad58640267 === "undefined")
    cc7b4361aa7e2265cf59854ad58640267 = cc7b4361aa7e2265cf59854ad58640267f();
$ir_obj_def_const(this, "cc7b4361aa7e2265cf59854ad58640267c", cc7b4361aa7e2265cf59854ad58640267, true);
function c1c4a0f57a2c3f1f88733420f6a3b3c6ff() {
    "Snake";
    if (typeof c1c4a0f57a2c3f1f88733420f6a3b3c6f !== "undefined")
        return c1c4a0f57a2c3f1f88733420f6a3b3c6f;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "segs", co);
    c1c4a0f57a2c3f1f88733420f6a3b3c6f = c;
    $ir_contract_oblige_member(c, "segs", cc7b4361aa7e2265cf59854ad58640267f());
    return c;
}
var c1c4a0f57a2c3f1f88733420f6a3b3c6f;
if (typeof c1c4a0f57a2c3f1f88733420f6a3b3c6f === "undefined")
    c1c4a0f57a2c3f1f88733420f6a3b3c6f = c1c4a0f57a2c3f1f88733420f6a3b3c6ff();
$ir_obj_def_const(this, "c1c4a0f57a2c3f1f88733420f6a3b3c6fc", c1c4a0f57a2c3f1f88733420f6a3b3c6f, true);
function cd4e49798d42ac5a95f1a8edbd8ed8c01f() {
    "World";
    if (typeof cd4e49798d42ac5a95f1a8edbd8ed8c01 !== "undefined")
        return cd4e49798d42ac5a95f1a8edbd8ed8c01;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "snake", co);
    c = $ir_contract_oblige_member(c, "food", co);
    cd4e49798d42ac5a95f1a8edbd8ed8c01 = c;
    $ir_contract_oblige_member(c, "snake", c1c4a0f57a2c3f1f88733420f6a3b3c6ff());
    $ir_contract_oblige_member(c, "food", cfe75780498f6d2024991c376e8db95fef());
    return c;
}
var cd4e49798d42ac5a95f1a8edbd8ed8c01;
if (typeof cd4e49798d42ac5a95f1a8edbd8ed8c01 === "undefined")
    cd4e49798d42ac5a95f1a8edbd8ed8c01 = cd4e49798d42ac5a95f1a8edbd8ed8c01f();
$ir_obj_def_const(this, "cd4e49798d42ac5a95f1a8edbd8ed8c01c", cd4e49798d42ac5a95f1a8edbd8ed8c01, true);
function cd751713988987e9331980363e24189cef() {
    "GameConsts";
    if (typeof cd751713988987e9331980363e24189ce !== "undefined")
        return cd751713988987e9331980363e24189ce;
    var co = $ir_contract_for("object");
    var c = co;
    cd751713988987e9331980363e24189ce = c;
    return c;
}
var cd751713988987e9331980363e24189ce;
if (typeof cd751713988987e9331980363e24189ce === "undefined")
    cd751713988987e9331980363e24189ce = cd751713988987e9331980363e24189cef();
$ir_obj_def_const(this, "cd751713988987e9331980363e24189cec", cd751713988987e9331980363e24189ce, true);
// this is equivalent to motion-helpers.rkt
// i also put the cut-tail method (from cut-tail.rkt) in here too
// since there doesn't really seem to be much point of having it in its own file
/// <reference path='DataClasses.ts'/>
var DataClasses_1 = require("./DataClasses");
var MotionHelpers;
(function (MotionHelpers) {
    // compute the next position for head
    function next_head(seg, dir) {
        $rt_addContract(seg, cfe75780498f6d2024991c376e8db95fec, "motion_helpers.ts(11,27)");
        switch (dir) {
            case (DataClasses_1.DataClasses.Dir.up):
                return new DataClasses_1.DataClasses.Posn(seg.x, seg.y + 1);
            case (DataClasses_1.DataClasses.Dir.down):
                return new DataClasses_1.DataClasses.Posn(seg.x, seg.y - 1);
            case (DataClasses_1.DataClasses.Dir.left):
                return new DataClasses_1.DataClasses.Posn(seg.x - 1, seg.y);
            case (DataClasses_1.DataClasses.Dir.right):
                return new DataClasses_1.DataClasses.Posn(seg.x + 1, seg.y);
            default:
                return seg;
        }
    }
    MotionHelpers.next_head = next_head;
    // the racket code for this is a hilarious abuse of types
    // really, all it's doing (i think) is returning the list sans
    // the last position
    // but they use a recursive method so i should also use a recursive method
    function cut_tail(segs) {
        $rt_addContract(segs, cdecff1a443444ae523cf510374116a49c, "motion_helpers.ts(31,26)");
        if (segs.length < 2) {
            return [];
        }
        else {
            return [segs[0]].concat(cut_tail(segs.splice(1, -1)));
        }
    }
    MotionHelpers.cut_tail = cut_tail;
    // move the snake one step
    function snake_slither(snk) {
        $rt_addContract(snk, c1c4a0f57a2c3f1f88733420f6a3b3c6fc, "motion_helpers.ts(41,31)");
        var d = snk.dir;
        var newPos = next_head(snk.segs.x, d);
        var newTail = cut_tail([snk.segs.x].concat(snk.segs.y));
        return new DataClasses_1.DataClasses.Snake(d, new DataClasses_1.DataClasses.Pair(newPos, newTail));
    }
    MotionHelpers.snake_slither = snake_slither;
    // grow the snake one segment
    function snake_grow(snk) {
        $rt_addContract(snk, c1c4a0f57a2c3f1f88733420f6a3b3c6fc, "motion_helpers.ts(52,28)");
        var d = snk.dir;
        var newPos = next_head(snk.segs.x, d);
        var newTail = [snk.segs.x].concat(snk.segs.y);
        var newSnk = new DataClasses_1.DataClasses.Snake(d, new DataClasses_1.DataClasses.Pair(newPos, newTail));
        return newSnk;
    }
    MotionHelpers.snake_grow = snake_grow;
})(MotionHelpers = exports.MotionHelpers || (exports.MotionHelpers = {}));
