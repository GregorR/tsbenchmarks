"use strict";
exports.__esModule = true;
var c151a835ceacdb11090d1960ae92771fe;
if (typeof c151a835ceacdb11090d1960ae92771fe === "undefined")
    c151a835ceacdb11090d1960ae92771fe = $ir_contract_for("number");
$ir_obj_def_const(this, "c151a835ceacdb11090d1960ae92771fec", c151a835ceacdb11090d1960ae92771fe, true);
function c9deb2b0cfd31e008a148d99a841154baf() {
    "Array";
    if (typeof c9deb2b0cfd31e008a148d99a841154ba !== "undefined")
        return c9deb2b0cfd31e008a148d99a841154ba;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "length", co);
    c = $ir_contract_oblige_array(c, co);
    c9deb2b0cfd31e008a148d99a841154ba = c;
    $ir_contract_oblige_member(c, "length", c151a835ceacdb11090d1960ae92771fe);
    c = $ir_contract_oblige_array(c, c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var c9deb2b0cfd31e008a148d99a841154ba;
if (typeof c9deb2b0cfd31e008a148d99a841154ba === "undefined")
    c9deb2b0cfd31e008a148d99a841154ba = c9deb2b0cfd31e008a148d99a841154baf();
$ir_obj_def_const(this, "c9deb2b0cfd31e008a148d99a841154bac", c9deb2b0cfd31e008a148d99a841154ba, true);
function cba231f20fb6fc388eee39c06308fe87ef() {
    "BigInt";
    if (typeof cba231f20fb6fc388eee39c06308fe87e !== "undefined")
        return cba231f20fb6fc388eee39c06308fe87e;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "value", co);
    c = $ir_contract_oblige_member(c, "arrayValue", co);
    c = $ir_contract_oblige_member(c, "sign", co);
    c = $ir_contract_oblige_member(c, "howDecimal", co);
    cba231f20fb6fc388eee39c06308fe87e = c;
    $ir_contract_oblige_member(c, "value", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "arrayValue", c9deb2b0cfd31e008a148d99a841154baf());
    $ir_contract_oblige_member(c, "sign", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "howDecimal", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var cba231f20fb6fc388eee39c06308fe87e;
if (typeof cba231f20fb6fc388eee39c06308fe87e === "undefined")
    cba231f20fb6fc388eee39c06308fe87e = cba231f20fb6fc388eee39c06308fe87ef();
$ir_obj_def_const(this, "cba231f20fb6fc388eee39c06308fe87ec", cba231f20fb6fc388eee39c06308fe87e, true);
function cb428ee35dde1daf8172dc14bf3090eabf() {
    "ExactRational";
    if (typeof cb428ee35dde1daf8172dc14bf3090eab !== "undefined")
        return cb428ee35dde1daf8172dc14bf3090eab;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "num", co);
    c = $ir_contract_oblige_member(c, "denom", co);
    cb428ee35dde1daf8172dc14bf3090eab = c;
    $ir_contract_oblige_member(c, "num", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "denom", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var cb428ee35dde1daf8172dc14bf3090eab;
if (typeof cb428ee35dde1daf8172dc14bf3090eab === "undefined")
    cb428ee35dde1daf8172dc14bf3090eab = cb428ee35dde1daf8172dc14bf3090eabf();
$ir_obj_def_const(this, "cb428ee35dde1daf8172dc14bf3090eabc", cb428ee35dde1daf8172dc14bf3090eab, true);
function c9c3d4cbbdeb15660563c128f0c7311a1f() {
    "Consts";
    if (typeof c9c3d4cbbdeb15660563c128f0c7311a1 !== "undefined")
        return c9c3d4cbbdeb15660563c128f0c7311a1;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "NS_SECOND", co);
    c = $ir_contract_oblige_member(c, "NS_MILLI", co);
    c = $ir_contract_oblige_member(c, "NS_MICRO", co);
    c = $ir_contract_oblige_member(c, "NS_MINUTE", co);
    c = $ir_contract_oblige_member(c, "NS_HOUR", co);
    c = $ir_contract_oblige_member(c, "NS_DAY", co);
    c = $ir_contract_oblige_member(c, "MILLI_DAY", co);
    c = $ir_contract_oblige_member(c, "DAYS_NS", co);
    c9c3d4cbbdeb15660563c128f0c7311a1 = c;
    $ir_contract_oblige_member(c, "NS_SECOND", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_MILLI", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_MICRO", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_MINUTE", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_HOUR", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "NS_DAY", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "MILLI_DAY", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "DAYS_NS", cb428ee35dde1daf8172dc14bf3090eabf());
    return c;
}
var c9c3d4cbbdeb15660563c128f0c7311a1;
if (typeof c9c3d4cbbdeb15660563c128f0c7311a1 === "undefined")
    c9c3d4cbbdeb15660563c128f0c7311a1 = c9c3d4cbbdeb15660563c128f0c7311a1f();
$ir_obj_def_const(this, "c9c3d4cbbdeb15660563c128f0c7311a1c", c9c3d4cbbdeb15660563c128f0c7311a1, true);
function ce47d9450624f1d498b2010288b025110f() {
    "HMSN";
    if (typeof ce47d9450624f1d498b2010288b025110 !== "undefined")
        return ce47d9450624f1d498b2010288b025110;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "h", co);
    c = $ir_contract_oblige_member(c, "m", co);
    c = $ir_contract_oblige_member(c, "s", co);
    c = $ir_contract_oblige_member(c, "n", co);
    ce47d9450624f1d498b2010288b025110 = c;
    $ir_contract_oblige_member(c, "h", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "m", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "s", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "n", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var ce47d9450624f1d498b2010288b025110;
if (typeof ce47d9450624f1d498b2010288b025110 === "undefined")
    ce47d9450624f1d498b2010288b025110 = ce47d9450624f1d498b2010288b025110f();
$ir_obj_def_const(this, "ce47d9450624f1d498b2010288b025110c", ce47d9450624f1d498b2010288b025110, true);
function c9d621ec1593b6269e269fe4abfa7644af() {
    "YMD";
    if (typeof c9d621ec1593b6269e269fe4abfa7644a !== "undefined")
        return c9d621ec1593b6269e269fe4abfa7644a;
    var co = $ir_contract_for("object");
    var c = co;
    c = $ir_contract_oblige_member(c, "y", co);
    c = $ir_contract_oblige_member(c, "d", co);
    c9d621ec1593b6269e269fe4abfa7644a = c;
    $ir_contract_oblige_member(c, "y", c151a835ceacdb11090d1960ae92771fe);
    $ir_contract_oblige_member(c, "d", c151a835ceacdb11090d1960ae92771fe);
    return c;
}
var c9d621ec1593b6269e269fe4abfa7644a;
if (typeof c9d621ec1593b6269e269fe4abfa7644a === "undefined")
    c9d621ec1593b6269e269fe4abfa7644a = c9d621ec1593b6269e269fe4abfa7644af();
$ir_obj_def_const(this, "c9d621ec1593b6269e269fe4abfa7644ac", c9d621ec1593b6269e269fe4abfa7644a, true);
// helper functions for the YMD class mostly
// all names match to the racket originals
// this corresponds to ymd.rkt
var CoreClasses_1 = require("./CoreClasses");
var YMD;
(function (YMD) {
    YMD.DAYS_PER_MONTH = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    YMD.CUMULATIVE_MONTH_DAYS = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
    YMD.CUMULATIVE_MONTH_DAYS_LEAP = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
    function ex_truncate(t) {
        $rt_check(t, "number");
        return (t < 0 ? -1 : 1) * Math.floor(Math.abs(t));
    }
    YMD.ex_truncate = ex_truncate;
    function mod1(x, y) {
        $rt_check(x, "number");
        $rt_check(y, "number");
        return y - ((y - x) % y);
    }
    YMD.mod1 = mod1;
    function ymd_to_jdn(ymd) {
        $rt_addContract(ymd, c9d621ec1593b6269e269fe4abfa7644ac, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/gregor/YMD.ts(26,28)");
        var y = ymd.y;
        var m = $rt_check(ymd.m, "number");
        var d = ymd.d;
        if (m < 3) {
            y -= 1;
            m += 12;
        }
        var t1 = ex_truncate(((m * 153) - 457) / 5.0);
        return new CoreClasses_1.CoreClasses.ExactRational(d + t1 + y * 365 + Math.floor(y / 4) + (-1) * Math.floor(y / 100) + Math.floor(y / 400) + 1721119, 1);
    }
    YMD.ymd_to_jdn = ymd_to_jdn;
    function jdn_to_ymd(jdn) {
        $rt_addContract(jdn, cb428ee35dde1daf8172dc14bf3090eabc, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/gregor/YMD.ts(40,28)");
        var x = Math.floor((jdn.ieEval() - 1867216.25) / 36524.25);
        var a = jdn.ieEval() + 1 + x + (-1) * Math.floor(x / 4);
        var b = a + 1524;
        var c = Math.floor((b - 122.1) / 365.25);
        var d = Math.floor(c * 365.25);
        var e = Math.floor((b - d) / 30.6001);
        var dom = (b - d) - Math.floor(e * 30.6001);
        var m, y;
        if (e <= 13) {
            m = e - 1;
            y = c - 4716;
        }
        else {
            m = e - 13;
            y = c - 4715;
        }
        return new CoreClasses_1.CoreClasses.YMD(y, m, dom);
    }
    YMD.jdn_to_ymd = jdn_to_ymd;
    function jdn_wday(jdn) {
        $rt_check(jdn, "number");
        return ((jdn + 1) % 7);
    }
    YMD.jdn_wday = jdn_wday;
    function jdn_to_iso_wday(jdn) {
        $rt_check(jdn, "number");
        return mod1(jdn_wday(jdn), 7);
    }
    YMD.jdn_to_iso_wday = jdn_to_iso_wday;
    function ymd_yday(ymd) {
        $rt_addContract(ymd, c9d621ec1593b6269e269fe4abfa7644ac, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/gregor/YMD.ts(69,26)");
        var y = ymd.y;
        var m = $rt_check(ymd.m, "number");
        var d = ymd.d;
        if (is_leap_year(y)) {
            return d + YMD.CUMULATIVE_MONTH_DAYS_LEAP[m - 1];
        }
        else {
            return d + YMD.CUMULATIVE_MONTH_DAYS[m - 1];
        }
    }
    YMD.ymd_yday = ymd_yday;
    function ymd_to_quarter(ymd) {
        $rt_addContract(ymd, c9d621ec1593b6269e269fe4abfa7644ac, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/gregor/YMD.ts(81,32)");
        return Math.floor((ymd.m - 1) / 3.0) + 1;
    }
    YMD.ymd_to_quarter = ymd_to_quarter;
    function ymd_add_years(ymd, n) {
        $rt_addContract(ymd, c9d621ec1593b6269e269fe4abfa7644ac, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/gregor/YMD.ts(85,31)");
        $rt_check(n, "number");
        var y = ymd.y;
        var m = $rt_check(ymd.m, "number");
        var d = ymd.d;
        var ny = y + n;
        var max_dom = days_in_month(ny, m);
        return new CoreClasses_1.CoreClasses.YMD(ny, m, ((d <= max_dom ? d : max_dom)));
    }
    YMD.ymd_add_years = ymd_add_years;
    function ymd_add_months(ymd, n) {
        $rt_addContract(ymd, c9d621ec1593b6269e269fe4abfa7644ac, "/home/gkrichar/research/projects/ongoing/vm-gradual-typing/tsbenchmarks/gregor/YMD.ts(96,32)");
        $rt_check(n, "number");
        var y = ymd.y;
        var m = $rt_check(ymd.m, "number");
        var d = ymd.d;
        var ny = y + Math.floor((n + m - 1) / 12);
        var v = mod1((m + n), 12);
        var nm = v < 0 ? v + 12 : v;
        var max_dom = days_in_month(ny, nm);
        var nd = d <= max_dom ? d : max_dom;
        return new CoreClasses_1.CoreClasses.YMD(ny, nm, nd);
    }
    YMD.ymd_add_months = ymd_add_months;
    function is_leap_year(y) {
        $rt_check(y, "number");
        // if (year is not divisible by 4) then (it is a common year)
        // else if (year is not divisible by 100) then (it is a leap year)
        // else if (year is not divisible by 400) then (it is a common year)
        // else (it is a leap year)
        if (y % 4 != 0) {
            false;
        }
        else if (y % 100 != 0) {
            true;
        }
        else if (y % 400 != 0) {
            false;
        }
        else {
            return true;
        }
    }
    YMD.is_leap_year = is_leap_year;
    function days_in_month(y, m) {
        $rt_check(y, "number");
        $rt_check(m, "number");
        // months with 31 days: jan=1, mar=3, may=5, jul=7, aug=8, oct=10, dec=12
        // months with 30 days: apr=4, jun=6, sep=9, nov=11
        // feb=2 depends on the year
        if (m < 1 || m > 12) {
            return -1; // error
        }
        if (m == 1 || m == 3 || m == 5 || m == 7 || m == 8 || m == 10 || m == 12) {
            return 31;
        }
        else if (m == 4 || m == 6 || m == 9 || m == 11) {
            return 30;
        }
        else if (m == 2 && is_leap_year(y)) {
            return 29;
        }
        else {
            return 29;
        }
    }
    YMD.days_in_month = days_in_month;
    function iso_weeks_in_year(y) {
        $rt_check(y, "number");
        var w = jdn_wday(Math.floor(ymd_to_jdn(new CoreClasses_1.CoreClasses.YMD(y, 1, 1)).ieEval()));
        if (w == 4 || (is_leap_year(y) && w == 3)) {
            return 53;
        }
        else {
            return 52;
        }
    }
    YMD.iso_weeks_in_year = iso_weeks_in_year;
})(YMD = exports.YMD || (exports.YMD = {}));
