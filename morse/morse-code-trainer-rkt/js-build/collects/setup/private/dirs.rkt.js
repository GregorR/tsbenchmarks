import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../racket/private/kw-file.rkt.js";import * as M1 from "../../racket/private/reading-param.rkt.js";import * as M2 from "../../racket/private/config.rkt.js";import * as M3 from "../../racket/private/map.rkt.js";import * as M4 from "../../racket/private/member.rkt.js";import * as M5 from "../../../runtime/kernel.rkt.js";import * as M6 from "../../racket/promise.rkt.js";import * as M7 from "../../racket/private/promise.rkt.js";var find_config_dir = function() {return M2.find_main_config();};var config_table = M6.__rjs_quoted__.delay_by_sync(function() {var d2538 = find_config_dir();if (d2538) {var p2539 = M5.build_path(d2538,"config.rktd");if (M5.file_exists_p(p2539)) {var p162540 = p2539;var temp172541 = function(in2542) {return M1.call_with_default_reading_parameterization(function() {return M5.read(in2542);});};if (M5.variable_reference_constant_p(M0.__rjs_quoted__.call_with_input_file_times_63)) {var if_res1467 = M0.__rjs_quoted__.call_with_input_file_times_61(false,false,p162540,temp172541);} else {var if_res1467 = M0.__rjs_quoted__.call_with_input_file_times_63(p162540,temp172541);}var if_res1468 = if_res1467;} else {var if_res1468 = $rjs_core.Hash.makeEqual([], false);}var if_res1469 = if_res1468;} else {var if_res1469 = $rjs_core.Hash.makeEqual([], false);}return if_res1469;});var to_path = function(l2543) {if (M5.string_p(l2543)) {var if_res1472 = M5.simplify_path(complete_path(M5.string__gt_path(l2543)));} else {if (M5.bytes_p(l2543)) {var if_res1471 = M5.simplify_path(complete_path(M5.bytes__gt_path(l2543)));} else {if (M5.list_p(l2543)) {var if_res1470 = M3.map(to_path,l2543);} else {var if_res1470 = l2543;}var if_res1471 = if_res1470;}var if_res1472 = if_res1471;}return if_res1472;};var complete_path = function(p2544) {if (M5.complete_path_p(p2544)) {var if_res1473 = p2544;} else {var if_res1473 = M5.path__gt_complete_path(p2544,M2.find_main_collects());}return if_res1473;};var config_collects_search_dirs = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("collects-search-dirs"),false));});var config_doc_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("doc-dir"),false));});var config_doc_search_dirs = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("doc-search-dirs"),false));});var config_dll_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("dll-dir"),false));});var config_lib_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("lib-dir"),false));});var config_lib_search_dirs = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("lib-search-dirs"),false));});var config_share_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("share-dir"),false));});var config_apps_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("apps-dir"),false));});var config_include_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("include-dir"),false));});var config_include_search_dirs = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("include-search-dirs"),false));});var config_bin_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("bin-dir"),false));});var config_config_tethered_console_bin_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("config-tethered-console-bin-dir"),false));});var config_config_tethered_gui_bin_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("config-tethered-gui-bin-dir"),false));});var config_man_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("man-dir"),false));});var config_links_file = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("links-file"),false));});var config_links_search_files = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("links-search-files"),false));});var config_pkgs_dir = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("pkgs-dir"),false));});var config_pkgs_search_dirs = M6.__rjs_quoted__.delay_by_sync(function() {return to_path(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("pkgs-search-dirs"),false));});var config_cgc_suffix = M6.__rjs_quoted__.delay_by_sync(function() {return M5.values(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("cgc-suffix"),false));});var config_3m_suffix = M6.__rjs_quoted__.delay_by_sync(function() {return M5.values(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("3m-suffix"),false));});var config_absolute_installation_p = M6.__rjs_quoted__.delay_by_sync(function() {return (function(x2545) {if (x2545) {var if_res1474 = true;} else {var if_res1474 = false;}return if_res1474;})(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("absolute-installation?"),false));});var config_doc_search_url = M6.__rjs_quoted__.delay_by_sync(function() {return M5.values(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("doc-search-url"),false));});var config_doc_open_url = M6.__rjs_quoted__.delay_by_sync(function() {return M5.values(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("doc-open-url"),false));});var config_installation_name = M6.__rjs_quoted__.delay_by_sync(function() {return M5.values(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("installation-name"),false));});var config_build_stamp = M6.__rjs_quoted__.delay_by_sync(function() {return M5.values(M5.hash_ref(M7.force(config_table),$rjs_core.Symbol.make("build-stamp"),false));});var get_absolute_installation_p = function() {return M7.force(config_absolute_installation_p);};var get_cgc_suffix = function() {return M7.force(config_cgc_suffix);};var get_3m_suffix = function() {return M7.force(config_3m_suffix);};var get_doc_search_url = function() {var or_part2546 = M7.force(config_doc_search_url);if (or_part2546) {var if_res1475 = or_part2546;} else {var if_res1475 = "http://docs.racket-lang.org/local-redirect/index.html";}return if_res1475;};var get_doc_open_url = function() {return M7.force(config_doc_open_url);};var get_installation_name = function() {var or_part2547 = M7.force(config_installation_name);if (or_part2547) {var if_res1476 = or_part2547;} else {var if_res1476 = M5.version();}return if_res1476;};var get_build_stamp = function() {return M7.force(config_build_stamp);};var find_collects_dir = function() {return M2.find_main_collects();};var get_main_collects_search_dirs = function() {return combine_search(M7.force(config_collects_search_dirs),M5.list(find_collects_dir()));};var user_collects_dir = M6.__rjs_quoted__.delay_by_sync(function() {return M5.simplify_path(M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),get_installation_name(),"collects"));});var find_user_collects_dir = function() {return M7.force(user_collects_dir);};var get_collects_search_dirs = function() {return M5.current_library_collection_paths();};var single = function(p2548) {if (p2548) {var if_res1477 = M5.list(p2548);} else {var if_res1477 = M5.rnull;}return if_res1477;};var extra = function(a2549, l2550) {if (a2549) {var if_res1478 = M5.not(M4.member(M5.path__gt_directory_path(a2549),M3.map(M5.path__gt_directory_path,l2550)));} else {var if_res1478 = false;}if (if_res1478) {var if_res1479 = M5.append(l2550,M5.list(a2549));} else {var if_res1479 = l2550;}return if_res1479;};var combine_search = function(l2551, default2552) {if (l2551) {var loop2553 = function(l2554) {if (M5.null_p(l2554)) {var if_res1481 = M5.rnull;} else {if (M5.not(M5.car(l2554))) {var if_res1480 = M5.append(default2552,loop2553(M5.cdr(l2554)));} else {var if_res1480 = M5.cons(M5.car(l2554),loop2553(M5.cdr(l2554)));}var if_res1481 = if_res1480;}return if_res1481;};var if_res1482 = loop2553(l2551);} else {var if_res1482 = default2552;}return if_res1482;};var cons_user = function(u2555, r2556) {if (u2555) {var if_res1483 = M5.use_user_specific_search_paths();} else {var if_res1483 = false;}if (if_res1483) {var if_res1484 = M5.cons(u2555,r2556);} else {var if_res1484 = r2556;}return if_res1484;};var get_false = function() {return false;};var chain_to = function(f2557) {return f2557;};var delayed__f = M6.__rjs_quoted__.delay_by_sync(function() {return false;});var find_doc_dir1 = function() {return M6.__rjs_quoted__.delay_by_sync(function() {var or_part2558 = M7.force(config_doc_dir);if (or_part2558) {var if_res1486 = or_part2558;} else {var p2559 = find_collects_dir();if (p2559) {var if_res1485 = M5.simplify_path(M5.build_path(p2559,$rjs_core.Symbol.make("up"),"doc"));} else {var if_res1485 = false;}var if_res1486 = if_res1485;}return if_res1486;});};var find_doc_dir = function() {return M7.force(find_doc_dir1());};var user_dir = M6.__rjs_quoted__.delay_by_sync(function() {return M5.simplify_path(M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),get_installation_name(),"doc"));});var find_user_doc_dir = function() {return M7.force(user_dir);};var get_new_doc_search_dirs = function() {return combine_search(M7.force(delayed__f),cons_user(find_user_doc_dir(),single(find_doc_dir())));};var get_doc_search_dirs = function() {return combine_search(M7.force(config_doc_search_dirs),M5.append(get_new_doc_search_dirs(),M3.map(function(p2560) {return M5.build_path(p2560,"doc");},M5.current_library_collection_paths())));};var find_include_dir2 = function() {return M6.__rjs_quoted__.delay_by_sync(function() {var or_part2561 = M7.force(config_include_dir);if (or_part2561) {var if_res1488 = or_part2561;} else {var p2562 = find_collects_dir();if (p2562) {var if_res1487 = M5.simplify_path(M5.build_path(p2562,$rjs_core.Symbol.make("up"),"include"));} else {var if_res1487 = false;}var if_res1488 = if_res1487;}return if_res1488;});};var find_include_dir = function() {return M7.force(find_include_dir2());};var user_dir = M6.__rjs_quoted__.delay_by_sync(function() {return M5.simplify_path(M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),get_installation_name(),"include"));});var find_user_include_dir = function() {return M7.force(user_dir);};var get_include_search_dirs = function() {return combine_search(M7.force(config_include_search_dirs),cons_user(find_user_include_dir(),single(find_include_dir())));};var find_lib_dir3 = function() {return M6.__rjs_quoted__.delay_by_sync(function() {var or_part2563 = M7.force(config_lib_dir);if (or_part2563) {var if_res1490 = or_part2563;} else {var p2564 = find_collects_dir();if (p2564) {var if_res1489 = M5.simplify_path(M5.build_path(p2564,$rjs_core.Symbol.make("up"),"lib"));} else {var if_res1489 = false;}var if_res1490 = if_res1489;}return if_res1490;});};var find_lib_dir = function() {return M7.force(find_lib_dir3());};var user_dir = M6.__rjs_quoted__.delay_by_sync(function() {return M5.simplify_path(M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),get_installation_name(),"lib"));});var find_user_lib_dir = function() {return M7.force(user_dir);};var get_lib_search_dirs = function() {return combine_search(M7.force(config_lib_search_dirs),cons_user(find_user_lib_dir(),single(find_lib_dir())));};var find_share_dir4 = function() {return M6.__rjs_quoted__.delay_by_sync(function() {var or_part2565 = M7.force(config_share_dir);if (or_part2565) {var if_res1492 = or_part2565;} else {var p2566 = find_collects_dir();if (p2566) {var if_res1491 = M5.simplify_path(M5.build_path(p2566,$rjs_core.Symbol.make("up"),"share"));} else {var if_res1491 = false;}var if_res1492 = if_res1491;}return if_res1492;});};var find_share_dir = function() {return M7.force(find_share_dir4());};var user_dir = M6.__rjs_quoted__.delay_by_sync(function() {return M5.simplify_path(M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),get_installation_name(),"share"));});var find_user_share_dir = function() {return M7.force(user_dir);};var find_apps_dir5 = function() {return M6.__rjs_quoted__.delay_by_sync(function() {var or_part2567 = M7.force(config_apps_dir);if (or_part2567) {var if_res1493 = or_part2567;} else {var if_res1493 = (function() {return M5.build_path(find_share_dir(),"applications");})();}return if_res1493;});};var find_apps_dir = function() {return M7.force(find_apps_dir5());};var user_dir = M6.__rjs_quoted__.delay_by_sync(function() {return M5.simplify_path(M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),get_installation_name(),M5.build_path("share","applications")));});var find_user_apps_dir = function() {return M7.force(user_dir);};var find_man_dir6 = function() {return M6.__rjs_quoted__.delay_by_sync(function() {var or_part2568 = M7.force(config_man_dir);if (or_part2568) {var if_res1495 = or_part2568;} else {var p2569 = find_collects_dir();if (p2569) {var if_res1494 = M5.simplify_path(M5.build_path(p2569,$rjs_core.Symbol.make("up"),"man"));} else {var if_res1494 = false;}var if_res1495 = if_res1494;}return if_res1495;});};var find_man_dir = function() {return M7.force(find_man_dir6());};var user_dir = M6.__rjs_quoted__.delay_by_sync(function() {return M5.simplify_path(M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),get_installation_name(),"man"));});var find_user_man_dir = function() {return M7.force(user_dir);};var find_links_file = function() {var or_part2570 = M7.force(config_links_file);if (or_part2570) {var if_res1496 = or_part2570;} else {var if_res1496 = M5.build_path(find_share_dir(),"links.rktd");}return if_res1496;};var get_links_search_files = function() {return combine_search(M7.force(config_links_search_files),M5.list(find_links_file()));};var find_user_links_file92571 = function(vers72572, vers82573) {if (vers82573) {var if_res1497 = vers72572;} else {var if_res1497 = get_installation_name();}var vers2574 = if_res1497;return M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),vers2574,"links.rktd");};var cl1498 = function() {return find_user_links_file92571(false,false);};var cl1499 = function(vers72575) {return find_user_links_file92571(vers72575,true);};var find_user_links_file = $rjs_core.attachProcedureArity(function() {var fixed_lam1500 = {'0':cl1498,'1':cl1499}[arguments.length];if (fixed_lam1500!==undefined) {return fixed_lam1500.apply(null,arguments);} else {return M5.error("case-lambda: invalid case");}},[0,1]);var find_pkgs_dir11 = function() {return M6.__rjs_quoted__.delay_by_sync(function() {var or_part2576 = M7.force(config_pkgs_dir);if (or_part2576) {var if_res1501 = or_part2576;} else {var if_res1501 = (function() {return M5.build_path(find_share_dir(),"pkgs");})();}return if_res1501;});};var find_pkgs_dir = function() {return M7.force(find_pkgs_dir11());};var get_pkgs_search_dirs = function() {return combine_search(M7.force(config_pkgs_search_dirs),cons_user(get_false(),single(find_pkgs_dir())));};var find_user_pkgs_dir142577 = function(vers122578, vers132579) {if (vers132579) {var if_res1502 = vers122578;} else {var if_res1502 = get_installation_name();}var vers2580 = if_res1502;return M5.build_path(M5.find_system_path($rjs_core.Symbol.make("addon-dir")),vers2580,"pkgs");};var cl1503 = function() {return find_user_pkgs_dir142577(false,false);};var cl1504 = function(vers122581) {return find_user_pkgs_dir142577(vers122581,true);};var find_user_pkgs_dir = $rjs_core.attachProcedureArity(function() {var fixed_lam1505 = {'0':cl1503,'1':cl1504}[arguments.length];if (fixed_lam1505!==undefined) {return fixed_lam1505.apply(null,arguments);} else {return M5.error("case-lambda: invalid case");}},[0,1]);var __rjs_quoted__ = {};__rjs_quoted__.single = single;__rjs_quoted__.get_installation_name = get_installation_name;__rjs_quoted__.cons_user = cons_user;__rjs_quoted__.combine_search = combine_search;__rjs_quoted__.config_table = config_table;__rjs_quoted__.find_collects_dir = find_collects_dir;__rjs_quoted__.extra = extra;__rjs_quoted__.get_false = get_false;export { __rjs_quoted__,find_config_dir,get_build_stamp,get_installation_name,get_doc_open_url,get_doc_search_url,get_3m_suffix,get_cgc_suffix,get_absolute_installation_p,get_collects_search_dirs,find_user_collects_dir,get_main_collects_search_dirs,find_collects_dir,get_doc_search_dirs,find_user_doc_dir,find_doc_dir,find_include_dir,find_user_include_dir,get_include_search_dirs,find_lib_dir,find_user_lib_dir,get_lib_search_dirs,find_share_dir,find_user_share_dir,find_apps_dir,find_user_apps_dir,find_man_dir,find_user_man_dir,config_config_tethered_gui_bin_dir,config_config_tethered_console_bin_dir,config_bin_dir,config_dll_dir,find_user_links_file,get_links_search_files,find_links_file,find_pkgs_dir,get_pkgs_search_dirs,find_user_pkgs_dir };