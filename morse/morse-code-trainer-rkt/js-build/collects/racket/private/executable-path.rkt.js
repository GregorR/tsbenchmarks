import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "./path.rkt.js";import * as M2 from "./path-list.rkt.js";var cl3518 = function(program5556, libpath5557, reverse_p5558) {if (M1.path_string_p(program5556)) {var if_res3522 = M0.rvoid();} else {var if_res3522 = M0.raise_argument_error($rjs_core.Symbol.make("find-executable-path"),"path-string?",program5556);}if_res3522;var or_part5559 = M0.not(libpath5557);if (or_part5559) {var if_res3524 = or_part5559;} else {if (M1.path_string_p(libpath5557)) {var if_res3523 = M0.__rjs_quoted__.relative_path_p(libpath5557);} else {var if_res3523 = false;}var if_res3524 = if_res3523;}if (if_res3524) {var if_res3525 = M0.rvoid();} else {var if_res3525 = M0.raise_argument_error($rjs_core.Symbol.make("find-executable-path"),"(or/c #f (and/c path-string? relative-path?))",libpath5557);}if_res3525;var found_exec5560 = function(exec_name5561) {if (libpath5557) {var let_result3526 = M0.__rjs_quoted__.split_path(exec_name5561);var base5562 = let_result3526.getAt(0);var name5563 = let_result3526.getAt(1);var isdir_p5564 = let_result3526.getAt(2);var next5565 = function() {var resolved5566 = M0.__rjs_quoted__.resolve_path(exec_name5561);if (M0.equal_p(resolved5566,exec_name5561)) {var if_res3528 = false;} else {if (M0.__rjs_quoted__.relative_path_p(resolved5566)) {var if_res3527 = found_exec5560(M0.__rjs_quoted__.build_path(base5562,resolved5566));} else {var if_res3527 = found_exec5560(resolved5566);}var if_res3528 = if_res3527;}return if_res3528;};if (reverse_p5558) {var if_res3529 = next5565();} else {var if_res3529 = false;}var or_part5567 = if_res3529;if (or_part5567) {var if_res3535 = or_part5567;} else {if (M0.__rjs_quoted__.path_p(base5562)) {var lib5569 = M0.__rjs_quoted__.build_path(base5562,libpath5557);var or_part5570 = M0.__rjs_quoted__.directory_exists_p(lib5569);if (or_part5570) {var if_res3530 = or_part5570;} else {var if_res3530 = M0.__rjs_quoted__.file_exists_p(lib5569);}if (if_res3530) {var if_res3531 = lib5569;} else {var if_res3531 = false;}var if_res3532 = if_res3531;} else {var if_res3532 = false;}var or_part5568 = if_res3532;if (or_part5568) {var if_res3534 = or_part5568;} else {if (M0.not(reverse_p5558)) {var if_res3533 = next5565();} else {var if_res3533 = false;}var if_res3534 = if_res3533;}var if_res3535 = if_res3534;}var if_res3536 = if_res3535;} else {var if_res3536 = exec_name5561;}return if_res3536;};if (M0.__rjs_quoted__.relative_path_p(program5556)) {var let_result3537 = M0.__rjs_quoted__.split_path(program5556);var base5571 = let_result3537.getAt(0);var name5572 = let_result3537.getAt(1);var dir_p5573 = let_result3537.getAt(2);var if_res3538 = M0.eq_p(base5571,$rjs_core.Symbol.make("relative"));} else {var if_res3538 = false;}if (if_res3538) {var paths_str5574 = M0.__rjs_quoted__.environment_variables_ref(M0.__rjs_quoted__.current_environment_variables(),new Uint8Array([80,65,84,72]));var win_add5575 = function(s5576) {if (M0.eq_p(M0.system_type(),$rjs_core.Symbol.make("windows"))) {var if_res3539 = M0.cons(M0.__rjs_quoted__.bytes__gt_path(new Uint8Array([46])),s5576);} else {var if_res3539 = s5576;}return if_res3539;};var loop5577 = function(paths5578) {if (M0.null_p(paths5578)) {var if_res3542 = false;} else {var base5579 = M0.__rjs_quoted__.path__gt_complete_path(M0.car(paths5578));var name5580 = M0.__rjs_quoted__.build_path(base5579,program5556);if (M0.__rjs_quoted__.file_exists_p(name5580)) {var if_res3541 = found_exec5560(name5580);} else {var if_res3541 = loop5577(M0.cdr(paths5578));}var if_res3542 = if_res3541;}return if_res3542;};if (paths_str5574) {var if_res3540 = M2.path_list_string__gt_path_list(M0.__rjs_quoted__.bytes__gt_string_by_locale(paths_str5574,"?"),M0.rnull);} else {var if_res3540 = M0.rnull;}var if_res3544 = loop5577(win_add5575(if_res3540));} else {var p5581 = M0.__rjs_quoted__.path__gt_complete_path(program5556);if (M0.__rjs_quoted__.file_exists_p(p5581)) {var if_res3543 = found_exec5560(p5581);} else {var if_res3543 = false;}var if_res3544 = if_res3543;}return if_res3544;};var cl3519 = function(program5582, libpath5583) {return find_executable_path(program5582,libpath5583,false);};var cl3520 = function(program5584) {return find_executable_path(program5584,false,false);};var find_executable_path = $rjs_core.attachProcedureArity(function() {var fixed_lam3521 = {'3':cl3518,'2':cl3519,'1':cl3520}[arguments.length];if (fixed_lam3521!==undefined) {return fixed_lam3521.apply(null,arguments);} else {return M0.error("case-lambda: invalid case");}},[1,2,3]);var __rjs_quoted__ = {};export { __rjs_quoted__,find_executable_path };