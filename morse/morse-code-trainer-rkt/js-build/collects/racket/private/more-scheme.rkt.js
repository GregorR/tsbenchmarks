import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/paramz.rkt.js";import * as M1 from "../../../runtime/kernel.rkt.js";var current_parameterization = function() {return M0.extend_parameterization(M1.continuation_mark_set_first(false,M0.parameterization_key));};var call_with_parameterization = function(paramz2380, thunk2381) {if (M1.__rjs_quoted__.parameterization_p(paramz2380)) {var if_res1287 = M1.rvoid();} else {var if_res1287 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),"parameterization?",0,paramz2380,thunk2381);}if_res1287;if (M1.procedure_p(thunk2381)) {var if_res1288 = M1.procedure_arity_includes_p(thunk2381,0);} else {var if_res1288 = false;}if (if_res1288) {var if_res1289 = M1.rvoid();} else {var if_res1289 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),"(-> any)",1,paramz2380,thunk2381);}if_res1289;var __context1290 = $rjs_core.Marks.getFrames();var __context1291;try {__context1291 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.parameterization_key,paramz2380);var __wcm_result1292 = thunk2381();} finally {$rjs_core.Marks.updateFrame(__context1290,__context1291);}return __wcm_result1292;};var let_result1294 = M1.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false);var struct_break_paramz = let_result1294.getAt(0);var make_break_paramz = let_result1294.getAt(1);var break_paramz_p = let_result1294.getAt(2);var break_paramz_ref = let_result1294.getAt(3);var break_paramz_set_bang_ = let_result1294.getAt(4);var inspector2382 = M1.current_inspector();if (inspector2382) {var if_res1295 = M1.not(M1.inspector_p(inspector2382));} else {var if_res1295 = false;}if (if_res1295) {var if_res1296 = M1.raise_argument_error($rjs_core.Symbol.make("define-struct"),"(or/c inspector? #f)",inspector2382);} else {var if_res1296 = M1.rvoid();}if_res1296;var let_result1297 = M1.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false,M1.rnull,inspector2382);var type2383 = let_result1297.getAt(0);var maker2384 = let_result1297.getAt(1);var pred2385 = let_result1297.getAt(2);var access2386 = let_result1297.getAt(3);var mutate2387 = let_result1297.getAt(4);var let_result1298 = M1.values(type2383,maker2384,pred2385,M1.make_struct_field_accessor(access2386,0,$rjs_core.Symbol.make("cell")),M1.make_struct_field_mutator(mutate2387,0,$rjs_core.Symbol.make("cell")));var struct_break_parameterization = let_result1298.getAt(0);var make_break_parameterization = let_result1298.getAt(1);var break_parameterization_p = let_result1298.getAt(2);var break_parameterization_cell = let_result1298.getAt(3);var set_break_parameterization_cell_bang_ = let_result1298.getAt(4);var current_break_parameterization = function() {return make_break_paramz(M1.continuation_mark_set_first(false,M0.__rjs_quoted__.break_enabled_key));};var call_with_break_parameterization = function(paramz2388, thunk2389) {if (break_paramz_p(paramz2388)) {var if_res1299 = M1.rvoid();} else {var if_res1299 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-break-parameterization"),"break-parameterization?",0,paramz2388,thunk2389);}if_res1299;if (M1.procedure_p(thunk2389)) {var if_res1300 = M1.procedure_arity_includes_p(thunk2389,0);} else {var if_res1300 = false;}if (if_res1300) {var if_res1301 = M1.rvoid();} else {var if_res1301 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),"(-> any)",1,paramz2388,thunk2389);}if_res1301;var __context1303 = $rjs_core.Marks.getFrames();var __context1304;try {__context1304 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.__rjs_quoted__.break_enabled_key,break_paramz_ref(paramz2388,0));M0.check_for_break();var __wcm_result1305 = thunk2389();} finally {$rjs_core.Marks.updateFrame(__context1303,__context1304);}var begin_res1302 = __wcm_result1305;M0.check_for_break();return begin_res1302;};var select_handler_by_no_breaks = function(e2390, bpz2391, l2392) {var __context1314 = $rjs_core.Marks.getFrames();var __context1315;try {__context1315 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.__rjs_quoted__.break_enabled_key,M1.make_thread_cell(false));var loop2393 = function(l2394) {if (M1.null_p(l2394)) {var if_res1313 = M1.raise(e2390);} else {if (M1.caar(l2394)(e2390)) {var begin_res1307 = M1.cdar(l2394)(e2390);var __context1308 = $rjs_core.Marks.getFrames();var __context1309;try {__context1309 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.__rjs_quoted__.break_enabled_key,bpz2391);var __wcm_result1310 = M0.check_for_break();} finally {$rjs_core.Marks.updateFrame(__context1308,__context1309);}__wcm_result1310;var if_res1312 = begin_res1307;} else {var if_res1312 = loop2393(M1.cdr(l2394));}var if_res1313 = if_res1312;}return if_res1313;};var __wcm_result1316 = loop2393(l2392);} finally {$rjs_core.Marks.updateFrame(__context1314,__context1315);}return __wcm_result1316;};var select_handler_by_breaks_as_is = function(e2395, bpz2396, l2397) {if (M1.null_p(l2397)) {var if_res1323 = M1.raise(e2395);} else {if (M1.caar(l2397)(e2395)) {var __context1318 = $rjs_core.Marks.getFrames();var __context1319;try {__context1319 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.__rjs_quoted__.break_enabled_key,bpz2396);M0.check_for_break();var __wcm_result1320 = M1.cdar(l2397)(e2395);} finally {$rjs_core.Marks.updateFrame(__context1318,__context1319);}var if_res1322 = __wcm_result1320;} else {var if_res1322 = select_handler_by_breaks_as_is(e2395,bpz2396,M1.cdr(l2397));}var if_res1323 = if_res1322;}return if_res1323;};var false_thread_cell = M1.make_thread_cell(false);var check_with_handlers_in_context = function(handler_prompt_key2398) {if (M1.__rjs_quoted__.continuation_prompt_available_p(handler_prompt_key2398)) {var if_res1324 = M1.rvoid();} else {var if_res1324 = M1.error($rjs_core.Symbol.make("with-handlers"),"exception handler used out of context");}return if_res1324;};var handler_prompt_key = M1.make_continuation_prompt_tag();var call_handled_body = function(bpz2399, handle_proc2400, body_thunk2401) {var __context1333 = $rjs_core.Marks.getFrames();var __context1334;try {__context1334 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.__rjs_quoted__.break_enabled_key,false_thread_cell);var __wcm_result1335 = M1.call_with_continuation_prompt(function(bpz2402, body_thunk2403) {var __context1329 = $rjs_core.Marks.getFrames();var __context1330;try {__context1330 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.__rjs_quoted__.break_enabled_key,bpz2402);var __context1325 = $rjs_core.Marks.getFrames();var __context1326;try {__context1326 = __context1325;$rjs_core.Marks.setMark(M0.exception_handler_key,function(e2404) {return M1.abort_current_continuation(handler_prompt_key,e2404);});var __wcm_result1327 = body_thunk2403();} finally {$rjs_core.Marks.updateFrame(__context1325,__context1326);}var __wcm_result1331 = __wcm_result1327;} finally {$rjs_core.Marks.updateFrame(__context1329,__context1330);}return __wcm_result1331;},handler_prompt_key,handle_proc2400,bpz2399,body_thunk2401);} finally {$rjs_core.Marks.updateFrame(__context1333,__context1334);}return __wcm_result1335;};var call_with_exception_handler = function(exnh2405, thunk2406) {var __context1338 = $rjs_core.Marks.getFrames();var __context1339;try {__context1339 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.exception_handler_key,exnh2405);var __wcm_result1340 = thunk2406();} finally {$rjs_core.Marks.updateFrame(__context1338,__context1339);}var begin_res1337 = __wcm_result1340;M1.rvoid();return begin_res1337;};var call_by_cc = M1.__rjs_quoted__.call_with_current_continuation;var not_there2407 = M1.gensym();var up2408 = function(who2409, mut_p2410, set2411, ht2412, key2413, xform2414, default2415) {if (M1.__rjs_quoted__.hash_p(ht2412)) {if (mut_p2410) {var if_res1342 = M1.not(M1.__rjs_quoted__.immutable_p(ht2412));} else {var if_res1342 = M1.__rjs_quoted__.immutable_p(ht2412);}var if_res1343 = if_res1342;} else {var if_res1343 = false;}if (if_res1343) {var if_res1345 = M1.rvoid();} else {if (mut_p2410) {var if_res1344 = "(and/c hash? (not/c immutable?))";} else {var if_res1344 = "(and/c hash? immutable?)";}var if_res1345 = M1.raise_argument_error(who2409,if_res1344,ht2412);}if_res1345;if (M1.procedure_p(xform2414)) {var if_res1346 = M1.procedure_arity_includes_p(xform2414,1);} else {var if_res1346 = false;}if (if_res1346) {var if_res1347 = M1.rvoid();} else {var if_res1347 = M1.raise_argument_error(who2409,"(any/c . -> . any/c)",xform2414);}if_res1347;var v2416 = M1.hash_ref(ht2412,key2413,default2415);if (M1.eq_p(v2416,not_there2407)) {var if_res1348 = M1.__rjs_quoted__.raise_mismatch_error(who2409,"no value found for key: ",key2413);} else {var if_res1348 = set2411(ht2412,key2413,xform2414(v2416));}return if_res1348;};var cl1349 = function(ht2421, key2422, xform2423, default2424) {return up2408($rjs_core.Symbol.make("hash-update"),false,M1.hash_set,ht2421,key2422,xform2423,default2424);};var cl1350 = function(ht2425, key2426, xform2427) {return hash_update(ht2425,key2426,xform2427,not_there2407);};var hash_update2417 = $rjs_core.attachProcedureArity(function() {var fixed_lam1351 = {'4':cl1349,'3':cl1350}[arguments.length];if (fixed_lam1351!==undefined) {return fixed_lam1351.apply(null,arguments);} else {return M1.error("case-lambda: invalid case");}},[3,4]);var cl1352 = function(ht2428, key2429, xform2430, default2431) {return up2408($rjs_core.Symbol.make("hash-update!"),true,M1.hash_set_bang_,ht2428,key2429,xform2430,default2431);};var cl1353 = function(ht2432, key2433, xform2434) {return hash_update_bang_(ht2432,key2433,xform2434,not_there2407);};var hash_update_bang_2418 = $rjs_core.attachProcedureArity(function() {var fixed_lam1354 = {'4':cl1352,'3':cl1353}[arguments.length];if (fixed_lam1354!==undefined) {return fixed_lam1354.apply(null,arguments);} else {return M1.error("case-lambda: invalid case");}},[3,4]);var hash_has_key_p2419 = function(ht2435, key2436) {if (M1.__rjs_quoted__.hash_p(ht2435)) {var if_res1355 = M1.rvoid();} else {var if_res1355 = M1.raise_argument_error($rjs_core.Symbol.make("hash-has-key?"),"hash?",0,ht2435,key2436);}if_res1355;return M1.not(M1.eq_p(not_there2407,M1.hash_ref(ht2435,key2436,not_there2407)));};var hash_ref_bang_2420 = function(ht2437, key2438, new2439) {if (M1.__rjs_quoted__.hash_p(ht2437)) {var if_res1356 = M1.not(M1.__rjs_quoted__.immutable_p(ht2437));} else {var if_res1356 = false;}if (if_res1356) {var if_res1357 = M1.rvoid();} else {var if_res1357 = M1.raise_argument_error($rjs_core.Symbol.make("hash-ref!"),"(and/c hash? (not/c immutable?))",0,ht2437,key2438,new2439);}if_res1357;var v2440 = M1.hash_ref(ht2437,key2438,not_there2407);if (M1.eq_p(not_there2407,v2440)) {if (M1.procedure_p(new2439)) {var if_res1358 = new2439();} else {var if_res1358 = new2439;}var n2441 = if_res1358;M1.hash_set_bang_(ht2437,key2438,n2441);var if_res1359 = n2441;} else {var if_res1359 = v2440;}return if_res1359;};var let_result1360 = M1.values(hash_update2417,hash_update_bang_2418,hash_has_key_p2419,hash_ref_bang_2420);var hash_update = let_result1360.getAt(0);var hash_update_bang_ = let_result1360.getAt(1);var hash_has_key_p = let_result1360.getAt(2);var hash_ref_bang_ = let_result1360.getAt(3);var __rjs_quoted__ = {};__rjs_quoted__.select_handler_by_breaks_as_is = select_handler_by_breaks_as_is;__rjs_quoted__.call_by_cc = call_by_cc;__rjs_quoted__.select_handler_by_no_breaks = select_handler_by_no_breaks;__rjs_quoted__.call_handled_body = call_handled_body;export { __rjs_quoted__,hash_update_bang_,hash_update,hash_has_key_p,hash_ref_bang_,call_by_cc,call_with_exception_handler,break_paramz_p as break_parameterization_p,call_with_break_parameterization,current_break_parameterization,call_with_parameterization,current_parameterization };