import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";var path_string_p = function(s2335) {var or_part2336 = M0.__rjs_quoted__.path_p(s2335);if (or_part2336) {var if_res1238 = or_part2336;} else {if (M0.string_p(s2335)) {var or_part2337 = M0.__rjs_quoted__.relative_path_p(s2335);if (or_part2337) {var if_res1236 = or_part2337;} else {var if_res1236 = M0.__rjs_quoted__.absolute_path_p(s2335);}var if_res1237 = if_res1236;} else {var if_res1237 = false;}var if_res1238 = if_res1237;}return if_res1238;};var bsbs = M0.string("\\","\\");var normal_case_path = function(s2338) {var or_part2339 = M0.__rjs_quoted__.path_for_some_system_p(s2338);if (or_part2339) {var if_res1239 = or_part2339;} else {var if_res1239 = path_string_p(s2338);}if (if_res1239) {var if_res1240 = M0.rvoid();} else {var if_res1240 = M0.raise_argument_error($rjs_core.Symbol.make("normal-path-case"),"(or/c path-for-some-system? path-string?)",s2338);}if_res1240;if (M0.__rjs_quoted__.path_for_some_system_p(s2338)) {var if_res1241 = M0.eq_p(M0.__rjs_quoted__.path_convention_type(s2338),$rjs_core.Symbol.make("windows"));} else {var if_res1241 = M0.eq_p(M0.system_type(),$rjs_core.Symbol.make("windows"));}if (if_res1241) {if (M0.string_p(s2338)) {var if_res1242 = s2338;} else {var if_res1242 = M0.__rjs_quoted__.bytes__gt_string_by_locale(M0.__rjs_quoted__.path__gt_bytes(s2338));}var str2340 = if_res1242;if (M0.__rjs_quoted__.regexp_match_p("/^[\\][\\][?][\\]/",str2340)) {if (M0.string_p(s2338)) {var if_res1243 = M0.__rjs_quoted__.string__gt_path(s2338);} else {var if_res1243 = s2338;}var if_res1245 = if_res1243;} else {var s2341 = M0.__rjs_quoted__.string_locale_downcase(str2340);if (M0.__rjs_quoted__.regexp_match_p("/[\\/\\][. ]+[\\/\\]*$/",s2341)) {var if_res1244 = s2341;} else {var if_res1244 = M0.__rjs_quoted__.regexp_replace_times_("/[ .]+([\\/\\]*)$/",s2341,"\\1");}var if_res1245 = M0.__rjs_quoted__.bytes__gt_path(M0.__rjs_quoted__.string__gt_bytes_by_locale(M0.__rjs_quoted__.regexp_replace_times_("/\\//",if_res1244,bsbs)),$rjs_core.Symbol.make("windows"));}var if_res1247 = if_res1245;} else {if (M0.string_p(s2338)) {var if_res1246 = M0.__rjs_quoted__.string__gt_path(s2338);} else {var if_res1246 = s2338;}var if_res1247 = if_res1246;}return if_res1247;};var check_extension_call = function(s2342, sfx2343, who2344) {var or_part2345 = M0.__rjs_quoted__.path_for_some_system_p(s2342);if (or_part2345) {var if_res1248 = or_part2345;} else {var if_res1248 = path_string_p(s2342);}if (if_res1248) {var if_res1249 = M0.rvoid();} else {var if_res1249 = M0.raise_argument_error(who2344,"(or/c path-for-some-system? path-string?)",0,s2342,sfx2343);}if_res1249;var or_part2346 = M0.string_p(sfx2343);if (or_part2346) {var if_res1250 = or_part2346;} else {var if_res1250 = M0.bytes_p(sfx2343);}if (if_res1250) {var if_res1251 = M0.rvoid();} else {var if_res1251 = M0.raise_argument_error(who2344,"(or/c string? bytes?)",1,s2342,sfx2343);}if_res1251;var let_result1252 = M0.__rjs_quoted__.split_path(s2342);var base2347 = let_result1252.getAt(0);var name2348 = let_result1252.getAt(1);var dir_p2349 = let_result1252.getAt(2);if (M0.not(base2347)) {var if_res1253 = M0.__rjs_quoted__.raise_mismatch_error(who2344,"cannot add an extension to a root path: ",s2342);} else {var if_res1253 = M0.rvoid();}if_res1253;return M0.values(base2347,name2348);};var path_adjust_extension = function(name2350, sep2351, rest_bytes2352, s2353, sfx2354) {var let_result1254 = check_extension_call(s2353,sfx2354,name2350);var base2355 = let_result1254.getAt(0);var name2356 = let_result1254.getAt(1);var bs2357 = M0.__rjs_quoted__.path_element__gt_bytes(name2356);var finish2358 = function(i2359, sep2360, i22361) {var temp1258 = M0.__rjs_quoted__.subbytes(bs2357,0,i2359);var temp1257 = rest_bytes2352(bs2357,i22361);if (M0.string_p(sfx2354)) {var if_res1256 = M0.__rjs_quoted__.string__gt_bytes_by_locale(sfx2354,M0.__rjs_quoted__.char__gt_integer("?"));} else {var if_res1256 = sfx2354;}var temp1259 = M0.__rjs_quoted__.bytes_append(temp1258,sep2360,temp1257,if_res1256);if (M0.__rjs_quoted__.path_for_some_system_p(s2353)) {var if_res1255 = M0.__rjs_quoted__.path_convention_type(s2353);} else {var if_res1255 = M0.__rjs_quoted__.system_path_convention_type();}return M0.__rjs_quoted__.bytes__gt_path_element(temp1259,if_res1255);};var loop2363 = function(i2364) {if (M0.zero_p(i2364)) {var if_res1262 = finish2358(M0.__rjs_quoted__.bytes_length(bs2357),new Uint8Array([]),M0.__rjs_quoted__.bytes_length(bs2357));} else {var i2365 = M0.sub1(i2364);if (M0.not(M0.zero_p(i2365))) {var if_res1260 = M0.eq_p(M0.__rjs_quoted__.char__gt_integer("."),M0.__rjs_quoted__.bytes_ref(bs2357,i2365));} else {var if_res1260 = false;}if (if_res1260) {var if_res1261 = finish2358(i2365,sep2351,M0.add1(i2365));} else {var if_res1261 = loop2363(i2365);}var if_res1262 = if_res1261;}return if_res1262;};var new_name2362 = loop2363(M0.__rjs_quoted__.bytes_length(bs2357));if (M0.__rjs_quoted__.path_for_some_system_p(base2355)) {var if_res1263 = M0.__rjs_quoted__.build_path(base2355,new_name2362);} else {var if_res1263 = new_name2362;}return if_res1263;};var path_replace_extension = function(s2366, sfx2367) {return path_adjust_extension($rjs_core.Symbol.make("path-replace-extension"),new Uint8Array([]),function(bs2368, i2369) {return new Uint8Array([]);},s2366,sfx2367);};var path_add_extension = function(s2370, sfx2371) {return path_adjust_extension($rjs_core.Symbol.make("path-add-extension"),new Uint8Array([95]),M0.__rjs_quoted__.subbytes,s2370,sfx2371);};var reroot_path = function(p2372, root2373) {var or_part2374 = path_string_p(p2372);if (or_part2374) {var if_res1264 = or_part2374;} else {var if_res1264 = M0.__rjs_quoted__.path_for_some_system_p(p2372);}if (if_res1264) {var if_res1265 = M0.rvoid();} else {var if_res1265 = M0.raise_argument_error($rjs_core.Symbol.make("reroot-path"),"(or/c path-string? path-for-some-system?)",0,p2372,root2373);}if_res1265;var let_result1266 = M0.values();var or_part2375 = path_string_p(root2373);if (or_part2375) {var if_res1267 = or_part2375;} else {var if_res1267 = M0.__rjs_quoted__.path_for_some_system_p(root2373);}if (if_res1267) {var if_res1268 = M0.rvoid();} else {var if_res1268 = M0.raise_argument_error($rjs_core.Symbol.make("reroot-path"),"(or/c path-string? path-for-some-system?)",1,p2372,root2373);}if_res1268;var let_result1269 = M0.values();if (M0.__rjs_quoted__.path_for_some_system_p(p2372)) {var if_res1270 = M0.__rjs_quoted__.path_convention_type(p2372);} else {var if_res1270 = M0.__rjs_quoted__.system_path_convention_type();}var conv2376 = if_res1270;var or_part2377 = M0.__rjs_quoted__.complete_path_p(p2372);if (or_part2377) {var if_res1271 = or_part2377;} else {var if_res1271 = M0.eq_p(M0.__rjs_quoted__.system_path_convention_type(),conv2376);}if (if_res1271) {var if_res1272 = M0.rvoid();} else {var if_res1272 = M0.__rjs_quoted__.raise_arguments_error($rjs_core.Symbol.make("reroot-path"),"path is not complete and not the platform's convention","path",p2372,"platform convention type",M0.__rjs_quoted__.system_path_convention_type());}if_res1272;var let_result1273 = M0.values();if (M0.__rjs_quoted__.path_for_some_system_p(root2373)) {var if_res1274 = M0.__rjs_quoted__.path_convention_type(root2373);} else {var if_res1274 = M0.__rjs_quoted__.system_path_convention_type();}if (M0.eq_p(if_res1274,conv2376)) {var if_res1275 = M0.rvoid();} else {var if_res1275 = M0.__rjs_quoted__.raise_arguments_error($rjs_core.Symbol.make("reroot-path"),"given paths use different conventions","path",p2372,"root path",root2373);}if_res1275;var let_result1276 = M0.values();if (M0.__rjs_quoted__.complete_path_p(p2372)) {var if_res1277 = p2372;} else {var if_res1277 = M0.__rjs_quoted__.path__gt_complete_path(p2372);}var c_p2378 = normal_case_path(M0.__rjs_quoted__.cleanse_path(if_res1277));var bstr2379 = M0.__rjs_quoted__.path__gt_bytes(c_p2378);if (M0.eq_p(conv2376,$rjs_core.Symbol.make("unix"))) {if (M0.__rjs_quoted__.bytes_eq__p(bstr2379,new Uint8Array([47]))) {if (M0.__rjs_quoted__.path_for_some_system_p(root2373)) {var if_res1278 = root2373;} else {var if_res1278 = M0.__rjs_quoted__.string__gt_path(root2373);}var if_res1279 = if_res1278;} else {var if_res1279 = M0.__rjs_quoted__.build_path(root2373,M0.__rjs_quoted__.bytes__gt_path(M0.__rjs_quoted__.subbytes(M0.__rjs_quoted__.path__gt_bytes(c_p2378),1),conv2376));}var if_res1286 = if_res1279;} else {if (M0.eq_p(conv2376,$rjs_core.Symbol.make("windows"))) {if (M0.__rjs_quoted__.regexp_match_p("/^\\\\\\\\[?]\\\\[a-z]:/",bstr2379)) {var if_res1284 = M0.__rjs_quoted__.bytes_append(new Uint8Array([92,92,63,92,82,69,76,92]),M0.__rjs_quoted__.subbytes(bstr2379,4,5),new Uint8Array([92]),M0.__rjs_quoted__.subbytes(bstr2379,6));} else {if (M0.__rjs_quoted__.regexp_match_p("/^\\\\\\\\[?]\\\\UNC\\\\/",bstr2379)) {var if_res1283 = M0.__rjs_quoted__.bytes_append(new Uint8Array([92,92,63,92,82,69,76,92]),M0.__rjs_quoted__.subbytes(bstr2379,4));} else {if (M0.__rjs_quoted__.regexp_match_p("/^\\\\\\\\[?]\\\\UNC\\\\/",bstr2379)) {var if_res1282 = M0.__rjs_quoted__.bytes_append(new Uint8Array([92,92,63,92,82,69,76,92]),M0.__rjs_quoted__.subbytes(bstr2379,4));} else {if (M0.__rjs_quoted__.regexp_match_p("/^\\\\\\\\/",bstr2379)) {var if_res1281 = M0.__rjs_quoted__.bytes_append(new Uint8Array([85,78,67,92]),M0.__rjs_quoted__.subbytes(bstr2379,2));} else {if (M0.__rjs_quoted__.regexp_match_p("/^[a-z]:/",bstr2379)) {var if_res1280 = M0.__rjs_quoted__.bytes_append(M0.__rjs_quoted__.subbytes(bstr2379,0,1),M0.__rjs_quoted__.subbytes(bstr2379,2));} else {var if_res1280 = M0.rvoid();}var if_res1281 = if_res1280;}var if_res1282 = if_res1281;}var if_res1283 = if_res1282;}var if_res1284 = if_res1283;}var if_res1285 = M0.__rjs_quoted__.build_path(root2373,M0.__rjs_quoted__.bytes__gt_path(if_res1284,conv2376));} else {var if_res1285 = M0.rvoid();}var if_res1286 = if_res1285;}return if_res1286;};var __rjs_quoted__ = {};export { __rjs_quoted__,reroot_path,path_add_extension,path_replace_extension,normal_case_path,path_string_p };