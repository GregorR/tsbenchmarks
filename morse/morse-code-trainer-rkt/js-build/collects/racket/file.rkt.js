import * as $rjs_core from '../../runtime/core.js';import * as M0 from "./private/kw.rkt.js";import * as M1 from "./private/kw-file.rkt.js";import * as M2 from "../../runtime/paramz.rkt.js";import * as M3 from "./private/list.rkt.js";import * as M4 from "../setup/private/dirs.rkt.js";import * as M5 from "../setup/cross-system.rkt.js";import * as M6 from "./private/map.rkt.js";import * as M7 from "./private/member.rkt.js";import * as M8 from "../../runtime/kernel.rkt.js";import * as M9 from "./private/more-scheme.rkt.js";import * as M10 from "./private/path.rkt.js";import * as M11 from "./private/reverse.rkt.js";import * as M12 from "./private/kernstruct.rkt.js";import * as M13 from "./private/pre-base.rkt.js";import * as M14 from "./private/define-et-al.rkt.js";import * as M15 from "./path.rkt.js";import * as M16 from "./private/for.rkt.js";import * as M17 from "./private/portlines.rkt.js";var delete_directory_by_files4 = function(must_exist_p1909, must_exist_p2910, path3911) {var path912 = path3911;if (must_exist_p2910) {var if_res470 = must_exist_p1909;} else {var if_res470 = true;}var must_exist_p913 = if_res470;if (M10.path_string_p(path912)) {var if_res471 = M8.rvoid();} else {var if_res471 = M8.raise_argument_error($rjs_core.Symbol.make("delete-directory/files"),"path-string?",path912);}if_res471;var loop914 = function(path915) {var or_part916 = M8.link_exists_p(path915);if (or_part916) {var if_res472 = or_part916;} else {var if_res472 = M8.file_exists_p(path915);}if (if_res472) {var if_res475 = M8.delete_file(path915);} else {if (M8.directory_exists_p(path915)) {M6.for_each(function(e917) {return loop914(M8.build_path(path915,e917));},M1._directory_list(path915));var if_res474 = M8.delete_directory(path915);} else {if (must_exist_p913) {var if_res473 = raise_not_a_file_or_directory($rjs_core.Symbol.make("delete-directory/files"),path915);} else {var if_res473 = M8.rvoid();}var if_res474 = if_res473;}var if_res475 = if_res474;}return if_res475;};return loop914(path912);};var unpack5 = function(given_kws918, given_args919, path3920) {var must_exist_p2921 = M8.pair_p(given_kws918);if (must_exist_p2921) {var if_res476 = M8.car(given_args919);} else {var if_res476 = M8.rvoid();}var must_exist_p1922 = if_res476;return delete_directory_by_files4(must_exist_p1922,must_exist_p2921,path3920);};var cl479 = function(given_kws927, given_args928, path929) {return unpack5(given_kws927,given_args928,path929);};var temp481 = $rjs_core.attachProcedureArity(function() {var fixed_lam480 = {'3':cl479}[arguments.length];if (fixed_lam480!==undefined) {return fixed_lam480.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3]);var cl477 = function(path931) {return unpack5(M8.rnull,M8.rnull,path931);};var delete_directory_by_files930 = $rjs_core.attachProcedureArity(function() {var fixed_lam478 = {'1':cl477}[arguments.length];if (fixed_lam478!==undefined) {return fixed_lam478.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1]);var delete_directory_by_files6 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws923, given_argc924) {if (M8._eq_(given_argc924,3)) {var l1925 = given_kws923;if (M8.null_p(l1925)) {var if_res483 = l1925;} else {if (M8.eq_p(M8.car(l1925),$rjs_core.Keyword.make('#:must-exist?'))) {var if_res482 = M8.cdr(l1925);} else {var if_res482 = l1925;}var if_res483 = if_res482;}var l1926 = if_res483;var if_res484 = M8.null_p(l1926);} else {var if_res484 = false;}return if_res484;},temp481,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:must-exist?')),delete_directory_by_files930);var raise_not_a_file_or_directory = function(who932, path933) {return M8.raise(M12.make_exn_fail_filesystem(M8.format("~a: encountered path that is neither file nor directory\n  path: ~a",who932,path933),M8.current_continuation_marks()));};var copy_directory_by_files13 = function(keep_modify_seconds_p7934, keep_modify_seconds_p9935, preserve_links_p8936, preserve_links_p10937, src11938, dest12939) {var src940 = src11938;var dest941 = dest12939;if (keep_modify_seconds_p9935) {var if_res485 = keep_modify_seconds_p7934;} else {var if_res485 = false;}var keep_modify_seconds_p942 = if_res485;if (preserve_links_p10937) {var if_res486 = preserve_links_p8936;} else {var if_res486 = false;}var preserve_links_p943 = if_res486;var loop944 = function(src945, dest946) {if (preserve_links_p943) {var if_res487 = M8.link_exists_p(src945);} else {var if_res487 = false;}if (if_res487) {var if_res491 = M8.make_file_or_directory_link(M8.resolve_path(src945),dest946);} else {if (M8.file_exists_p(src945)) {M8.copy_file(src945,dest946);if (keep_modify_seconds_p942) {var if_res488 = M8.file_or_directory_modify_seconds(dest946,M8.file_or_directory_modify_seconds(src945));} else {var if_res488 = M8.rvoid();}var if_res490 = if_res488;} else {if (M8.directory_exists_p(src945)) {M8.make_directory(dest946);var if_res489 = M6.for_each(function(e947) {return loop944(M8.build_path(src945,e947),M8.build_path(dest946,e947));},M1._directory_list(src945));} else {var if_res489 = raise_not_a_file_or_directory($rjs_core.Symbol.make("copy-directory/files"),src945);}var if_res490 = if_res489;}var if_res491 = if_res490;}return if_res491;};return loop944(src940,dest941);};var unpack14 = function(given_kws948, given_args949, src11950, dest12951) {if (M8.pair_p(given_kws948)) {var if_res492 = M8.eq_p($rjs_core.Keyword.make('#:keep-modify-seconds?'),M8.car(given_kws948));} else {var if_res492 = false;}var keep_modify_seconds_p9952 = if_res492;if (keep_modify_seconds_p9952) {var if_res493 = M8.car(given_args949);} else {var if_res493 = M8.rvoid();}var keep_modify_seconds_p7953 = if_res493;if (keep_modify_seconds_p9952) {var if_res494 = M8.cdr(given_kws948);} else {var if_res494 = given_kws948;}var given_kws954 = if_res494;if (keep_modify_seconds_p9952) {var if_res495 = M8.cdr(given_args949);} else {var if_res495 = given_args949;}var given_args955 = if_res495;var preserve_links_p10956 = M8.pair_p(given_kws954);if (preserve_links_p10956) {var if_res496 = M8.car(given_args955);} else {var if_res496 = M8.rvoid();}var preserve_links_p8957 = if_res496;return copy_directory_by_files13(keep_modify_seconds_p7953,keep_modify_seconds_p9952,preserve_links_p8957,preserve_links_p10956,src11950,dest12951);};var cl499 = function(given_kws964, given_args965, src966, dest967) {return unpack14(given_kws964,given_args965,src966,dest967);};var temp501 = $rjs_core.attachProcedureArity(function() {var fixed_lam500 = {'4':cl499}[arguments.length];if (fixed_lam500!==undefined) {return fixed_lam500.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4]);var cl497 = function(src969, dest970) {return unpack14(M8.rnull,M8.rnull,src969,dest970);};var copy_directory_by_files968 = $rjs_core.attachProcedureArity(function() {var fixed_lam498 = {'2':cl497}[arguments.length];if (fixed_lam498!==undefined) {return fixed_lam498.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2]);var copy_directory_by_files15 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws958, given_argc959) {if (M8._eq_(given_argc959,4)) {var l1960 = given_kws958;if (M8.null_p(l1960)) {var if_res503 = l1960;} else {if (M8.eq_p(M8.car(l1960),$rjs_core.Keyword.make('#:keep-modify-seconds?'))) {var if_res502 = M8.cdr(l1960);} else {var if_res502 = l1960;}var if_res503 = if_res502;}var l1961 = if_res503;var l1962 = l1961;if (M8.null_p(l1962)) {var if_res505 = l1962;} else {if (M8.eq_p(M8.car(l1962),$rjs_core.Keyword.make('#:preserve-links?'))) {var if_res504 = M8.cdr(l1962);} else {var if_res504 = l1962;}var if_res505 = if_res504;}var l1963 = if_res505;var if_res506 = M8.null_p(l1963);} else {var if_res506 = false;}return if_res506;},temp501,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:keep-modify-seconds?'), $rjs_core.Keyword.make('#:preserve-links?')),copy_directory_by_files968);var make_directory_times_ = function(dir971) {if (M10.path_string_p(dir971)) {var if_res507 = M8.rvoid();} else {var if_res507 = M8.raise_argument_error($rjs_core.Symbol.make("make-directory*"),"path-string?",dir971);}if_res507;var let_result508 = M8.split_path(dir971);var base972 = let_result508.getAt(0);var name973 = let_result508.getAt(1);var dir_p974 = let_result508.getAt(2);if (M8.path_p(base972)) {var if_res509 = M8.not(M8.directory_exists_p(base972));} else {var if_res509 = false;}if (if_res509) {var if_res510 = make_directory_times_(base972);} else {var if_res510 = M8.rvoid();}if_res510;if (M8.directory_exists_p(dir971)) {var if_res511 = M8.rvoid();} else {var with_handlers_predicate181975 = M8.exn_fail_filesystem_exists_p;var with_handlers_handler182976 = M8.rvoid;var bpz977 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);var if_res511 = M9.__rjs_quoted__.call_handled_body(bpz977,function(e978) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e978,bpz977,M8.list(M8.cons(with_handlers_predicate181975,with_handlers_handler182976)));},function() {return M8.make_directory(dir971);});}return if_res511;};var make_parent_directory_times_ = function(p979) {if (M10.path_string_p(p979)) {var if_res512 = M8.rvoid();} else {var if_res512 = M8.raise_argument_error($rjs_core.Symbol.make("make-parent-directory*"),"path-string?",p979);}if_res512;var let_result513 = M8.values();var let_result514 = M8.split_path(p979);var base980 = let_result514.getAt(0);var name981 = let_result514.getAt(1);var dir_p982 = let_result514.getAt(2);if (M8.path_p(base980)) {var if_res515 = make_directory_times_(base980);} else {var if_res515 = M8.rvoid();}return if_res515;};var make_temporary_file189984 = function(template183985, copy_from184986, base_dir185987, template186988, copy_from187989, base_dir188990) {if (template186988) {var if_res516 = template183985;} else {var if_res516 = "rkttmp~a";}var template991 = if_res516;if (copy_from187989) {var if_res517 = copy_from184986;} else {var if_res517 = false;}var copy_from992 = if_res517;if (base_dir188990) {var if_res518 = base_dir185987;} else {var if_res518 = false;}var base_dir993 = if_res518;var with_handlers_predicate191994 = M8.exn_fail_contract_p;var with_handlers_handler192995 = function(x996) {return M8.raise_arguments_error($rjs_core.Symbol.make("make-temporary-file"),"format string does not expect 1 argument","format string",template991);};var bpz997 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);M9.__rjs_quoted__.call_handled_body(bpz997,function(e998) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e998,bpz997,M8.list(M8.cons(with_handlers_predicate191994,with_handlers_handler192995)));},function() {return M8.format(template991,M8.rvoid);});var or_part999 = M8.not(copy_from992);if (or_part999) {var if_res520 = or_part999;} else {var or_part1000 = M10.path_string_p(copy_from992);if (or_part1000) {var if_res519 = or_part1000;} else {var if_res519 = M8.eq_p(copy_from992,$rjs_core.Symbol.make("directory"));}var if_res520 = if_res519;}if (if_res520) {var if_res521 = M8.rvoid();} else {var if_res521 = M8.raise_argument_error($rjs_core.Symbol.make("make-temporary-file"),"(or/c path-string? 'directory #f)",copy_from992);}if_res521;var or_part1001 = M8.not(base_dir993);if (or_part1001) {var if_res522 = or_part1001;} else {var if_res522 = M10.path_string_p(base_dir993);}if (if_res522) {var if_res523 = M8.rvoid();} else {var if_res523 = M8.raise_argument_error($rjs_core.Symbol.make("make-temporary-file"),"(or/c path-string? #f)",base_dir993);}if_res523;var tmpdir1002 = M8.find_system_path($rjs_core.Symbol.make("temp-dir"));var loop1003 = function(s1004, ms1005) {var n1007 = M8.format(template991,M8.format("~a~a",s1004,ms1005));if (base_dir993) {var if_res525 = M8.build_path(base_dir993,n1007);} else {if (M8.relative_path_p(n1007)) {var if_res524 = M8.build_path(tmpdir1002,n1007);} else {var if_res524 = n1007;}var if_res525 = if_res524;}var name1006 = if_res525;var with_handlers_predicate1931008 = M8.exn_fail_filesystem_exists_p;var with_handlers_handler1941009 = function(x1010) {return loop1003(s1004-M13.random(10),ms1005+M13.random(10));};var bpz1011 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);return M9.__rjs_quoted__.call_handled_body(bpz1011,function(e1012) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1012,bpz1011,M8.list(M8.cons(with_handlers_predicate1931008,with_handlers_handler1941009)));},function() {if (copy_from992) {if (M8.eq_p(copy_from992,$rjs_core.Symbol.make("directory"))) {var if_res526 = M8.make_directory(name1006);} else {var if_res526 = M8.copy_file(copy_from992,name1006);}var if_res528 = if_res526;} else {var name1951013 = name1006;if (M8.variable_reference_constant_p(M1.__rjs_quoted__.open_output_file16)) {var if_res527 = M1.__rjs_quoted__.open_output_file14(false,false,false,false,name1951013);} else {var if_res527 = M1.__rjs_quoted__.open_output_file16(name1951013);}var if_res528 = M8.close_output_port(if_res527);}if_res528;return name1006;});};return loop1003(M8.current_seconds(),M8.inexact__gt_exact(M8.truncate(M8.current_inexact_milliseconds())));};var cl529 = function() {return make_temporary_file189984(false,false,false,false,false,false);};var cl530 = function(template1014, copy_from1015, base_dir1851016) {return make_temporary_file189984(template1014,copy_from1015,base_dir1851016,true,true,true);};var cl531 = function(template1017, copy_from1841018) {return make_temporary_file189984(template1017,copy_from1841018,false,true,true,false);};var cl532 = function(template1831019) {return make_temporary_file189984(template1831019,false,false,true,false,false);};var make_temporary_file983 = $rjs_core.attachProcedureArity(function() {var fixed_lam533 = {'0':cl529,'3':cl530,'2':cl531,'1':cl532}[arguments.length];if (fixed_lam533!==undefined) {return fixed_lam533.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[0,1,2,3]);var make_temporary_file_by_proc = make_temporary_file983;var call_with_atomic_output_file20 = function(security_guard161020, security_guard171021, path181022, proc191023) {var path1024 = path181022;var proc1025 = proc191023;if (security_guard171021) {var if_res534 = security_guard161020;} else {var if_res534 = false;}var guard1026 = if_res534;if (M10.path_string_p(path1024)) {var if_res535 = M8.rvoid();} else {var if_res535 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-atomic-output-file"),"path-string?",path1024);}if_res535;var let_result536 = M8.values();if (M8.procedure_p(proc1025)) {var if_res537 = M8.procedure_arity_includes_p(proc1025,2);} else {var if_res537 = false;}if (if_res537) {var if_res538 = M8.rvoid();} else {var if_res538 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-atomic-output-file"),"(procedure-arity-includes/c 2)",proc1025);}if_res538;var let_result539 = M8.values();var or_part1027 = M8.not(guard1026);if (or_part1027) {var if_res540 = or_part1027;} else {var if_res540 = M8.security_guard_p(guard1026);}if (if_res540) {var if_res541 = M8.rvoid();} else {var if_res541 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-atomic-output-file"),"(or/c #f security-guard?)",guard1026);}if_res541;var let_result542 = M8.values();var try_delete_file1991029 = function(path1981030, noisy_p1961031, noisy_p1971032) {var path1033 = path1981030;if (noisy_p1971032) {var if_res543 = noisy_p1961031;} else {var if_res543 = true;}var noisy_p1034 = if_res543;var with_handlers_predicate2011035 = M8.exn_fail_filesystem_p;var with_handlers_handler2021036 = M8.rvoid;var bpz1037 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);return M9.__rjs_quoted__.call_handled_body(bpz1037,function(e1038) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1038,bpz1037,M8.list(M8.cons(with_handlers_predicate2011035,with_handlers_handler2021036)));},function() {return M8.delete_file(path1033);});};var cl544 = function(path1039) {return try_delete_file1991029(path1039,false,false);};var cl545 = function(path1040, noisy_p1961041) {return try_delete_file1991029(path1040,noisy_p1961041,true);};var try_delete_file1028 = $rjs_core.attachProcedureArity(function() {var fixed_lam546 = {'1':cl544,'2':cl545}[arguments.length];if (fixed_lam546!==undefined) {return fixed_lam546.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]);var bp1042 = M9.current_break_parameterization();var __context550 = $rjs_core.Marks.getFrames();var __context551;try {var temp548 = M8.continuation_mark_set_first(false,M2.parameterization_key);var or_part1045 = guard1026;if (or_part1045) {var if_res547 = or_part1045;} else {var if_res547 = M8.current_security_guard();}__context551 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M2.parameterization_key,M2.extend_parameterization(temp548,M8.current_security_guard,if_res547));var or_part1046 = M15.path_only(path1024);if (or_part1046) {var if_res549 = or_part1046;} else {var if_res549 = M8.current_directory();}var __wcm_result552 = make_temporary_file_by_proc("tmp~a",false,if_res549);} finally {$rjs_core.Marks.updateFrame(__context550,__context551);}var tmp_path1043 = __wcm_result552;var ok_p1044 = false;return M8.dynamic_wind(M8.rvoid,function() {var __context566 = $rjs_core.Marks.getFrames();var __context567;try {var temp564 = M8.continuation_mark_set_first(false,M2.parameterization_key);var or_part1048 = guard1026;if (or_part1048) {var if_res563 = or_part1048;} else {var if_res563 = M8.current_security_guard();}__context567 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M2.parameterization_key,M2.extend_parameterization(temp564,M8.current_security_guard,if_res563));var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__88311049 = M1.__rjs_quoted__.open_output_file16;var tmp_path2031050 = tmp_path1043;var temp2041051 = $rjs_core.Symbol.make("truncate/replace");if (M8.variable_reference_constant_p(M1.__rjs_quoted__.open_output_file16)) {var if_res565 = M1.__rjs_quoted__.open_output_file14(temp2041051,true,false,false,tmp_path2031050);} else {var if_res565 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__88311049,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),M8.list(temp2041051),tmp_path2031050);}var __wcm_result568 = if_res565;} finally {$rjs_core.Marks.updateFrame(__context566,__context567);}var out1047 = __wcm_result568;var begin_res562 = M8.dynamic_wind(M8.rvoid,function() {return M9.call_with_break_parameterization(bp1042,function() {return proc1025(out1047,tmp_path1043);});},function() {return M8.close_output_port(out1047);});ok_p1044 = true;return begin_res562;},function() {var __context558 = $rjs_core.Marks.getFrames();var __context559;try {var temp555 = M8.continuation_mark_set_first(false,M2.parameterization_key);var or_part1052 = guard1026;if (or_part1052) {var if_res554 = or_part1052;} else {var if_res554 = M8.current_security_guard();}__context559 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M2.parameterization_key,M2.extend_parameterization(temp555,M8.current_security_guard,if_res554));if (ok_p1044) {if (M8.eq_p(M8.system_type(),$rjs_core.Symbol.make("windows"))) {var tmp_path21053 = make_temporary_file_by_proc("tmp~a",false,M15.path_only(path1024));var with_handlers_predicate2051054 = M8.exn_fail_filesystem_p;var with_handlers_handler2061055 = M8.rvoid;var bpz1056 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);M9.__rjs_quoted__.call_handled_body(bpz1056,function(e1057) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1057,bpz1056,M8.list(M8.cons(with_handlers_predicate2051054,with_handlers_handler2061055)));},function() {return M8.rename_file_or_directory(path1024,tmp_path21053,true);});M8.rename_file_or_directory(tmp_path1043,path1024,true);var if_res556 = try_delete_file1028(tmp_path21053);} else {var if_res556 = M8.rename_file_or_directory(tmp_path1043,path1024,true);}var if_res557 = if_res556;} else {var if_res557 = try_delete_file1028(tmp_path1043);}var __wcm_result560 = if_res557;} finally {$rjs_core.Marks.updateFrame(__context558,__context559);}return __wcm_result560;});};var unpack21 = function(given_kws1058, given_args1059, path181060, proc191061) {var security_guard171062 = M8.pair_p(given_kws1058);if (security_guard171062) {var if_res570 = M8.car(given_args1059);} else {var if_res570 = M8.rvoid();}var security_guard161063 = if_res570;return call_with_atomic_output_file20(security_guard161063,security_guard171062,path181060,proc191061);};var cl573 = function(given_kws1068, given_args1069, path1070, proc1071) {return unpack21(given_kws1068,given_args1069,path1070,proc1071);};var temp575 = $rjs_core.attachProcedureArity(function() {var fixed_lam574 = {'4':cl573}[arguments.length];if (fixed_lam574!==undefined) {return fixed_lam574.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4]);var cl571 = function(path1073, proc1074) {return unpack21(M8.rnull,M8.rnull,path1073,proc1074);};var call_with_atomic_output_file1072 = $rjs_core.attachProcedureArity(function() {var fixed_lam572 = {'2':cl571}[arguments.length];if (fixed_lam572!==undefined) {return fixed_lam572.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2]);var call_with_atomic_output_file22 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1064, given_argc1065) {if (M8._eq_(given_argc1065,4)) {var l11066 = given_kws1064;if (M8.null_p(l11066)) {var if_res577 = l11066;} else {if (M8.eq_p(M8.car(l11066),$rjs_core.Keyword.make('#:security-guard'))) {var if_res576 = M8.cdr(l11066);} else {var if_res576 = l11066;}var if_res577 = if_res576;}var l11067 = if_res577;var if_res578 = M8.null_p(l11067);} else {var if_res578 = false;}return if_res578;},temp575,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:security-guard')),call_with_atomic_output_file1072);var with_pref_params = function(thunk1075) {var __context579 = $rjs_core.Marks.getFrames();var __context580;try {__context580 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M2.parameterization_key,M2.extend_parameterization(M8.continuation_mark_set_first(false,M2.parameterization_key),M8.read_case_sensitive,false,M8.read_square_bracket_as_paren,true,M8.read_curly_brace_as_paren,true,M8.read_square_bracket_with_tag,false,M8.read_curly_brace_with_tag,false,M8.read_accept_box,true,M8.read_accept_compiled,false,M8.read_accept_bar_quote,true,M8.read_accept_graph,true,M8.read_decimal_as_inexact,true,M8.read_cdot,false,M8.read_accept_dot,true,M8.read_accept_infix_dot,true,M8.read_accept_quasiquote,true,M8.read_accept_reader,false,M8.print_struct,false,M8.print_graph,false,M8.print_box,true,M8.print_vector_length,true,M8.current_readtable,false));var __wcm_result581 = thunk1075();} finally {$rjs_core.Marks.updateFrame(__context579,__context580);}return __wcm_result581;};var pref_cache = M8.make_weak_box(false);var path__gt_key = function(p1076) {return M8.string__gt_symbol(M8.bytes__gt_string_by_latin_1(M8.path__gt_bytes(p1076)));};var pref_cache_install_bang_ = function(fn_key1077, fn_date1078, f1079) {var or_part1081 = M8.weak_box_value(pref_cache);if (or_part1081) {var if_res583 = or_part1081;} else {var if_res583 = M8.make_hasheq();}var table1080 = if_res583;M8.hash_set_bang_(table1080,path__gt_key(fn_key1077),M8.cons(M8.file_or_directory_modify_seconds(fn_date1078,false,function() {return -Infinity;}),f1079));if (M8.eq_p(table1080,M8.weak_box_value(pref_cache))) {var if_res584 = M8.rvoid();} else {pref_cache = M8.make_weak_box(table1080);var if_res584 = null;}return if_res584;};var make_pathless_lock_file_name = function(name1082) {if (M8.eq_p($rjs_core.Symbol.make("windows"),M5.cross_system_type())) {var if_res585 = new Uint8Array([95]);} else {var if_res585 = new Uint8Array([46]);}return M8.bytes__gt_path_element(M8.bytes_append(if_res585,new Uint8Array([76,79,67,75]),M8.path_element__gt_bytes(name1082)));};var cl586 = function(path1083) {if (M10.path_string_p(path1083)) {var if_res589 = M8.rvoid();} else {var if_res589 = M8.raise_argument_error($rjs_core.Symbol.make("make-lock-file-name"),"path-string?",path1083);}if_res589;var let_result590 = M8.split_path(path1083);var dir1084 = let_result590.getAt(0);var name1085 = let_result590.getAt(1);var dir_p1086 = let_result590.getAt(2);if (M8.eq_p(dir1084,$rjs_core.Symbol.make("relative"))) {var if_res591 = make_pathless_lock_file_name(name1085);} else {var if_res591 = make_lock_file_name(dir1084,name1085);}return if_res591;};var cl587 = function(dir1087, name1088) {if (M10.path_string_p(dir1087)) {var if_res592 = M8.rvoid();} else {var if_res592 = M8.raise_argument_error($rjs_core.Symbol.make("make-lock-file-name"),"path-string?",dir1087);}if_res592;if (M15.path_element_p(name1088)) {var if_res593 = M8.rvoid();} else {var if_res593 = M8.raise_argument_error($rjs_core.Symbol.make("make-lock-file-name"),"path-element?",name1088);}if_res593;return M8.build_path(dir1087,make_pathless_lock_file_name(name1088));};var make_lock_file_name = $rjs_core.attachProcedureArity(function() {var fixed_lam588 = {'1':cl586,'2':cl587}[arguments.length];if (fixed_lam588!==undefined) {return fixed_lam588.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]);var preferences_lock_file_mode = function() {var tmp1089 = M8.system_type();if (M8.equal_p(tmp1089,$rjs_core.Symbol.make("windows"))) {var if_res594 = $rjs_core.Symbol.make("file-lock");} else {var if_res594 = $rjs_core.Symbol.make("exists");}return if_res594;};var call_with_file_lock_by_timeout33 = function(delay241090, delay271091, lock_file231092, lock_file261093, max_delay251094, max_delay281095, fn291096, kind301097, thunk311098, failure_thunk321099) {var fn1100 = fn291096;var kind1101 = kind301097;var thunk1102 = thunk311098;var failure_thunk1103 = failure_thunk321099;if (lock_file261093) {var if_res595 = lock_file231092;} else {var if_res595 = false;}var lock_file1104 = if_res595;if (delay271091) {var if_res596 = delay241090;} else {var if_res596 = 0.01;}var delay1105 = if_res596;if (max_delay281095) {var if_res597 = max_delay251094;} else {var if_res597 = 0.2;}var max_delay1106 = if_res597;var or_part1107 = M10.path_string_p(fn1100);if (or_part1107) {var if_res598 = or_part1107;} else {var if_res598 = M8.eq_p(fn1100,false);}if (if_res598) {var if_res599 = M8.rvoid();} else {var if_res599 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-file-lock/timeout"),"(or/c path-string? #f)",fn1100);}if_res599;var let_result600 = M8.values();var or_part1108 = M8.eq_p(kind1101,$rjs_core.Symbol.make("shared"));if (or_part1108) {var if_res601 = or_part1108;} else {var if_res601 = M8.eq_p(kind1101,$rjs_core.Symbol.make("exclusive"));}if (if_res601) {var if_res602 = M8.rvoid();} else {var if_res602 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-file-lock/timeout"),"(or/c 'shared 'exclusive)",kind1101);}if_res602;var let_result603 = M8.values();if (M8.procedure_p(thunk1102)) {var if_res604 = M8.procedure_arity_includes_p(thunk1102,0);} else {var if_res604 = false;}if (if_res604) {var if_res605 = M8.rvoid();} else {var if_res605 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-file-lock/timeout"),"(-> any)",thunk1102);}if_res605;var let_result606 = M8.values();if (M8.procedure_p(thunk1102)) {var if_res607 = M8.procedure_arity_includes_p(failure_thunk1103,0);} else {var if_res607 = false;}if (if_res607) {var if_res608 = M8.rvoid();} else {var if_res608 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-file-lock/timeout"),"(-> any)",failure_thunk1103);}if_res608;var let_result609 = M8.values();var or_part1109 = M8.not(lock_file1104);if (or_part1109) {var if_res610 = or_part1109;} else {var if_res610 = M10.path_string_p(lock_file1104);}if (if_res610) {var if_res611 = M8.rvoid();} else {var if_res611 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-file-lock/timeout"),"(or/c path-string? #f)",lock_file1104);}if_res611;var let_result612 = M8.values();if (M8.real_p(delay1105)) {var if_res613 = M8.not(M8.negative_p(delay1105));} else {var if_res613 = false;}if (if_res613) {var if_res614 = M8.rvoid();} else {var if_res614 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-file-lock/timeout"),"(>=/c 0.0)",delay1105);}if_res614;var let_result615 = M8.values();if (M8.real_p(max_delay1106)) {var if_res616 = M8.not(M8.negative_p(max_delay1106));} else {var if_res616 = false;}if (if_res616) {var if_res617 = M8.rvoid();} else {var if_res617 = M8.raise_argument_error($rjs_core.Symbol.make("call-with-file-lock/timeout"),"(>=/c 0.0)",max_delay1106);}if_res617;var let_result618 = M8.values();var or_part1111 = lock_file1104;if (or_part1111) {var if_res619 = or_part1111;} else {var if_res619 = make_lock_file_name(fn1100);}var real_lock_file1110 = if_res619;var loop1112 = function(delay1113) {var kind2071114 = kind1101;var real_lock_file2081115 = real_lock_file1110;var thunk2091116 = thunk1102;var temp2101117 = function() {if (M8._lt_(delay1113,max_delay1106)) {M8.sleep(delay1113);var if_res620 = loop1112(2*delay1113);} else {var if_res620 = failure_thunk1103();}return if_res620;};if (M8.variable_reference_constant_p(call_with_file_lock44)) {var if_res621 = call_with_file_lock42(false,false,kind2071114,real_lock_file2081115,thunk2091116,temp2101117);} else {var if_res621 = call_with_file_lock44(kind2071114,real_lock_file2081115,thunk2091116,temp2101117);}return if_res621;};return loop1112(delay1105);};var unpack34 = function(given_kws1118, given_args1119, fn291120, kind301121, thunk311122, failure_thunk321123) {if (M8.pair_p(given_kws1118)) {var if_res622 = M8.eq_p($rjs_core.Keyword.make('#:delay'),M8.car(given_kws1118));} else {var if_res622 = false;}var delay271124 = if_res622;if (delay271124) {var if_res623 = M8.car(given_args1119);} else {var if_res623 = M8.rvoid();}var delay241125 = if_res623;if (delay271124) {var if_res624 = M8.cdr(given_kws1118);} else {var if_res624 = given_kws1118;}var given_kws1126 = if_res624;if (delay271124) {var if_res625 = M8.cdr(given_args1119);} else {var if_res625 = given_args1119;}var given_args1127 = if_res625;if (M8.pair_p(given_kws1126)) {var if_res626 = M8.eq_p($rjs_core.Keyword.make('#:lock-file'),M8.car(given_kws1126));} else {var if_res626 = false;}var lock_file261128 = if_res626;if (lock_file261128) {var if_res627 = M8.car(given_args1127);} else {var if_res627 = M8.rvoid();}var lock_file231129 = if_res627;if (lock_file261128) {var if_res628 = M8.cdr(given_kws1126);} else {var if_res628 = given_kws1126;}var given_kws1130 = if_res628;if (lock_file261128) {var if_res629 = M8.cdr(given_args1127);} else {var if_res629 = given_args1127;}var given_args1131 = if_res629;var max_delay281132 = M8.pair_p(given_kws1130);if (max_delay281132) {var if_res630 = M8.car(given_args1131);} else {var if_res630 = M8.rvoid();}var max_delay251133 = if_res630;return call_with_file_lock_by_timeout33(delay241125,delay271124,lock_file231129,lock_file261128,max_delay251133,max_delay281132,fn291120,kind301121,thunk311122,failure_thunk321123);};var cl633 = function(given_kws1142, given_args1143, fn1144, kind1145, thunk1146, failure_thunk1147) {return unpack34(given_kws1142,given_args1143,fn1144,kind1145,thunk1146,failure_thunk1147);};var temp635 = $rjs_core.attachProcedureArity(function() {var fixed_lam634 = {'6':cl633}[arguments.length];if (fixed_lam634!==undefined) {return fixed_lam634.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[6]);var cl631 = function(fn1149, kind1150, thunk1151, failure_thunk1152) {return unpack34(M8.rnull,M8.rnull,fn1149,kind1150,thunk1151,failure_thunk1152);};var call_with_file_lock_by_timeout1148 = $rjs_core.attachProcedureArity(function() {var fixed_lam632 = {'4':cl631}[arguments.length];if (fixed_lam632!==undefined) {return fixed_lam632.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4]);var call_with_file_lock_by_timeout35 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1134, given_argc1135) {if (M8._eq_(given_argc1135,6)) {var l11136 = given_kws1134;if (M8.null_p(l11136)) {var if_res637 = l11136;} else {if (M8.eq_p(M8.car(l11136),$rjs_core.Keyword.make('#:delay'))) {var if_res636 = M8.cdr(l11136);} else {var if_res636 = l11136;}var if_res637 = if_res636;}var l11137 = if_res637;var l11138 = l11137;if (M8.null_p(l11138)) {var if_res639 = l11138;} else {if (M8.eq_p(M8.car(l11138),$rjs_core.Keyword.make('#:lock-file'))) {var if_res638 = M8.cdr(l11138);} else {var if_res638 = l11138;}var if_res639 = if_res638;}var l11139 = if_res639;var l11140 = l11139;if (M8.null_p(l11140)) {var if_res641 = l11140;} else {if (M8.eq_p(M8.car(l11140),$rjs_core.Keyword.make('#:max-delay'))) {var if_res640 = M8.cdr(l11140);} else {var if_res640 = l11140;}var if_res641 = if_res640;}var l11141 = if_res641;var if_res642 = M8.null_p(l11141);} else {var if_res642 = false;}return if_res642;},temp635,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:delay'), $rjs_core.Keyword.make('#:lock-file'), $rjs_core.Keyword.make('#:max-delay')),call_with_file_lock_by_timeout1148);var call_with_preference_file_lock = function(who1153, kind1154, get_lock_file1155, thunk1156, lock_there1157) {var lock_style1158 = preferences_lock_file_mode();var lock_file1159 = get_lock_file1155();if (lock_there1157) {var if_res644 = function() {return lock_there1157(lock_file1159);};} else {var if_res644 = function() {var tmp1161 = lock_style1158;if (M8.equal_p(tmp1161,$rjs_core.Symbol.make("file-lock"))) {var if_res643 = M8.error(who1153,"~a ~a: ~e","some other process has a lock","on the preferences lock file",lock_file1159);} else {var if_res643 = M8.error(who1153,"~a, ~a: ~e","some other process has the preference-file lock","as indicated by the existence of the lock file",lock_file1159);}return if_res643;};}var failure_thunk1160 = if_res644;var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__145771162 = call_with_file_lock44;var kind2111163 = kind1154;var lock_file2121164 = lock_file1159;var thunk2131165 = thunk1156;var failure_thunk2141166 = failure_thunk1160;var lock_style2151167 = lock_style1158;if (M8.variable_reference_constant_p(call_with_file_lock44)) {var if_res645 = call_with_file_lock42(lock_style2151167,true,kind2111163,lock_file2121164,thunk2131165,failure_thunk2141166);} else {var if_res645 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__145771162,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-style')),6)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-style')),M8.list(lock_style2151167),kind2111163,lock_file2121164,thunk2131165,failure_thunk2141166);}return if_res645;};var call_with_file_lock42 = function(lock_style361168, lock_style371169, kind381170, lock_file391171, thunk401172, failure_thunk411173) {var kind1174 = kind381170;var lock_file1175 = lock_file391171;var thunk1176 = thunk401172;var failure_thunk1177 = failure_thunk411173;if (lock_style371169) {var if_res646 = lock_style361168;} else {var if_res646 = $rjs_core.Symbol.make("file-lock");}var lock_style1178 = if_res646;var tmp1179 = lock_style1178;if (M8.equal_p(tmp1179,$rjs_core.Symbol.make("file-lock"))) {if (M8.file_exists_p(lock_file1175)) {var if_res648 = M8.rvoid();} else {var with_handlers_predicate2161180 = M8.exn_fail_filesystem_exists_p;var with_handlers_handler2171181 = function(exn1182) {return $rjs_core.Symbol.make("ok");};var bpz1183 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);var if_res648 = M9.__rjs_quoted__.call_handled_body(bpz1183,function(e1184) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1184,bpz1183,M8.list(M8.cons(with_handlers_predicate2161180,with_handlers_handler2171181)));},function() {var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__149911185 = M1.__rjs_quoted__.open_output_file16;var lock_file2181186 = lock_file1175;var temp2191187 = $rjs_core.Symbol.make("error");if (M8.variable_reference_constant_p(M1.__rjs_quoted__.open_output_file16)) {var if_res647 = M1.__rjs_quoted__.open_output_file14(temp2191187,true,false,false,lock_file2181186);} else {var if_res647 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__149911185,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),M8.list(temp2191187),lock_file2181186);}return M8.close_output_port(if_res647);});}if_res648;if (M8.eq_p(kind1174,$rjs_core.Symbol.make("exclusive"))) {var if_res651 = function(fn1188, proc1189) {var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__151031190 = M1.__rjs_quoted__.call_with_output_file_times_72;var fn2201191 = fn1188;var proc2211192 = proc1189;var temp2221193 = $rjs_core.Symbol.make("update");if (M8.variable_reference_constant_p(M1.__rjs_quoted__.call_with_output_file_times_72)) {var if_res650 = M1.__rjs_quoted__.call_with_output_file_times_70(temp2221193,true,false,false,fn2201191,proc2211192);} else {var if_res650 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__151031190,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),M8.list(temp2221193),fn2201191,proc2211192);}return if_res650;};} else {var if_res651 = M1.__rjs_quoted__.call_with_input_file_times_63;}var if_res655 = if_res651(lock_file1175,function(p1194) {if (M8.port_try_file_lock_p(p1194,kind1174)) {var if_res649 = M8.call_with_values(function() {return M8.dynamic_wind(M8.rvoid,thunk1176,function() {return M8.port_file_unlock(p1194);});},$rjs_core.attachProcedureArity(function() {var vs1195 = $rjs_core.Pair.listFromArray($rjs_core.argumentsToArray(arguments));return function() {return M8.apply(M8.values,vs1195);};}));} else {var if_res649 = function() {return failure_thunk1177();};}return if_res649;})();} else {var tmp1196 = kind1174;if (M8.equal_p(tmp1196,$rjs_core.Symbol.make("shared"))) {var if_res654 = thunk1176();} else {if (M8.equal_p(tmp1196,$rjs_core.Symbol.make("exclusive"))) {var with_handlers_predicate2231197 = M8.exn_fail_filesystem_exists_p;var with_handlers_handler2241198 = function(x1199) {return failure_thunk1177();};var bpz1200 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);M9.__rjs_quoted__.call_handled_body(bpz1200,function(e1201) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1201,bpz1200,M8.list(M8.cons(with_handlers_predicate2231197,with_handlers_handler2241198)));},function() {var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__160121202 = M1.__rjs_quoted__.open_output_file16;var lock_file2251203 = lock_file1175;var temp2261204 = $rjs_core.Symbol.make("error");if (M8.variable_reference_constant_p(M1.__rjs_quoted__.open_output_file16)) {var if_res652 = M1.__rjs_quoted__.open_output_file14(temp2261204,true,false,false,lock_file2251203);} else {var if_res652 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__160121202,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),M8.list(temp2261204),lock_file2251203);}return M8.close_output_port(if_res652);});var if_res653 = M8.dynamic_wind(M8.rvoid,thunk1176,function() {return M8.delete_file(lock_file1175);});} else {var if_res653 = M8.rvoid();}var if_res654 = if_res653;}var if_res655 = if_res654;}return if_res655;};var unpack43 = function(given_kws1205, given_args1206, kind381207, lock_file391208, thunk401209, failure_thunk411210) {var lock_style371211 = M8.pair_p(given_kws1205);if (lock_style371211) {var if_res656 = M8.car(given_args1206);} else {var if_res656 = M8.rvoid();}var lock_style361212 = if_res656;return call_with_file_lock42(lock_style361212,lock_style371211,kind381207,lock_file391208,thunk401209,failure_thunk411210);};var cl659 = function(given_kws1217, given_args1218, kind1219, lock_file1220, thunk1221, failure_thunk1222) {return unpack43(given_kws1217,given_args1218,kind1219,lock_file1220,thunk1221,failure_thunk1222);};var temp661 = $rjs_core.attachProcedureArity(function() {var fixed_lam660 = {'6':cl659}[arguments.length];if (fixed_lam660!==undefined) {return fixed_lam660.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[6]);var cl657 = function(kind1224, lock_file1225, thunk1226, failure_thunk1227) {return unpack43(M8.rnull,M8.rnull,kind1224,lock_file1225,thunk1226,failure_thunk1227);};var call_with_file_lock1223 = $rjs_core.attachProcedureArity(function() {var fixed_lam658 = {'4':cl657}[arguments.length];if (fixed_lam658!==undefined) {return fixed_lam658.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4]);var call_with_file_lock44 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1213, given_argc1214) {if (M8._eq_(given_argc1214,6)) {var l11215 = given_kws1213;if (M8.null_p(l11215)) {var if_res663 = l11215;} else {if (M8.eq_p(M8.car(l11215),$rjs_core.Keyword.make('#:lock-style'))) {var if_res662 = M8.cdr(l11215);} else {var if_res662 = l11215;}var if_res663 = if_res662;}var l11216 = if_res663;var if_res664 = M8.null_p(l11216);} else {var if_res664 = false;}return if_res664;},temp661,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-style')),call_with_file_lock1223);var get_prefs = function(flush_mode1228, filename1229, use_lock_p1230, lock_there1231) {var read_prefs1232 = function(default_pref_file1233) {var with_handlers_predicate2271234 = M8.exn_fail_filesystem_p;var with_handlers_handler2281235 = function(x1236) {return M8.rnull;};var bpz1237 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);return M9.__rjs_quoted__.call_handled_body(bpz1237,function(e1238) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1238,bpz1237,M8.list(M8.cons(with_handlers_predicate2271234,with_handlers_handler2281235)));},function() {if (filename1229) {var if_res674 = M8.values(filename1229,use_lock_p1230);} else {var f1241 = default_pref_file1233;if (M8.file_exists_p(f1241)) {var if_res673 = M8.values(f1241,use_lock_p1230);} else {var tmp1243 = M8.system_type();if (M8.equal_p(tmp1243,$rjs_core.Symbol.make("windows"))) {var if_res667 = M8.build_path(M8.find_system_path($rjs_core.Symbol.make("pref-dir")),$rjs_core.Symbol.make("up"),"PLT Scheme","plt-prefs.ss");} else {if (M8.equal_p(tmp1243,$rjs_core.Symbol.make("macosx"))) {var if_res666 = M8.build_path(M8.find_system_path($rjs_core.Symbol.make("pref-dir")),"org.plt-scheme.prefs.ss");} else {if (M8.equal_p(tmp1243,$rjs_core.Symbol.make("unix"))) {var if_res665 = M8.expand_user_path("~/.plt-scheme/plt-prefs.ss");} else {var if_res665 = M8.rvoid();}var if_res666 = if_res665;}var if_res667 = if_res666;}var alt_f1242 = if_res667;if (M8.file_exists_p(alt_f1242)) {var if_res672 = M8.values(alt_f1242,false);} else {var d1244 = M4.find_config_dir();if (d1244) {var if_res668 = M8.build_path(d1244,"racket-prefs.rktd");} else {var if_res668 = false;}var c_f1245 = if_res668;if (c_f1245) {var if_res669 = M8.file_exists_p(c_f1245);} else {var if_res669 = false;}if (if_res669) {var if_res671 = c_f1245;} else {var f2291246 = f1241;var void2301247 = M8.rvoid;if (M8.variable_reference_constant_p(M1.__rjs_quoted__.call_with_input_file_times_63)) {var if_res670 = M1.__rjs_quoted__.call_with_input_file_times_61(false,false,f2291246,void2301247);} else {var if_res670 = M1.__rjs_quoted__.call_with_input_file_times_63(f2291246,void2301247);}var if_res671 = if_res670;}var if_res672 = M8.values(if_res671,false);}var if_res673 = if_res672;}var if_res674 = if_res673;}var let_result675 = if_res674;var pref_file1239 = let_result675.getAt(0);var use_lock_p1240 = let_result675.getAt(1);var prefs1248 = with_pref_params(function() {var with_handlers_predicate2311249 = M8.exn_fail_read_p;var with_handlers_handler2321250 = function(exn1251) {var l1252 = M8.__rjs_quoted__.current_logger();if (M8.__rjs_quoted__.log_level_p(l1252,$rjs_core.Symbol.make("error"),M8.__rjs_quoted__.logger_name(l1252))) {var if_res676 = M8.__rjs_quoted__.log_message(l1252,$rjs_core.Symbol.make("error"),M8.format("error reading preferences: ~a",M8.exn_message(exn1251)),M8.current_continuation_marks());} else {var if_res676 = M8.rvoid();}if_res676;return M8.rnull;};var bpz1253 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);return M9.__rjs_quoted__.call_handled_body(bpz1253,function(e1254) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1254,bpz1253,M8.list(M8.cons(with_handlers_predicate2311249,with_handlers_handler2321250)));},function() {if (use_lock_p1240) {var if_res679 = call_with_preference_file_lock($rjs_core.Symbol.make("get-preference"),$rjs_core.Symbol.make("shared"),function() {return make_lock_file_name(pref_file1239);},function() {var pref_file2331255 = pref_file1239;var read2341256 = M8.read;if (M8.variable_reference_constant_p(M1.__rjs_quoted__.with_input_from_file47)) {var if_res677 = M1.__rjs_quoted__.with_input_from_file45(false,false,pref_file2331255,read2341256);} else {var if_res677 = M1.__rjs_quoted__.with_input_from_file47(pref_file2331255,read2341256);}return if_res677;},lock_there1231);} else {var pref_file2351257 = pref_file1239;var read2361258 = M8.read;if (M8.variable_reference_constant_p(M1.__rjs_quoted__.with_input_from_file47)) {var if_res678 = M1.__rjs_quoted__.with_input_from_file45(false,false,pref_file2351257,read2361258);} else {var if_res678 = M1.__rjs_quoted__.with_input_from_file47(pref_file2351257,read2361258);}var if_res679 = if_res678;}return if_res679;});});if (M8.list_p(prefs1248)) {var if_res683 = M6.andmap(function(x1259) {if (M8.pair_p(x1259)) {if (M8.symbol_p(M8.car(x1259))) {if (M8.pair_p(M8.cdr(x1259))) {var if_res680 = M8.null_p(M8.cddr(x1259));} else {var if_res680 = false;}var if_res681 = if_res680;} else {var if_res681 = false;}var if_res682 = if_res681;} else {var if_res682 = false;}return if_res682;},prefs1248);} else {var if_res683 = false;}if (if_res683) {var if_res685 = prefs1248;} else {var l1260 = M8.__rjs_quoted__.current_logger();if (M8.__rjs_quoted__.log_level_p(l1260,$rjs_core.Symbol.make("error"),M8.__rjs_quoted__.logger_name(l1260))) {var if_res684 = M8.__rjs_quoted__.log_message(l1260,$rjs_core.Symbol.make("error"),"preference file content is not a list of symbol--value lists",M8.current_continuation_marks());} else {var if_res684 = M8.rvoid();}if_res684;var if_res685 = M8.rnull;}return if_res685;});};var or_part1262 = filename1229;if (or_part1262) {var if_res686 = or_part1262;} else {var if_res686 = M8.find_system_path($rjs_core.Symbol.make("pref-file"));}var fn1261 = M8.path__gt_complete_path(if_res686);var table1264 = M8.weak_box_value(pref_cache);if (table1264) {var if_res687 = M8.hash_ref(table1264,path__gt_key(fn1261),false);} else {var if_res687 = false;}var cache1263 = if_res687;if (cache1263) {var or_part1265 = M8.not(flush_mode1228);if (or_part1265) {var if_res689 = or_part1265;} else {if (M8.eq_p(flush_mode1228,$rjs_core.Symbol.make("timestamp"))) {var if_res688 = M8._eq_(M8.car(cache1263),M8.file_or_directory_modify_seconds(fn1261,false,function() {return -Infinity;}));} else {var if_res688 = false;}var if_res689 = if_res688;}var if_res690 = if_res689;} else {var if_res690 = false;}if (if_res690) {var if_res691 = M8.cdr(cache1263);} else {var ts1266 = M8.file_or_directory_modify_seconds(fn1261,false,function() {return -Infinity;});var f1267 = read_prefs1232(fn1261);pref_cache_install_bang_(fn1261,fn1261,f1267);var if_res691 = f1267;}return if_res691;};var make_handle_get_preference_locked57 = function(lock_there451268, lock_there471269, max_delay461270, max_delay481271, delay551272, name561273, fail_thunk491274, refresh_cache_p501275, filename511276, fail_thunk521277, refresh_cache_p531278, filename541279) {var delay1280 = delay551272;var name1281 = name561273;if (fail_thunk521277) {var if_res692 = fail_thunk491274;} else {var if_res692 = function() {return false;};}var fail_thunk1282 = if_res692;if (refresh_cache_p531278) {var if_res693 = refresh_cache_p501275;} else {var if_res693 = $rjs_core.Symbol.make("timestamp");}var refresh_cache_p1283 = if_res693;if (filename541279) {var if_res694 = filename511276;} else {var if_res694 = false;}var filename1284 = if_res694;if (lock_there471269) {var if_res695 = lock_there451268;} else {var if_res695 = false;}var lock_there1285 = if_res695;if (max_delay481271) {var if_res696 = max_delay461270;} else {var if_res696 = 0.2;}var max_delay1286 = if_res696;return function(lock_filename1287) {M8.sleep(delay1280);var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__210761288 = get_preference75;var name2371289 = name1281;var fail_thunk2381290 = fail_thunk1282;var refresh_cache_p2391291 = refresh_cache_p1283;var filename2401292 = filename1284;var new_delay1294 = 2*delay1280;if (M8._lt_(new_delay1294,max_delay1286)) {var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__213031295 = make_handle_get_preference_locked59;var new_delay2421296 = new_delay1294;var name2431297 = name1281;var fail_thunk2441298 = fail_thunk1282;var refresh_cache_p2451299 = refresh_cache_p1283;var filename2461300 = filename1284;var lock_there2471301 = lock_there1285;var max_delay2481302 = max_delay1286;if (M8.variable_reference_constant_p(make_handle_get_preference_locked59)) {var if_res697 = make_handle_get_preference_locked57(lock_there2471301,true,max_delay2481302,true,new_delay2421296,name2431297,fail_thunk2441298,refresh_cache_p2451299,filename2461300,true,true,true);} else {var if_res697 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__213031295,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there'), $rjs_core.Keyword.make('#:max-delay')),7)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there'), $rjs_core.Keyword.make('#:max-delay')),M8.list(lock_there2471301,max_delay2481302),new_delay2421296,name2431297,fail_thunk2441298,refresh_cache_p2451299,filename2461300);}var if_res698 = if_res697;} else {var if_res698 = lock_there1285;}var temp2411293 = if_res698;if (M8.variable_reference_constant_p(get_preference75)) {var if_res699 = get_preference73(temp2411293,true,false,false,false,false,name2371289,fail_thunk2381290,refresh_cache_p2391291,filename2401292,true,true,true);} else {var if_res699 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__210761288,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there')),6)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there')),M8.list(temp2411293),name2371289,fail_thunk2381290,refresh_cache_p2391291,filename2401292);}return if_res699;};};var unpack58 = function(given_kws1303, given_args1304, delay551305, name561306, fail_thunk491307, refresh_cache_p501308, filename511309, fail_thunk521310, refresh_cache_p531311, filename541312) {if (M8.pair_p(given_kws1303)) {var if_res700 = M8.eq_p($rjs_core.Keyword.make('#:lock-there'),M8.car(given_kws1303));} else {var if_res700 = false;}var lock_there471313 = if_res700;if (lock_there471313) {var if_res701 = M8.car(given_args1304);} else {var if_res701 = M8.rvoid();}var lock_there451314 = if_res701;if (lock_there471313) {var if_res702 = M8.cdr(given_kws1303);} else {var if_res702 = given_kws1303;}var given_kws1315 = if_res702;if (lock_there471313) {var if_res703 = M8.cdr(given_args1304);} else {var if_res703 = given_args1304;}var given_args1316 = if_res703;var max_delay481317 = M8.pair_p(given_kws1315);if (max_delay481317) {var if_res704 = M8.car(given_args1316);} else {var if_res704 = M8.rvoid();}var max_delay461318 = if_res704;return make_handle_get_preference_locked57(lock_there451314,lock_there471313,max_delay461318,max_delay481317,delay551305,name561306,fail_thunk491307,refresh_cache_p501308,filename511309,fail_thunk521310,refresh_cache_p531311,filename541312);};var cl710 = function(given_kws1325, given_args1326, delay1327, name1328) {return unpack58(given_kws1325,given_args1326,delay1327,name1328,false,false,false,false,false,false);};var cl711 = function(given_kws1329, given_args1330, delay1331, name1332, fail_thunk1333, refresh_cache_p1334, filename511335) {return unpack58(given_kws1329,given_args1330,delay1331,name1332,fail_thunk1333,refresh_cache_p1334,filename511335,true,true,true);};var cl712 = function(given_kws1336, given_args1337, delay1338, name1339, fail_thunk1340, refresh_cache_p501341) {return unpack58(given_kws1336,given_args1337,delay1338,name1339,fail_thunk1340,refresh_cache_p501341,false,true,true,false);};var cl713 = function(given_kws1342, given_args1343, delay1344, name1345, fail_thunk491346) {return unpack58(given_kws1342,given_args1343,delay1344,name1345,fail_thunk491346,false,false,true,false,false);};var temp715 = $rjs_core.attachProcedureArity(function() {var fixed_lam714 = {'4':cl710,'7':cl711,'6':cl712,'5':cl713}[arguments.length];if (fixed_lam714!==undefined) {return fixed_lam714.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4,5,6,7]);var cl705 = function(delay1348, name1349) {return unpack58(M8.rnull,M8.rnull,delay1348,name1349,false,false,false,false,false,false);};var cl706 = function(delay1350, name1351, fail_thunk1352, refresh_cache_p1353, filename511354) {return unpack58(M8.rnull,M8.rnull,delay1350,name1351,fail_thunk1352,refresh_cache_p1353,filename511354,true,true,true);};var cl707 = function(delay1355, name1356, fail_thunk1357, refresh_cache_p501358) {return unpack58(M8.rnull,M8.rnull,delay1355,name1356,fail_thunk1357,refresh_cache_p501358,false,true,true,false);};var cl708 = function(delay1359, name1360, fail_thunk491361) {return unpack58(M8.rnull,M8.rnull,delay1359,name1360,fail_thunk491361,false,false,true,false,false);};var make_handle_get_preference_locked1347 = $rjs_core.attachProcedureArity(function() {var fixed_lam709 = {'2':cl705,'5':cl706,'4':cl707,'3':cl708}[arguments.length];if (fixed_lam709!==undefined) {return fixed_lam709.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2,3,4,5]);var make_handle_get_preference_locked59 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1319, given_argc1320) {if (M8._gt__eq_(given_argc1320,4)) {var if_res716 = M8._lt__eq_(given_argc1320,7);} else {var if_res716 = false;}if (if_res716) {var l11321 = given_kws1319;if (M8.null_p(l11321)) {var if_res718 = l11321;} else {if (M8.eq_p(M8.car(l11321),$rjs_core.Keyword.make('#:lock-there'))) {var if_res717 = M8.cdr(l11321);} else {var if_res717 = l11321;}var if_res718 = if_res717;}var l11322 = if_res718;var l11323 = l11322;if (M8.null_p(l11323)) {var if_res720 = l11323;} else {if (M8.eq_p(M8.car(l11323),$rjs_core.Keyword.make('#:max-delay'))) {var if_res719 = M8.cdr(l11323);} else {var if_res719 = l11323;}var if_res720 = if_res719;}var l11324 = if_res720;var if_res721 = M8.null_p(l11324);} else {var if_res721 = false;}return if_res721;},temp715,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there'), $rjs_core.Keyword.make('#:max-delay')),make_handle_get_preference_locked1347);var get_preference73 = function(lock_there611362, lock_there641363, timeout_lock_there601364, timeout_lock_there631365, use_lock_p621366, use_lock_p651367, name721368, fail_thunk661369, refresh_cache_p671370, filename681371, fail_thunk691372, refresh_cache_p701373, filename711374) {var name1375 = name721368;if (fail_thunk691372) {var if_res722 = fail_thunk661369;} else {var if_res722 = function() {return false;};}var fail_thunk1376 = if_res722;if (refresh_cache_p701373) {var if_res723 = refresh_cache_p671370;} else {var if_res723 = $rjs_core.Symbol.make("timestamp");}var refresh_cache_p1377 = if_res723;if (filename711374) {var if_res724 = filename681371;} else {var if_res724 = false;}var filename1378 = if_res724;if (timeout_lock_there631365) {var if_res725 = timeout_lock_there601364;} else {var if_res725 = false;}var timeout_lock_there1379 = if_res725;if (lock_there641363) {var if_res727 = lock_there611362;} else {var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__219571381 = make_handle_get_preference_locked59;var temp2491382 = 0.01;var name2501383 = name1375;var fail_thunk2511384 = fail_thunk1376;var refresh_cache_p2521385 = refresh_cache_p1377;var filename2531386 = filename1378;var timeout_lock_there2541387 = timeout_lock_there1379;if (M8.variable_reference_constant_p(make_handle_get_preference_locked59)) {var if_res726 = make_handle_get_preference_locked57(timeout_lock_there2541387,true,false,false,temp2491382,name2501383,fail_thunk2511384,refresh_cache_p2521385,filename2531386,true,true,true);} else {var if_res726 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__219571381,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there')),7)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there')),M8.list(timeout_lock_there2541387),temp2491382,name2501383,fail_thunk2511384,refresh_cache_p2521385,filename2531386);}var if_res727 = if_res726;}var lock_there1380 = if_res727;if (use_lock_p651367) {var if_res728 = use_lock_p621366;} else {var if_res728 = true;}var use_lock_p1388 = if_res728;if (M8.symbol_p(name1375)) {var if_res729 = M8.rvoid();} else {var if_res729 = M8.raise_argument_error($rjs_core.Symbol.make("get-preference"),"symbol?",name1375);}if_res729;if (M8.procedure_p(fail_thunk1376)) {var if_res730 = M8.procedure_arity_includes_p(fail_thunk1376,0);} else {var if_res730 = false;}if (if_res730) {var if_res731 = M8.rvoid();} else {var if_res731 = M8.raise_argument_error($rjs_core.Symbol.make("get-preference"),"(-> any)",fail_thunk1376);}if_res731;return M14.call_by_ec(function(esc1389) {if (lock_there1380) {var if_res732 = function(file1391) {return esc1389(function() {return lock_there1380(file1391);});};} else {var if_res732 = false;}var f1390 = get_prefs(refresh_cache_p1377,filename1378,use_lock_p1388,if_res732);return function() {var m1392 = M3.assq(name1375,f1390);if (m1392) {var if_res733 = M8.cadr(m1392);} else {var if_res733 = fail_thunk1376();}return if_res733;};})();};var unpack74 = function(given_kws1393, given_args1394, name721395, fail_thunk661396, refresh_cache_p671397, filename681398, fail_thunk691399, refresh_cache_p701400, filename711401) {if (M8.pair_p(given_kws1393)) {var if_res734 = M8.eq_p($rjs_core.Keyword.make('#:lock-there'),M8.car(given_kws1393));} else {var if_res734 = false;}var lock_there641402 = if_res734;if (lock_there641402) {var if_res735 = M8.car(given_args1394);} else {var if_res735 = M8.rvoid();}var lock_there611403 = if_res735;if (lock_there641402) {var if_res736 = M8.cdr(given_kws1393);} else {var if_res736 = given_kws1393;}var given_kws1404 = if_res736;if (lock_there641402) {var if_res737 = M8.cdr(given_args1394);} else {var if_res737 = given_args1394;}var given_args1405 = if_res737;if (M8.pair_p(given_kws1404)) {var if_res738 = M8.eq_p($rjs_core.Keyword.make('#:timeout-lock-there'),M8.car(given_kws1404));} else {var if_res738 = false;}var timeout_lock_there631406 = if_res738;if (timeout_lock_there631406) {var if_res739 = M8.car(given_args1405);} else {var if_res739 = M8.rvoid();}var timeout_lock_there601407 = if_res739;if (timeout_lock_there631406) {var if_res740 = M8.cdr(given_kws1404);} else {var if_res740 = given_kws1404;}var given_kws1408 = if_res740;if (timeout_lock_there631406) {var if_res741 = M8.cdr(given_args1405);} else {var if_res741 = given_args1405;}var given_args1409 = if_res741;var use_lock_p651410 = M8.pair_p(given_kws1408);if (use_lock_p651410) {var if_res742 = M8.car(given_args1409);} else {var if_res742 = M8.rvoid();}var use_lock_p621411 = if_res742;return get_preference73(lock_there611403,lock_there641402,timeout_lock_there601407,timeout_lock_there631406,use_lock_p621411,use_lock_p651410,name721395,fail_thunk661396,refresh_cache_p671397,filename681398,fail_thunk691399,refresh_cache_p701400,filename711401);};var cl748 = function(given_kws1420, given_args1421, name1422) {return unpack74(given_kws1420,given_args1421,name1422,false,false,false,false,false,false);};var cl749 = function(given_kws1423, given_args1424, name1425, fail_thunk1426, refresh_cache_p1427, filename681428) {return unpack74(given_kws1423,given_args1424,name1425,fail_thunk1426,refresh_cache_p1427,filename681428,true,true,true);};var cl750 = function(given_kws1429, given_args1430, name1431, fail_thunk1432, refresh_cache_p671433) {return unpack74(given_kws1429,given_args1430,name1431,fail_thunk1432,refresh_cache_p671433,false,true,true,false);};var cl751 = function(given_kws1434, given_args1435, name1436, fail_thunk661437) {return unpack74(given_kws1434,given_args1435,name1436,fail_thunk661437,false,false,true,false,false);};var temp753 = $rjs_core.attachProcedureArity(function() {var fixed_lam752 = {'3':cl748,'6':cl749,'5':cl750,'4':cl751}[arguments.length];if (fixed_lam752!==undefined) {return fixed_lam752.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3,4,5,6]);var cl743 = function(name1439) {return unpack74(M8.rnull,M8.rnull,name1439,false,false,false,false,false,false);};var cl744 = function(name1440, fail_thunk1441, refresh_cache_p1442, filename681443) {return unpack74(M8.rnull,M8.rnull,name1440,fail_thunk1441,refresh_cache_p1442,filename681443,true,true,true);};var cl745 = function(name1444, fail_thunk1445, refresh_cache_p671446) {return unpack74(M8.rnull,M8.rnull,name1444,fail_thunk1445,refresh_cache_p671446,false,true,true,false);};var cl746 = function(name1447, fail_thunk661448) {return unpack74(M8.rnull,M8.rnull,name1447,fail_thunk661448,false,false,true,false,false);};var get_preference1438 = $rjs_core.attachProcedureArity(function() {var fixed_lam747 = {'1':cl743,'4':cl744,'3':cl745,'2':cl746}[arguments.length];if (fixed_lam747!==undefined) {return fixed_lam747.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2,3,4]);var get_preference75 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1412, given_argc1413) {if (M8._gt__eq_(given_argc1413,3)) {var if_res754 = M8._lt__eq_(given_argc1413,6);} else {var if_res754 = false;}if (if_res754) {var l11414 = given_kws1412;if (M8.null_p(l11414)) {var if_res756 = l11414;} else {if (M8.eq_p(M8.car(l11414),$rjs_core.Keyword.make('#:lock-there'))) {var if_res755 = M8.cdr(l11414);} else {var if_res755 = l11414;}var if_res756 = if_res755;}var l11415 = if_res756;var l11416 = l11415;if (M8.null_p(l11416)) {var if_res758 = l11416;} else {if (M8.eq_p(M8.car(l11416),$rjs_core.Keyword.make('#:timeout-lock-there'))) {var if_res757 = M8.cdr(l11416);} else {var if_res757 = l11416;}var if_res758 = if_res757;}var l11417 = if_res758;var l11418 = l11417;if (M8.null_p(l11418)) {var if_res760 = l11418;} else {if (M8.eq_p(M8.car(l11418),$rjs_core.Keyword.make('#:use-lock?'))) {var if_res759 = M8.cdr(l11418);} else {var if_res759 = l11418;}var if_res760 = if_res759;}var l11419 = if_res760;var if_res761 = M8.null_p(l11419);} else {var if_res761 = false;}return if_res761;},temp753,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:lock-there'), $rjs_core.Keyword.make('#:timeout-lock-there'), $rjs_core.Keyword.make('#:use-lock?')),get_preference1438);var put_preferences821449 = function(names801450, vals811451, lock_there761452, filename771453, lock_there781454, filename791455) {var names1456 = names801450;var vals1457 = vals811451;if (lock_there781454) {var if_res762 = lock_there761452;} else {var if_res762 = false;}var lock_there1458 = if_res762;if (filename791455) {var if_res763 = filename771453;} else {var if_res763 = false;}var filename1459 = if_res763;if (M8.list_p(names1456)) {var if_res764 = M6.andmap(M8.symbol_p,names1456);} else {var if_res764 = false;}if (if_res764) {var if_res765 = M8.rvoid();} else {var if_res765 = M8.raise_argument_error($rjs_core.Symbol.make("put-preferences"),"(listof symbol?)",names1456);}if_res765;if (M8.list_p(vals1457)) {var if_res766 = M8.rvoid();} else {var if_res766 = M8.raise_argument_error($rjs_core.Symbol.make("put-preferences"),"list?",vals1457);}if_res766;if (M8._eq_(M8.length(names1456),M8.length(vals1457))) {var if_res767 = M8.rvoid();} else {var if_res767 = M8.raise_arguments_error($rjs_core.Symbol.make("put-preferences"),"the length of the name list does not match the length of the value list","name list length",M8.length(names1456),"value list length",M8.length(vals1457),"name list",names1456,"value list",vals1457);}if_res767;var or_part1464 = filename1459;if (or_part1464) {var if_res768 = or_part1464;} else {var if_res768 = M8.find_system_path($rjs_core.Symbol.make("pref-file"));}var filename1463 = if_res768;var let_result769 = M8.split_path(filename1463);var base1465 = let_result769.getAt(0);var name1466 = let_result769.getAt(1);var dir_p1467 = let_result769.getAt(2);if (M8.symbol_p(base1465)) {var if_res770 = M8.current_directory();} else {var if_res770 = base1465;}var dir1468 = if_res770;if (M8.directory_exists_p(dir1468)) {var if_res771 = M8.rvoid();} else {var if_res771 = make_directory_times_(dir1468);}if_res771;var let_result772 = M8.values(filename1463,make_lock_file_name(dir1468,name1466),dir1468);var pref_file1460 = let_result772.getAt(0);var lock_file1461 = let_result772.getAt(1);var pref_dir1462 = let_result772.getAt(2);return call_with_preference_file_lock($rjs_core.Symbol.make("put-preferences"),$rjs_core.Symbol.make("exclusive"),function() {return lock_file1461;},function() {var f1469 = get_prefs(true,filename1459,false,false);var loop1470 = function(f1471, a1472) {if (M8.null_p(f1471)) {var if_res774 = M11.alt_reverse(M8.append(M6.map(M8.list,names1456,vals1457),a1472));} else {if (M7.memq(M8.caar(f1471),names1456)) {var if_res773 = loop1470(M8.cdr(f1471),a1472);} else {var if_res773 = loop1470(M8.cdr(f1471),M8.cons(M8.car(f1471),a1472));}var if_res774 = if_res773;}return if_res774;};f1469 = loop1470(f1469,M8.rnull);if (M8.file_exists_p(pref_file1460)) {var if_res775 = pref_file1460;} else {var if_res775 = false;}var tmp_file1473 = make_temporary_file_by_proc("TMPPREF~a",if_res775,pref_dir1462);var with_handlers_predicate2551474 = M8.exn_fail_p;var with_handlers_handler2561475 = function(exn1476) {var with_handlers_predicate2571477 = M8.exn_fail_filesystem_p;var with_handlers_handler2581478 = M8.rvoid;var bpz1479 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);M9.__rjs_quoted__.call_handled_body(bpz1479,function(e1480) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1480,bpz1479,M8.list(M8.cons(with_handlers_predicate2571477,with_handlers_handler2581478)));},function() {return M8.delete_file(tmp_file1473);});return M8.raise(exn1476);};var bpz1481 = M8.continuation_mark_set_first(false,M2.__rjs_quoted__.break_enabled_key);return M9.__rjs_quoted__.call_handled_body(bpz1481,function(e1482) {return M9.__rjs_quoted__.select_handler_by_no_breaks(e1482,bpz1481,M8.list(M8.cons(with_handlers_predicate2551474,with_handlers_handler2561475)));},function() {var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__254141483 = M1.__rjs_quoted__.with_output_to_file56;var tmp_file2591484 = tmp_file1473;var temp2601485 = $rjs_core.Symbol.make("truncate/replace");var temp2611486 = function() {return with_pref_params(function() {var __context778 = $rjs_core.Marks.getFrames();var __context779;try {__context779 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M2.parameterization_key,M2.extend_parameterization(M8.continuation_mark_set_first(false,M2.parameterization_key),M8.print_unreadable,false));M8.printf("(\n");M6.for_each(function(a1487) {if (M8.list_p(M8.cadr(a1487))) {var if_res776 = M8._lt_(4,M8.length(M8.cadr(a1487)));} else {var if_res776 = false;}if (if_res776) {M8.printf(" (~s\n  (\n",M8.car(a1487));M6.for_each(function(i1488) {return M8.printf("   ~s\n",i1488);},M8.cadr(a1487));var if_res777 = M8.printf("  ))\n");} else {var if_res777 = M8.printf(" ~s\n",a1487);}return if_res777;},f1469);var __wcm_result780 = M8.printf(")\n");} finally {$rjs_core.Marks.updateFrame(__context778,__context779);}return __wcm_result780;});};if (M8.variable_reference_constant_p(M1.__rjs_quoted__.with_output_to_file56)) {var if_res782 = M1.__rjs_quoted__.with_output_to_file54(temp2601485,true,false,false,tmp_file2591484,temp2611486);} else {var if_res782 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__254141483,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists')),M8.list(temp2601485),tmp_file2591484,temp2611486);}if_res782;var or_part1489 = filename1459;if (or_part1489) {var if_res783 = or_part1489;} else {var if_res783 = M8.find_system_path($rjs_core.Symbol.make("pref-file"));}pref_cache_install_bang_(M8.path__gt_complete_path(if_res783),tmp_file1473,f1469);return M8.rename_file_or_directory(tmp_file1473,pref_file1460,true);});},lock_there1458);};var cl784 = function(names1490, vals1491) {return put_preferences821449(names1490,vals1491,false,false,false,false);};var cl785 = function(names1492, vals1493, lock_there1494, filename771495) {return put_preferences821449(names1492,vals1493,lock_there1494,filename771495,true,true);};var cl786 = function(names1496, vals1497, lock_there761498) {return put_preferences821449(names1496,vals1497,lock_there761498,false,true,false);};var put_preferences = $rjs_core.attachProcedureArity(function() {var fixed_lam787 = {'2':cl784,'4':cl785,'3':cl786}[arguments.length];if (fixed_lam787!==undefined) {return fixed_lam787.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2,3,4]);var fold_files901499 = function(f881500, init891501, path841502, follow_links_p851503, path861504, follow_links_p871505) {var f1506 = f881500;var init1507 = init891501;if (path861504) {var if_res788 = path841502;} else {var if_res788 = false;}var path1508 = if_res788;if (follow_links_p871505) {var if_res789 = follow_links_p851503;} else {var if_res789 = true;}var follow_links_p1509 = if_res789;var do_path1510 = function(path1512, acc1513) {if (M8.not(follow_links_p1509)) {var if_res790 = M8.link_exists_p(path1512);} else {var if_res790 = false;}if (if_res790) {var cl791 = function(v1514) {return v1514;};var cl792 = function(v1515, _1516) {return v1515;};var if_res808 = M8.call_with_values(function() {return f1506(path1512,$rjs_core.Symbol.make("link"),acc1513);},$rjs_core.attachProcedureArity(function() {var fixed_lam793 = {'1':cl791,'2':cl792}[arguments.length];if (fixed_lam793!==undefined) {return fixed_lam793.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]));} else {if (M8.directory_exists_p(path1512)) {var core2651517 = function(acc2641518, descend_p2621519, descend_p2631520) {var acc1521 = acc2641518;if (descend_p2631520) {var if_res794 = descend_p2621519;} else {var if_res794 = true;}var descend_p1522 = if_res794;if (descend_p1522) {var if_res795 = do_paths1511(M6.map(function(p1523) {return M8.build_path(path1512,p1523);},M1._directory_list(path1512)),acc1521);} else {var if_res795 = acc1521;}return if_res795;};var cl796 = function(acc1524) {return core2651517(acc1524,false,false);};var cl797 = function(acc1525, descend_p2621526) {return core2651517(acc1525,descend_p2621526,true);};var if_res807 = M8.call_with_values(function() {return f1506(path1512,$rjs_core.Symbol.make("dir"),acc1513);},$rjs_core.attachProcedureArity(function() {var fixed_lam798 = {'1':cl796,'2':cl797}[arguments.length];if (fixed_lam798!==undefined) {return fixed_lam798.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]));} else {if (M8.file_exists_p(path1512)) {var cl799 = function(v1527) {return v1527;};var cl800 = function(v1528, _1529) {return v1528;};var if_res806 = M8.call_with_values(function() {return f1506(path1512,$rjs_core.Symbol.make("file"),acc1513);},$rjs_core.attachProcedureArity(function() {var fixed_lam801 = {'1':cl799,'2':cl800}[arguments.length];if (fixed_lam801!==undefined) {return fixed_lam801.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]));} else {if (M8.link_exists_p(path1512)) {var cl802 = function(v1530) {return v1530;};var cl803 = function(v1531, _1532) {return v1531;};var if_res805 = M8.call_with_values(function() {return f1506(path1512,$rjs_core.Symbol.make("link"),acc1513);},$rjs_core.attachProcedureArity(function() {var fixed_lam804 = {'1':cl802,'2':cl803}[arguments.length];if (fixed_lam804!==undefined) {return fixed_lam804.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]));} else {var if_res805 = M8.error($rjs_core.Symbol.make("fold-files"),"path disappeared: ~e",path1512);}var if_res806 = if_res805;}var if_res807 = if_res806;}var if_res808 = if_res807;}return if_res808;};var do_paths1511 = function(paths1533, acc1534) {if (M8.null_p(paths1533)) {var if_res809 = acc1534;} else {var if_res809 = do_paths1511(M8.cdr(paths1533),do_path1510(M8.car(paths1533),acc1534));}return if_res809;};var to_path1535 = function(s1536) {if (M8.path_p(s1536)) {var if_res810 = s1536;} else {var if_res810 = M8.string__gt_path(s1536);}return if_res810;};if (path1508) {var if_res811 = do_path1510(to_path1535(path1508),init1507);} else {var if_res811 = do_paths1511(M1._directory_list(),init1507);}return if_res811;};var cl812 = function(f1537, init1538) {return fold_files901499(f1537,init1538,false,false,false,false);};var cl813 = function(f1539, init1540, path1541, follow_links_p851542) {return fold_files901499(f1539,init1540,path1541,follow_links_p851542,true,true);};var cl814 = function(f1543, init1544, path841545) {return fold_files901499(f1543,init1544,path841545,false,true,false);};var fold_files = $rjs_core.attachProcedureArity(function() {var fixed_lam815 = {'2':cl812,'4':cl813,'3':cl814}[arguments.length];if (fixed_lam815!==undefined) {return fixed_lam815.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2,3,4]);var find_files99 = function(follow_links_p921546, follow_links_p941547, skip_filtered_directory_p931548, skip_filtered_directory_p951549, f981550, path961551, path971552) {var f1553 = f981550;if (path971552) {var if_res816 = path961551;} else {var if_res816 = false;}var path1554 = if_res816;if (follow_links_p941547) {var if_res817 = follow_links_p921546;} else {var if_res817 = true;}var follow_links_p1555 = if_res817;if (skip_filtered_directory_p951549) {var if_res818 = skip_filtered_directory_p931548;} else {var if_res818 = false;}var skip_filtered_directory_p1556 = if_res818;return M11.alt_reverse(fold_files(function(path1557, kind1558, acc1559) {if (f1553(path1557)) {var if_res821 = M8.cons(path1557,acc1559);} else {if (skip_filtered_directory_p1556) {var if_res819 = M8.eq_p(kind1558,$rjs_core.Symbol.make("dir"));} else {var if_res819 = false;}if (if_res819) {var if_res820 = M8.values(acc1559,false);} else {var if_res820 = acc1559;}var if_res821 = if_res820;}return if_res821;},M8.rnull,path1554,follow_links_p1555));};var unpack100 = function(given_kws1560, given_args1561, f981562, path961563, path971564) {if (M8.pair_p(given_kws1560)) {var if_res822 = M8.eq_p($rjs_core.Keyword.make('#:follow-links?'),M8.car(given_kws1560));} else {var if_res822 = false;}var follow_links_p941565 = if_res822;if (follow_links_p941565) {var if_res823 = M8.car(given_args1561);} else {var if_res823 = M8.rvoid();}var follow_links_p921566 = if_res823;if (follow_links_p941565) {var if_res824 = M8.cdr(given_kws1560);} else {var if_res824 = given_kws1560;}var given_kws1567 = if_res824;if (follow_links_p941565) {var if_res825 = M8.cdr(given_args1561);} else {var if_res825 = given_args1561;}var given_args1568 = if_res825;var skip_filtered_directory_p951569 = M8.pair_p(given_kws1567);if (skip_filtered_directory_p951569) {var if_res826 = M8.car(given_args1568);} else {var if_res826 = M8.rvoid();}var skip_filtered_directory_p931570 = if_res826;return find_files99(follow_links_p921566,follow_links_p941565,skip_filtered_directory_p931570,skip_filtered_directory_p951569,f981562,path961563,path971564);};var cl830 = function(given_kws1577, given_args1578, f1579) {return unpack100(given_kws1577,given_args1578,f1579,false,false);};var cl831 = function(given_kws1580, given_args1581, f1582, path961583) {return unpack100(given_kws1580,given_args1581,f1582,path961583,true);};var temp833 = $rjs_core.attachProcedureArity(function() {var fixed_lam832 = {'3':cl830,'4':cl831}[arguments.length];if (fixed_lam832!==undefined) {return fixed_lam832.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3,4]);var cl827 = function(f1585) {return unpack100(M8.rnull,M8.rnull,f1585,false,false);};var cl828 = function(f1586, path961587) {return unpack100(M8.rnull,M8.rnull,f1586,path961587,true);};var find_files1584 = $rjs_core.attachProcedureArity(function() {var fixed_lam829 = {'1':cl827,'2':cl828}[arguments.length];if (fixed_lam829!==undefined) {return fixed_lam829.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]);var find_files101 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1571, given_argc1572) {if (M8._gt__eq_(given_argc1572,3)) {var if_res834 = M8._lt__eq_(given_argc1572,4);} else {var if_res834 = false;}if (if_res834) {var l11573 = given_kws1571;if (M8.null_p(l11573)) {var if_res836 = l11573;} else {if (M8.eq_p(M8.car(l11573),$rjs_core.Keyword.make('#:follow-links?'))) {var if_res835 = M8.cdr(l11573);} else {var if_res835 = l11573;}var if_res836 = if_res835;}var l11574 = if_res836;var l11575 = l11574;if (M8.null_p(l11575)) {var if_res838 = l11575;} else {if (M8.eq_p(M8.car(l11575),$rjs_core.Keyword.make('#:skip-filtered-directory?'))) {var if_res837 = M8.cdr(l11575);} else {var if_res837 = l11575;}var if_res838 = if_res837;}var l11576 = if_res838;var if_res839 = M8.null_p(l11576);} else {var if_res839 = false;}return if_res839;},temp833,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:follow-links?'), $rjs_core.Keyword.make('#:skip-filtered-directory?')),find_files1584);var pathlist_closure107 = function(follow_links_p1021588, follow_links_p1041589, path_filter1031590, path_filter1051591, paths1061592) {var paths1593 = paths1061592;if (follow_links_p1041589) {var if_res840 = follow_links_p1021588;} else {var if_res840 = false;}var follow_links_p1594 = if_res840;if (path_filter1051591) {var if_res841 = path_filter1031590;} else {var if_res841 = false;}var path_filter1595 = if_res841;var loop1596 = function(paths1597, r1598) {if (M8.null_p(paths1597)) {var if_res859 = M11.alt_reverse(r1598);} else {var loop21599 = function(path1600, new1601) {var let_result855 = M8.split_path(path1600);var base1602 = let_result855.getAt(0);var name1603 = let_result855.getAt(1);var dir_p1604 = let_result855.getAt(2);if (M8.path_p(base1602)) {var or_part1605 = M7.member(base1602,r1598);if (or_part1605) {var if_res856 = or_part1605;} else {var if_res856 = M7.member(base1602,paths1597);}if (if_res856) {var if_res857 = new1601;} else {var if_res857 = M8.cons(base1602,new1601);}var if_res858 = loop21599(base1602,if_res857);} else {var if_res858 = loop1596(M8.cdr(paths1597),M8.append(M11.alt_reverse(new1601),r1598));}return if_res858;};var temp854 = M8.car(paths1597);if (M8.not(follow_links_p1594)) {var if_res848 = M8.link_exists_p(M8.car(paths1597));} else {var if_res848 = false;}if (if_res848) {var if_res853 = M8.list(M8.car(paths1597));} else {if (M8.file_exists_p(M8.car(paths1597))) {var if_res852 = M8.list(M8.car(paths1597));} else {if (M8.directory_exists_p(M8.car(paths1597))) {var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__302871606 = find_files101;var or_part1611 = path_filter1595;if (or_part1611) {var if_res849 = or_part1611;} else {var if_res849 = M8.rvoid;}var temp2671607 = if_res849;var temp2681608 = M8.path__gt_directory_path(M8.car(paths1597));var temp2691609 = true;var follow_links_p2701610 = follow_links_p1594;if (M8.variable_reference_constant_p(find_files101)) {var if_res850 = find_files99(follow_links_p2701610,true,temp2691609,true,temp2671607,temp2681608,true);} else {var if_res850 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__302871606,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:follow-links?'), $rjs_core.Keyword.make('#:skip-filtered-directory?')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:follow-links?'), $rjs_core.Keyword.make('#:skip-filtered-directory?')),M8.list(follow_links_p2701610,temp2691609),temp2671607,temp2681608);}var if_res851 = if_res850;} else {var if_res851 = M8.error($rjs_core.Symbol.make("pathlist-closure"),"file/directory not found: ~a",M8.car(paths1597));}var if_res852 = if_res851;}var if_res853 = if_res852;}var if_res859 = loop21599(temp854,if_res853);}return if_res859;};return loop1596(M6.map(function(p1612) {var loop1613 = function(p1614) {if (follow_links_p1594) {var if_res842 = M8.link_exists_p(p1614);} else {var if_res842 = false;}if (if_res842) {var p21615 = M8.resolve_path(p1614);if (M8.relative_path_p(p21615)) {var let_result843 = M8.split_path(p1614);var base1616 = let_result843.getAt(0);var name1617 = let_result843.getAt(1);var dir_p1618 = let_result843.getAt(2);if (dir_p1618) {var if_res845 = M8.path__gt_directory_path;} else {var if_res845 = M8.values;}if (M8.path_p(base1616)) {var if_res844 = M8.build_path(base1616,p21615);} else {var if_res844 = p21615;}var if_res846 = loop1613(if_res845(if_res844));} else {var if_res846 = loop1613(p21615);}var if_res847 = if_res846;} else {var if_res847 = p1614;}return if_res847;};return M8.simplify_path(loop1613(p1612),false);},paths1593),$rjs_core.Pair.Empty);};var unpack108 = function(given_kws1619, given_args1620, paths1061621) {if (M8.pair_p(given_kws1619)) {var if_res860 = M8.eq_p($rjs_core.Keyword.make('#:follow-links?'),M8.car(given_kws1619));} else {var if_res860 = false;}var follow_links_p1041622 = if_res860;if (follow_links_p1041622) {var if_res861 = M8.car(given_args1620);} else {var if_res861 = M8.rvoid();}var follow_links_p1021623 = if_res861;if (follow_links_p1041622) {var if_res862 = M8.cdr(given_kws1619);} else {var if_res862 = given_kws1619;}var given_kws1624 = if_res862;if (follow_links_p1041622) {var if_res863 = M8.cdr(given_args1620);} else {var if_res863 = given_args1620;}var given_args1625 = if_res863;var path_filter1051626 = M8.pair_p(given_kws1624);if (path_filter1051626) {var if_res864 = M8.car(given_args1625);} else {var if_res864 = M8.rvoid();}var path_filter1031627 = if_res864;return pathlist_closure107(follow_links_p1021623,follow_links_p1041622,path_filter1031627,path_filter1051626,paths1061621);};var cl867 = function(given_kws1634, given_args1635, paths1636) {return unpack108(given_kws1634,given_args1635,paths1636);};var temp869 = $rjs_core.attachProcedureArity(function() {var fixed_lam868 = {'3':cl867}[arguments.length];if (fixed_lam868!==undefined) {return fixed_lam868.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3]);var cl865 = function(paths1638) {return unpack108(M8.rnull,M8.rnull,paths1638);};var pathlist_closure1637 = $rjs_core.attachProcedureArity(function() {var fixed_lam866 = {'1':cl865}[arguments.length];if (fixed_lam866!==undefined) {return fixed_lam866.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1]);var pathlist_closure109 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1628, given_argc1629) {if (M8._eq_(given_argc1629,3)) {var l11630 = given_kws1628;if (M8.null_p(l11630)) {var if_res871 = l11630;} else {if (M8.eq_p(M8.car(l11630),$rjs_core.Keyword.make('#:follow-links?'))) {var if_res870 = M8.cdr(l11630);} else {var if_res870 = l11630;}var if_res871 = if_res870;}var l11631 = if_res871;var l11632 = l11631;if (M8.null_p(l11632)) {var if_res873 = l11632;} else {if (M8.eq_p(M8.car(l11632),$rjs_core.Keyword.make('#:path-filter'))) {var if_res872 = M8.cdr(l11632);} else {var if_res872 = l11632;}var if_res873 = if_res872;}var l11633 = if_res873;var if_res874 = M8.null_p(l11633);} else {var if_res874 = false;}return if_res874;},temp869,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:follow-links?'), $rjs_core.Keyword.make('#:path-filter')),pathlist_closure1637);var check_path = function(who1639, f1640) {if (M10.path_string_p(f1640)) {var if_res875 = M8.rvoid();} else {var if_res875 = M8.raise_argument_error(who1639,"path-string?",f1640);}return if_res875;};var check_file_mode = function(who1641, file_mode1642) {if (M7.memq(file_mode1642,$rjs_core.Pair.makeList($rjs_core.Symbol.make("binary"), $rjs_core.Symbol.make("text")))) {var if_res876 = M8.rvoid();} else {var if_res876 = M8.raise_argument_error(who1641,"(or/c 'binary 'text)",file_mode1642);}return if_res876;};var file__gt_x = function(who1643, f1644, file_mode1645, read_x1646, x_append1647) {check_path(who1643,f1644);check_file_mode(who1643,file_mode1645);var sz1648 = M8.file_size(f1644);var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__313931649 = M1.__rjs_quoted__.call_with_input_file_times_63;var f2711650 = f1644;var file_mode2721651 = file_mode1645;var temp2731652 = function(in1653) {var s1654 = read_x1646(sz1648,in1653);var loop1656 = function() {var l1657 = read_x1646(4096,in1653);if (M8.eof_object_p(l1657)) {var if_res877 = M8.rnull;} else {var if_res877 = M8.cons(l1657,loop1656());}return if_res877;};var more1655 = loop1656();if (M8.null_p(more1655)) {var if_res878 = s1654;} else {var if_res878 = M8.apply(x_append1647,M8.cons(s1654,more1655));}return if_res878;};if (M8.variable_reference_constant_p(M1.__rjs_quoted__.call_with_input_file_times_63)) {var if_res879 = M1.__rjs_quoted__.call_with_input_file_times_61(file_mode2721651,true,f2711650,temp2731652);} else {var if_res879 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__313931649,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),M8.list(file_mode2721651),f2711650,temp2731652);}return if_res879;};var file__gt_string113 = function(mode1101658, mode1111659, f1121660) {var f1661 = f1121660;if (mode1111659) {var if_res880 = mode1101658;} else {var if_res880 = $rjs_core.Symbol.make("binary");}var mode1662 = if_res880;return file__gt_x($rjs_core.Symbol.make("file->string"),f1661,mode1662,M8.read_string,M8.string_append);};var unpack114 = function(given_kws1663, given_args1664, f1121665) {var mode1111666 = M8.pair_p(given_kws1663);if (mode1111666) {var if_res881 = M8.car(given_args1664);} else {var if_res881 = M8.rvoid();}var mode1101667 = if_res881;return file__gt_string113(mode1101667,mode1111666,f1121665);};var cl884 = function(given_kws1672, given_args1673, f1674) {return unpack114(given_kws1672,given_args1673,f1674);};var temp886 = $rjs_core.attachProcedureArity(function() {var fixed_lam885 = {'3':cl884}[arguments.length];if (fixed_lam885!==undefined) {return fixed_lam885.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3]);var cl882 = function(f1676) {return unpack114(M8.rnull,M8.rnull,f1676);};var file__gt_string1675 = $rjs_core.attachProcedureArity(function() {var fixed_lam883 = {'1':cl882}[arguments.length];if (fixed_lam883!==undefined) {return fixed_lam883.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1]);var file__gt_string115 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1668, given_argc1669) {if (M8._eq_(given_argc1669,3)) {var l11670 = given_kws1668;if (M8.null_p(l11670)) {var if_res888 = l11670;} else {if (M8.eq_p(M8.car(l11670),$rjs_core.Keyword.make('#:mode'))) {var if_res887 = M8.cdr(l11670);} else {var if_res887 = l11670;}var if_res888 = if_res887;}var l11671 = if_res888;var if_res889 = M8.null_p(l11671);} else {var if_res889 = false;}return if_res889;},temp886,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),file__gt_string1675);var file__gt_bytes119 = function(mode1161677, mode1171678, f1181679) {var f1680 = f1181679;if (mode1171678) {var if_res890 = mode1161677;} else {var if_res890 = $rjs_core.Symbol.make("binary");}var mode1681 = if_res890;return file__gt_x($rjs_core.Symbol.make("file->bytes"),f1680,mode1681,M8.read_bytes,M8.bytes_append);};var unpack120 = function(given_kws1682, given_args1683, f1181684) {var mode1171685 = M8.pair_p(given_kws1682);if (mode1171685) {var if_res891 = M8.car(given_args1683);} else {var if_res891 = M8.rvoid();}var mode1161686 = if_res891;return file__gt_bytes119(mode1161686,mode1171685,f1181684);};var cl894 = function(given_kws1691, given_args1692, f1693) {return unpack120(given_kws1691,given_args1692,f1693);};var temp896 = $rjs_core.attachProcedureArity(function() {var fixed_lam895 = {'3':cl894}[arguments.length];if (fixed_lam895!==undefined) {return fixed_lam895.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3]);var cl892 = function(f1695) {return unpack120(M8.rnull,M8.rnull,f1695);};var file__gt_bytes1694 = $rjs_core.attachProcedureArity(function() {var fixed_lam893 = {'1':cl892}[arguments.length];if (fixed_lam893!==undefined) {return fixed_lam893.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1]);var file__gt_bytes121 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1687, given_argc1688) {if (M8._eq_(given_argc1688,3)) {var l11689 = given_kws1687;if (M8.null_p(l11689)) {var if_res898 = l11689;} else {if (M8.eq_p(M8.car(l11689),$rjs_core.Keyword.make('#:mode'))) {var if_res897 = M8.cdr(l11689);} else {var if_res897 = l11689;}var if_res898 = if_res897;}var l11690 = if_res898;var if_res899 = M8.null_p(l11690);} else {var if_res899 = false;}return if_res899;},temp896,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),file__gt_bytes1694);var file__gt_value125 = function(mode1221696, mode1231697, f1241698) {var f1699 = f1241698;if (mode1231697) {var if_res900 = mode1221696;} else {var if_res900 = $rjs_core.Symbol.make("binary");}var file_mode1700 = if_res900;check_path($rjs_core.Symbol.make("file->value"),f1699);check_file_mode($rjs_core.Symbol.make("file->value"),file_mode1700);var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__321591701 = M1.__rjs_quoted__.call_with_input_file_times_63;var f2741702 = f1699;var file_mode2751703 = file_mode1700;var read2761704 = M8.read;if (M8.variable_reference_constant_p(M1.__rjs_quoted__.call_with_input_file_times_63)) {var if_res901 = M1.__rjs_quoted__.call_with_input_file_times_61(file_mode2751703,true,f2741702,read2761704);} else {var if_res901 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__321591701,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),M8.list(file_mode2751703),f2741702,read2761704);}return if_res901;};var unpack126 = function(given_kws1705, given_args1706, f1241707) {var mode1231708 = M8.pair_p(given_kws1705);if (mode1231708) {var if_res902 = M8.car(given_args1706);} else {var if_res902 = M8.rvoid();}var mode1221709 = if_res902;return file__gt_value125(mode1221709,mode1231708,f1241707);};var cl905 = function(given_kws1714, given_args1715, f1716) {return unpack126(given_kws1714,given_args1715,f1716);};var temp907 = $rjs_core.attachProcedureArity(function() {var fixed_lam906 = {'3':cl905}[arguments.length];if (fixed_lam906!==undefined) {return fixed_lam906.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3]);var cl903 = function(f1718) {return unpack126(M8.rnull,M8.rnull,f1718);};var file__gt_value1717 = $rjs_core.attachProcedureArity(function() {var fixed_lam904 = {'1':cl903}[arguments.length];if (fixed_lam904!==undefined) {return fixed_lam904.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1]);var file__gt_value127 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1710, given_argc1711) {if (M8._eq_(given_argc1711,3)) {var l11712 = given_kws1710;if (M8.null_p(l11712)) {var if_res909 = l11712;} else {if (M8.eq_p(M8.car(l11712),$rjs_core.Keyword.make('#:mode'))) {var if_res908 = M8.cdr(l11712);} else {var if_res908 = l11712;}var if_res909 = if_res908;}var l11713 = if_res909;var if_res910 = M8.null_p(l11713);} else {var if_res910 = false;}return if_res910;},temp907,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),file__gt_value1717);var file__gt_list133 = function(mode1281719, mode1291720, f1321721, r1301722, r1311723) {var f1724 = f1321721;if (r1311723) {var if_res911 = r1301722;} else {var if_res911 = M8.read;}var r1725 = if_res911;if (mode1291720) {var if_res912 = mode1281719;} else {var if_res912 = $rjs_core.Symbol.make("binary");}var file_mode1726 = if_res912;check_path($rjs_core.Symbol.make("file->list"),f1724);check_file_mode($rjs_core.Symbol.make("file->list"),file_mode1726);if (M8.procedure_p(r1725)) {var if_res913 = M8.procedure_arity_includes_p(r1725,1);} else {var if_res913 = false;}if (if_res913) {var if_res914 = M8.rvoid();} else {var if_res914 = M8.raise_argument_error($rjs_core.Symbol.make("file->list"),"(procedure-arity-includes/c 1)",r1725);}if_res914;var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__324791727 = M1.__rjs_quoted__.call_with_input_file_times_63;var f2771728 = f1724;var file_mode2781729 = file_mode1726;var temp2791730 = function(p1731) {var r_times_1734 = r1725;var p_times_1735 = p1731;M16.__rjs_quoted__.check_in_port(r_times_1734,p_times_1735);var producer_times_1732 = function() {return r_times_1734(p_times_1735);};var s1736 = M8.__rjs_quoted__.eof;if (M8.procedure_p(s1736)) {var if_res916 = s1736;} else {if (true) {var if_res915 = function(x1737) {return M8.eq_p(x1737,s1736);};} else {var if_res915 = M8.error($rjs_core.Symbol.make("in-producer"),"stop condition for ~a, got: ~e","multiple values must be a predicate",s1736);}var if_res916 = if_res915;}var stop_p1733 = if_res916;true;var for_loop1738 = function(fold_var1739) {if (true) {var v1740 = producer_times_1732();if (M8.not(stop_p1733(v1740))) {var fold_var1742 = fold_var1739;var fold_var1743 = M8.cons(v1740,fold_var1742);var fold_var1741 = M8.values(fold_var1743);if (true) {var if_res917 = for_loop1738(fold_var1741);} else {var if_res917 = fold_var1741;}var if_res918 = if_res917;} else {var if_res918 = fold_var1739;}var if_res919 = if_res918;} else {var if_res919 = fold_var1739;}return if_res919;};return M11.alt_reverse(for_loop1738(M8.rnull));};if (M8.variable_reference_constant_p(M1.__rjs_quoted__.call_with_input_file_times_63)) {var if_res920 = M1.__rjs_quoted__.call_with_input_file_times_61(file_mode2781729,true,f2771728,temp2791730);} else {var if_res920 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__324791727,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),M8.list(file_mode2781729),f2771728,temp2791730);}return if_res920;};var unpack134 = function(given_kws1744, given_args1745, f1321746, r1301747, r1311748) {var mode1291749 = M8.pair_p(given_kws1744);if (mode1291749) {var if_res921 = M8.car(given_args1745);} else {var if_res921 = M8.rvoid();}var mode1281750 = if_res921;return file__gt_list133(mode1281750,mode1291749,f1321746,r1301747,r1311748);};var cl925 = function(given_kws1755, given_args1756, f1757) {return unpack134(given_kws1755,given_args1756,f1757,false,false);};var cl926 = function(given_kws1758, given_args1759, f1760, r1301761) {return unpack134(given_kws1758,given_args1759,f1760,r1301761,true);};var temp928 = $rjs_core.attachProcedureArity(function() {var fixed_lam927 = {'3':cl925,'4':cl926}[arguments.length];if (fixed_lam927!==undefined) {return fixed_lam927.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3,4]);var cl922 = function(f1763) {return unpack134(M8.rnull,M8.rnull,f1763,false,false);};var cl923 = function(f1764, r1301765) {return unpack134(M8.rnull,M8.rnull,f1764,r1301765,true);};var file__gt_list1762 = $rjs_core.attachProcedureArity(function() {var fixed_lam924 = {'1':cl922,'2':cl923}[arguments.length];if (fixed_lam924!==undefined) {return fixed_lam924.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1,2]);var file__gt_list135 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1751, given_argc1752) {if (M8._gt__eq_(given_argc1752,3)) {var if_res929 = M8._lt__eq_(given_argc1752,4);} else {var if_res929 = false;}if (if_res929) {var l11753 = given_kws1751;if (M8.null_p(l11753)) {var if_res931 = l11753;} else {if (M8.eq_p(M8.car(l11753),$rjs_core.Keyword.make('#:mode'))) {var if_res930 = M8.cdr(l11753);} else {var if_res930 = l11753;}var if_res931 = if_res930;}var l11754 = if_res931;var if_res932 = M8.null_p(l11754);} else {var if_res932 = false;}return if_res932;},temp928,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),file__gt_list1762);var file__gt_x_lines = function(who1766, f1767, line_mode1768, file_mode1769, read_line1770) {check_path(who1766,f1767);M17.check_mode(who1766,line_mode1768);check_file_mode(who1766,file_mode1769);var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__327201771 = M1.__rjs_quoted__.call_with_input_file_times_63;var f2801772 = f1767;var file_mode2811773 = file_mode1769;var temp2821774 = function(p1775) {return M17.port__gt_x_lines(who1766,p1775,line_mode1768,read_line1770);};if (M8.variable_reference_constant_p(M1.__rjs_quoted__.call_with_input_file_times_63)) {var if_res933 = M1.__rjs_quoted__.call_with_input_file_times_61(file_mode2811773,true,f2801772,temp2821774);} else {var if_res933 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__327201771,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:mode')),M8.list(file_mode2811773),f2801772,temp2821774);}return if_res933;};var file__gt_lines141 = function(line_mode1361776, line_mode1381777, mode1371778, mode1391779, f1401780) {var f1781 = f1401780;if (line_mode1381777) {var if_res934 = line_mode1361776;} else {var if_res934 = $rjs_core.Symbol.make("any");}var line_mode1782 = if_res934;if (mode1391779) {var if_res935 = mode1371778;} else {var if_res935 = $rjs_core.Symbol.make("binary");}var file_mode1783 = if_res935;return file__gt_x_lines($rjs_core.Symbol.make("file->lines"),f1781,line_mode1782,file_mode1783,M8.read_line);};var unpack142 = function(given_kws1784, given_args1785, f1401786) {if (M8.pair_p(given_kws1784)) {var if_res936 = M8.eq_p($rjs_core.Keyword.make('#:line-mode'),M8.car(given_kws1784));} else {var if_res936 = false;}var line_mode1381787 = if_res936;if (line_mode1381787) {var if_res937 = M8.car(given_args1785);} else {var if_res937 = M8.rvoid();}var line_mode1361788 = if_res937;if (line_mode1381787) {var if_res938 = M8.cdr(given_kws1784);} else {var if_res938 = given_kws1784;}var given_kws1789 = if_res938;if (line_mode1381787) {var if_res939 = M8.cdr(given_args1785);} else {var if_res939 = given_args1785;}var given_args1790 = if_res939;var mode1391791 = M8.pair_p(given_kws1789);if (mode1391791) {var if_res940 = M8.car(given_args1790);} else {var if_res940 = M8.rvoid();}var mode1371792 = if_res940;return file__gt_lines141(line_mode1361788,line_mode1381787,mode1371792,mode1391791,f1401786);};var cl943 = function(given_kws1799, given_args1800, f1801) {return unpack142(given_kws1799,given_args1800,f1801);};var temp945 = $rjs_core.attachProcedureArity(function() {var fixed_lam944 = {'3':cl943}[arguments.length];if (fixed_lam944!==undefined) {return fixed_lam944.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3]);var cl941 = function(f1803) {return unpack142(M8.rnull,M8.rnull,f1803);};var file__gt_lines1802 = $rjs_core.attachProcedureArity(function() {var fixed_lam942 = {'1':cl941}[arguments.length];if (fixed_lam942!==undefined) {return fixed_lam942.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1]);var file__gt_lines143 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1793, given_argc1794) {if (M8._eq_(given_argc1794,3)) {var l11795 = given_kws1793;if (M8.null_p(l11795)) {var if_res947 = l11795;} else {if (M8.eq_p(M8.car(l11795),$rjs_core.Keyword.make('#:line-mode'))) {var if_res946 = M8.cdr(l11795);} else {var if_res946 = l11795;}var if_res947 = if_res946;}var l11796 = if_res947;var l11797 = l11796;if (M8.null_p(l11797)) {var if_res949 = l11797;} else {if (M8.eq_p(M8.car(l11797),$rjs_core.Keyword.make('#:mode'))) {var if_res948 = M8.cdr(l11797);} else {var if_res948 = l11797;}var if_res949 = if_res948;}var l11798 = if_res949;var if_res950 = M8.null_p(l11798);} else {var if_res950 = false;}return if_res950;},temp945,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:line-mode'), $rjs_core.Keyword.make('#:mode')),file__gt_lines1802);var file__gt_bytes_lines149 = function(line_mode1441804, line_mode1461805, mode1451806, mode1471807, f1481808) {var f1809 = f1481808;if (line_mode1461805) {var if_res951 = line_mode1441804;} else {var if_res951 = $rjs_core.Symbol.make("any");}var line_mode1810 = if_res951;if (mode1471807) {var if_res952 = mode1451806;} else {var if_res952 = $rjs_core.Symbol.make("binary");}var file_mode1811 = if_res952;return file__gt_x_lines($rjs_core.Symbol.make("file->bytes-lines"),f1809,line_mode1810,file_mode1811,M8.read_bytes_line);};var unpack150 = function(given_kws1812, given_args1813, f1481814) {if (M8.pair_p(given_kws1812)) {var if_res953 = M8.eq_p($rjs_core.Keyword.make('#:line-mode'),M8.car(given_kws1812));} else {var if_res953 = false;}var line_mode1461815 = if_res953;if (line_mode1461815) {var if_res954 = M8.car(given_args1813);} else {var if_res954 = M8.rvoid();}var line_mode1441816 = if_res954;if (line_mode1461815) {var if_res955 = M8.cdr(given_kws1812);} else {var if_res955 = given_kws1812;}var given_kws1817 = if_res955;if (line_mode1461815) {var if_res956 = M8.cdr(given_args1813);} else {var if_res956 = given_args1813;}var given_args1818 = if_res956;var mode1471819 = M8.pair_p(given_kws1817);if (mode1471819) {var if_res957 = M8.car(given_args1818);} else {var if_res957 = M8.rvoid();}var mode1451820 = if_res957;return file__gt_bytes_lines149(line_mode1441816,line_mode1461815,mode1451820,mode1471819,f1481814);};var cl960 = function(given_kws1827, given_args1828, f1829) {return unpack150(given_kws1827,given_args1828,f1829);};var temp962 = $rjs_core.attachProcedureArity(function() {var fixed_lam961 = {'3':cl960}[arguments.length];if (fixed_lam961!==undefined) {return fixed_lam961.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[3]);var cl958 = function(f1831) {return unpack150(M8.rnull,M8.rnull,f1831);};var file__gt_bytes_lines1830 = $rjs_core.attachProcedureArity(function() {var fixed_lam959 = {'1':cl958}[arguments.length];if (fixed_lam959!==undefined) {return fixed_lam959.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[1]);var file__gt_bytes_lines151 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1821, given_argc1822) {if (M8._eq_(given_argc1822,3)) {var l11823 = given_kws1821;if (M8.null_p(l11823)) {var if_res964 = l11823;} else {if (M8.eq_p(M8.car(l11823),$rjs_core.Keyword.make('#:line-mode'))) {var if_res963 = M8.cdr(l11823);} else {var if_res963 = l11823;}var if_res964 = if_res963;}var l11824 = if_res964;var l11825 = l11824;if (M8.null_p(l11825)) {var if_res966 = l11825;} else {if (M8.eq_p(M8.car(l11825),$rjs_core.Keyword.make('#:mode'))) {var if_res965 = M8.cdr(l11825);} else {var if_res965 = l11825;}var if_res966 = if_res965;}var l11826 = if_res966;var if_res967 = M8.null_p(l11826);} else {var if_res967 = false;}return if_res967;},temp962,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:line-mode'), $rjs_core.Keyword.make('#:mode')),file__gt_bytes_lines1830);var __gt_file = function(who1832, f1833, mode1834, exists1835, write1836) {if (M10.path_string_p(f1833)) {var if_res968 = M8.rvoid();} else {var if_res968 = M8.raise_argument_error(who1832,"path-string?",f1833);}if_res968;if (M7.memq(mode1834,$rjs_core.Pair.makeList($rjs_core.Symbol.make("binary"), $rjs_core.Symbol.make("text")))) {var if_res969 = M8.rvoid();} else {var if_res969 = M8.raise_argument_error(who1832,"(or/c 'binary 'text)",mode1834);}if_res969;if (M7.memq(exists1835,$rjs_core.Pair.makeList($rjs_core.Symbol.make("error"), $rjs_core.Symbol.make("append"), $rjs_core.Symbol.make("update"), $rjs_core.Symbol.make("replace"), $rjs_core.Symbol.make("truncate"), $rjs_core.Symbol.make("truncate/replace")))) {var if_res970 = M8.rvoid();} else {var if_res970 = M8.raise_argument_error(who1832,"(or/c 'error 'append 'update 'replace 'truncate 'truncate/replace)",exists1835);}if_res970;var _dot__dot__dot_ects_by_racket_by_file_dot_rkt__335371837 = M1.__rjs_quoted__.call_with_output_file_times_72;var f2831838 = f1833;var mode2841839 = mode1834;var exists2851840 = exists1835;var write2861841 = write1836;if (M8.variable_reference_constant_p(M1.__rjs_quoted__.call_with_output_file_times_72)) {var if_res971 = M1.__rjs_quoted__.call_with_output_file_times_70(exists2851840,true,mode2841839,true,f2831838,write2861841);} else {var if_res971 = M8.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,_dot__dot__dot_ects_by_racket_by_file_dot_rkt__335371837,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists'), $rjs_core.Keyword.make('#:mode')),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists'), $rjs_core.Keyword.make('#:mode')),M8.list(exists2851840,mode2841839),f2831838,write2861841);}return if_res971;};var display_to_file158 = function(exists1531842, exists1551843, mode1521844, mode1541845, s1561846, f1571847) {var s1848 = s1561846;var f1849 = f1571847;if (mode1541845) {var if_res972 = mode1521844;} else {var if_res972 = $rjs_core.Symbol.make("binary");}var mode1850 = if_res972;if (exists1551843) {var if_res973 = exists1531842;} else {var if_res973 = $rjs_core.Symbol.make("error");}var exists1851 = if_res973;return __gt_file($rjs_core.Symbol.make("display-to-file"),f1849,mode1850,exists1851,function(p1852) {return M8.display(s1848,p1852);});};var unpack159 = function(given_kws1853, given_args1854, s1561855, f1571856) {if (M8.pair_p(given_kws1853)) {var if_res974 = M8.eq_p($rjs_core.Keyword.make('#:exists'),M8.car(given_kws1853));} else {var if_res974 = false;}var exists1551857 = if_res974;if (exists1551857) {var if_res975 = M8.car(given_args1854);} else {var if_res975 = M8.rvoid();}var exists1531858 = if_res975;if (exists1551857) {var if_res976 = M8.cdr(given_kws1853);} else {var if_res976 = given_kws1853;}var given_kws1859 = if_res976;if (exists1551857) {var if_res977 = M8.cdr(given_args1854);} else {var if_res977 = given_args1854;}var given_args1860 = if_res977;var mode1541861 = M8.pair_p(given_kws1859);if (mode1541861) {var if_res978 = M8.car(given_args1860);} else {var if_res978 = M8.rvoid();}var mode1521862 = if_res978;return display_to_file158(exists1531858,exists1551857,mode1521862,mode1541861,s1561855,f1571856);};var cl981 = function(given_kws1869, given_args1870, s1871, f1872) {return unpack159(given_kws1869,given_args1870,s1871,f1872);};var temp983 = $rjs_core.attachProcedureArity(function() {var fixed_lam982 = {'4':cl981}[arguments.length];if (fixed_lam982!==undefined) {return fixed_lam982.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4]);var cl979 = function(s1874, f1875) {return unpack159(M8.rnull,M8.rnull,s1874,f1875);};var display_to_file1873 = $rjs_core.attachProcedureArity(function() {var fixed_lam980 = {'2':cl979}[arguments.length];if (fixed_lam980!==undefined) {return fixed_lam980.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2]);var display_to_file160 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1863, given_argc1864) {if (M8._eq_(given_argc1864,4)) {var l11865 = given_kws1863;if (M8.null_p(l11865)) {var if_res985 = l11865;} else {if (M8.eq_p(M8.car(l11865),$rjs_core.Keyword.make('#:exists'))) {var if_res984 = M8.cdr(l11865);} else {var if_res984 = l11865;}var if_res985 = if_res984;}var l11866 = if_res985;var l11867 = l11866;if (M8.null_p(l11867)) {var if_res987 = l11867;} else {if (M8.eq_p(M8.car(l11867),$rjs_core.Keyword.make('#:mode'))) {var if_res986 = M8.cdr(l11867);} else {var if_res986 = l11867;}var if_res987 = if_res986;}var l11868 = if_res987;var if_res988 = M8.null_p(l11868);} else {var if_res988 = false;}return if_res988;},temp983,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists'), $rjs_core.Keyword.make('#:mode')),display_to_file1873);var write_to_file167 = function(exists1621876, exists1641877, mode1611878, mode1631879, s1651880, f1661881) {var s1882 = s1651880;var f1883 = f1661881;if (mode1631879) {var if_res989 = mode1611878;} else {var if_res989 = $rjs_core.Symbol.make("binary");}var mode1884 = if_res989;if (exists1641877) {var if_res990 = exists1621876;} else {var if_res990 = $rjs_core.Symbol.make("error");}var exists1885 = if_res990;return __gt_file($rjs_core.Symbol.make("write-to-file"),f1883,mode1884,exists1885,function(p1886) {return M8.write(s1882,p1886);});};var unpack168 = function(given_kws1887, given_args1888, s1651889, f1661890) {if (M8.pair_p(given_kws1887)) {var if_res991 = M8.eq_p($rjs_core.Keyword.make('#:exists'),M8.car(given_kws1887));} else {var if_res991 = false;}var exists1641891 = if_res991;if (exists1641891) {var if_res992 = M8.car(given_args1888);} else {var if_res992 = M8.rvoid();}var exists1621892 = if_res992;if (exists1641891) {var if_res993 = M8.cdr(given_kws1887);} else {var if_res993 = given_kws1887;}var given_kws1893 = if_res993;if (exists1641891) {var if_res994 = M8.cdr(given_args1888);} else {var if_res994 = given_args1888;}var given_args1894 = if_res994;var mode1631895 = M8.pair_p(given_kws1893);if (mode1631895) {var if_res995 = M8.car(given_args1894);} else {var if_res995 = M8.rvoid();}var mode1611896 = if_res995;return write_to_file167(exists1621892,exists1641891,mode1611896,mode1631895,s1651889,f1661890);};var cl998 = function(given_kws1903, given_args1904, s1905, f1906) {return unpack168(given_kws1903,given_args1904,s1905,f1906);};var temp1000 = $rjs_core.attachProcedureArity(function() {var fixed_lam999 = {'4':cl998}[arguments.length];if (fixed_lam999!==undefined) {return fixed_lam999.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4]);var cl996 = function(s1908, f1909) {return unpack168(M8.rnull,M8.rnull,s1908,f1909);};var write_to_file1907 = $rjs_core.attachProcedureArity(function() {var fixed_lam997 = {'2':cl996}[arguments.length];if (fixed_lam997!==undefined) {return fixed_lam997.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2]);var write_to_file169 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1897, given_argc1898) {if (M8._eq_(given_argc1898,4)) {var l11899 = given_kws1897;if (M8.null_p(l11899)) {var if_res1002 = l11899;} else {if (M8.eq_p(M8.car(l11899),$rjs_core.Keyword.make('#:exists'))) {var if_res1001 = M8.cdr(l11899);} else {var if_res1001 = l11899;}var if_res1002 = if_res1001;}var l11900 = if_res1002;var l11901 = l11900;if (M8.null_p(l11901)) {var if_res1004 = l11901;} else {if (M8.eq_p(M8.car(l11901),$rjs_core.Keyword.make('#:mode'))) {var if_res1003 = M8.cdr(l11901);} else {var if_res1003 = l11901;}var if_res1004 = if_res1003;}var l11902 = if_res1004;var if_res1005 = M8.null_p(l11902);} else {var if_res1005 = false;}return if_res1005;},temp1000,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists'), $rjs_core.Keyword.make('#:mode')),write_to_file1907);var display_lines_to_file178 = function(exists1711910, exists1741911, mode1701912, mode1731913, separator1721914, separator1751915, l1761916, f1771917) {var l1918 = l1761916;var f1919 = f1771917;if (mode1731913) {var if_res1006 = mode1701912;} else {var if_res1006 = $rjs_core.Symbol.make("binary");}var mode1920 = if_res1006;if (exists1741911) {var if_res1007 = exists1711910;} else {var if_res1007 = $rjs_core.Symbol.make("error");}var exists1921 = if_res1007;if (separator1751915) {var if_res1008 = separator1721914;} else {var if_res1008 = new Uint8Array([10]);}var newline1922 = if_res1008;if (M8.list_p(l1918)) {var if_res1009 = M8.rvoid();} else {var if_res1009 = M8.raise_argument_error($rjs_core.Symbol.make("display-lines-to-file"),"list?",l1918);}if_res1009;return __gt_file($rjs_core.Symbol.make("display-lines-to-file"),f1919,mode1920,exists1921,function(p1923) {return M17.do_lines__gt_port(l1918,p1923,newline1922);});};var unpack179 = function(given_kws1924, given_args1925, l1761926, f1771927) {if (M8.pair_p(given_kws1924)) {var if_res1010 = M8.eq_p($rjs_core.Keyword.make('#:exists'),M8.car(given_kws1924));} else {var if_res1010 = false;}var exists1741928 = if_res1010;if (exists1741928) {var if_res1011 = M8.car(given_args1925);} else {var if_res1011 = M8.rvoid();}var exists1711929 = if_res1011;if (exists1741928) {var if_res1012 = M8.cdr(given_kws1924);} else {var if_res1012 = given_kws1924;}var given_kws1930 = if_res1012;if (exists1741928) {var if_res1013 = M8.cdr(given_args1925);} else {var if_res1013 = given_args1925;}var given_args1931 = if_res1013;if (M8.pair_p(given_kws1930)) {var if_res1014 = M8.eq_p($rjs_core.Keyword.make('#:mode'),M8.car(given_kws1930));} else {var if_res1014 = false;}var mode1731932 = if_res1014;if (mode1731932) {var if_res1015 = M8.car(given_args1931);} else {var if_res1015 = M8.rvoid();}var mode1701933 = if_res1015;if (mode1731932) {var if_res1016 = M8.cdr(given_kws1930);} else {var if_res1016 = given_kws1930;}var given_kws1934 = if_res1016;if (mode1731932) {var if_res1017 = M8.cdr(given_args1931);} else {var if_res1017 = given_args1931;}var given_args1935 = if_res1017;var separator1751936 = M8.pair_p(given_kws1934);if (separator1751936) {var if_res1018 = M8.car(given_args1935);} else {var if_res1018 = M8.rvoid();}var separator1721937 = if_res1018;return display_lines_to_file178(exists1711929,exists1741928,mode1701933,mode1731932,separator1721937,separator1751936,l1761926,f1771927);};var cl1021 = function(given_kws1946, given_args1947, l1948, f1949) {return unpack179(given_kws1946,given_args1947,l1948,f1949);};var temp1023 = $rjs_core.attachProcedureArity(function() {var fixed_lam1022 = {'4':cl1021}[arguments.length];if (fixed_lam1022!==undefined) {return fixed_lam1022.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[4]);var cl1019 = function(l1951, f1952) {return unpack179(M8.rnull,M8.rnull,l1951,f1952);};var display_lines_to_file1950 = $rjs_core.attachProcedureArity(function() {var fixed_lam1020 = {'2':cl1019}[arguments.length];if (fixed_lam1020!==undefined) {return fixed_lam1020.apply(null,arguments);} else {return M8.error("case-lambda: invalid case");}},[2]);var display_lines_to_file180 = M0.__rjs_quoted__.make_optional_keyword_procedure(function(given_kws1938, given_argc1939) {if (M8._eq_(given_argc1939,4)) {var l11940 = given_kws1938;if (M8.null_p(l11940)) {var if_res1025 = l11940;} else {if (M8.eq_p(M8.car(l11940),$rjs_core.Keyword.make('#:exists'))) {var if_res1024 = M8.cdr(l11940);} else {var if_res1024 = l11940;}var if_res1025 = if_res1024;}var l11941 = if_res1025;var l11942 = l11941;if (M8.null_p(l11942)) {var if_res1027 = l11942;} else {if (M8.eq_p(M8.car(l11942),$rjs_core.Keyword.make('#:mode'))) {var if_res1026 = M8.cdr(l11942);} else {var if_res1026 = l11942;}var if_res1027 = if_res1026;}var l11943 = if_res1027;var l11944 = l11943;if (M8.null_p(l11944)) {var if_res1029 = l11944;} else {if (M8.eq_p(M8.car(l11944),$rjs_core.Keyword.make('#:separator'))) {var if_res1028 = M8.cdr(l11944);} else {var if_res1028 = l11944;}var if_res1029 = if_res1028;}var l11945 = if_res1029;var if_res1030 = M8.null_p(l11945);} else {var if_res1030 = false;}return if_res1030;},temp1023,M8.rnull,$rjs_core.Pair.makeList($rjs_core.Keyword.make('#:exists'), $rjs_core.Keyword.make('#:mode'), $rjs_core.Keyword.make('#:separator')),display_lines_to_file1950);var user_read_bit = 256;var user_write_bit = 128;var user_execute_bit = 64;var group_read_bit = 32;var group_write_bit = 16;var group_execute_bit = 8;var other_read_bit = 4;var other_write_bit = 2;var other_execute_bit = 1;var __rjs_quoted__ = {};__rjs_quoted__.file__gt_lines141 = file__gt_lines141;__rjs_quoted__.file__gt_bytes_lines151 = file__gt_bytes_lines151;__rjs_quoted__.file__gt_string115 = file__gt_string115;__rjs_quoted__.file__gt_bytes121 = file__gt_bytes121;__rjs_quoted__.file__gt_string113 = file__gt_string113;__rjs_quoted__.make_temporary_file_by_proc = make_temporary_file_by_proc;__rjs_quoted__.pathlist_closure107 = pathlist_closure107;__rjs_quoted__.pathlist_closure109 = pathlist_closure109;__rjs_quoted__.get_preference73 = get_preference73;__rjs_quoted__.call_with_file_lock_by_timeout33 = call_with_file_lock_by_timeout33;__rjs_quoted__.delete_directory_by_files4 = delete_directory_by_files4;__rjs_quoted__.call_with_file_lock_by_timeout35 = call_with_file_lock_by_timeout35;__rjs_quoted__.copy_directory_by_files15 = copy_directory_by_files15;__rjs_quoted__.file__gt_value127 = file__gt_value127;__rjs_quoted__.write_to_file167 = write_to_file167;__rjs_quoted__.call_with_atomic_output_file22 = call_with_atomic_output_file22;__rjs_quoted__.display_to_file158 = display_to_file158;__rjs_quoted__.call_with_file_lock42 = call_with_file_lock42;__rjs_quoted__.make_handle_get_preference_locked57 = make_handle_get_preference_locked57;__rjs_quoted__.file__gt_list135 = file__gt_list135;__rjs_quoted__.file__gt_lines143 = file__gt_lines143;__rjs_quoted__.file__gt_bytes119 = file__gt_bytes119;__rjs_quoted__.file__gt_list133 = file__gt_list133;__rjs_quoted__.get_preference75 = get_preference75;__rjs_quoted__.find_files99 = find_files99;__rjs_quoted__.display_lines_to_file180 = display_lines_to_file180;__rjs_quoted__.file__gt_bytes_lines149 = file__gt_bytes_lines149;__rjs_quoted__.display_lines_to_file178 = display_lines_to_file178;__rjs_quoted__.find_files101 = find_files101;__rjs_quoted__.file__gt_value125 = file__gt_value125;__rjs_quoted__.copy_directory_by_files13 = copy_directory_by_files13;__rjs_quoted__.delete_directory_by_files6 = delete_directory_by_files6;__rjs_quoted__.display_to_file160 = display_to_file160;__rjs_quoted__.call_with_file_lock44 = call_with_file_lock44;__rjs_quoted__.make_handle_get_preference_locked59 = make_handle_get_preference_locked59;__rjs_quoted__.write_to_file169 = write_to_file169;__rjs_quoted__.call_with_atomic_output_file20 = call_with_atomic_output_file20;export { __rjs_quoted__,other_execute_bit,other_write_bit,other_read_bit,group_execute_bit,group_write_bit,group_read_bit,user_execute_bit,user_write_bit,user_read_bit,fold_files,make_lock_file_name,preferences_lock_file_mode,put_preferences,make_parent_directory_times_,make_directory_times_ };